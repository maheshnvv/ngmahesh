import{$ as O,A as ge,Aa as gr,B as Ue,Ba as Ei,C,Ca as dt,D as w,Da as An,E as xi,Ea as _r,F as En,Fa as vr,G as Q,Ga as yr,H as Si,Ha as br,I as Be,Ia as Cr,J as ar,Ja as wr,K as y,Ka as Ti,L as W,M as Wt,N as Mi,O as Pi,Oa as xr,P as ot,Q as Y,Ra as Sr,S as E,T as Li,U as Re,V as h,W as u,X as rt,Y as lr,Z as dr,_ as xe,a as Z,aa as q,b as X,ba as $e,c as Pa,ca as qe,d as La,da as Ke,e as tr,ea as cr,f as Ee,fa as p,g as vi,ga as de,h as ve,ha as $,i as Ge,ia as Ze,j as bt,ja as Tn,k as ir,ka as ur,l as Ht,m as Ln,n as yi,o as nr,oa as st,p as or,pa as at,q as bi,qa as lt,r as rr,ra as Gt,s as sr,sa as Oi,t as jt,u as ze,ua as hr,v as On,va as pr,w as Ct,wa as Di,x as Ci,xa as mr,y as wi,z as Dn,za as fr}from"./chunk-NVGO53OQ.js";var Yr=Pa((Zi,Kr)=>{"use strict";(function(l,n){typeof Zi=="object"&&typeof Kr<"u"?n(Zi):typeof define=="function"&&define.amd?define(["exports"],n):(l=typeof globalThis<"u"?globalThis:l||self,n(l.leaflet={}))})(Zi,function(l){"use strict";var n="1.9.4";function o(e){var t,i,r,a;for(i=1,r=arguments.length;i<r;i++){a=arguments[i];for(t in a)e[t]=a[t]}return e}var s=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}();function d(e,t){var i=Array.prototype.slice;if(e.bind)return e.bind.apply(e,i.call(arguments,1));var r=i.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(i.call(arguments)):arguments)}}var m=0;function g(e){return"_leaflet_id"in e||(e._leaflet_id=++m),e._leaflet_id}function x(e,t,i){var r,a,c,f;return f=function(){r=!1,a&&(c.apply(i,a),a=!1)},c=function(){r?a=arguments:(e.apply(i,arguments),setTimeout(f,t),r=!0)},c}function P(e,t,i){var r=t[1],a=t[0],c=r-a;return e===r&&i?e:((e-a)%c+c)%c+a}function S(){return!1}function I(e,t){if(t===!1)return e;var i=Math.pow(10,t===void 0?6:t);return Math.round(e*i)/i}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function B(e){return z(e).split(/\s+/)}function G(e,t){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?s(e.options):{});for(var i in t)e.options[i]=t[i];return e.options}function Je(e,t,i){var r=[];for(var a in e)r.push(encodeURIComponent(i?a.toUpperCase():a)+"="+encodeURIComponent(e[a]));return(!t||t.indexOf("?")===-1?"?":"&")+r.join("&")}var ce=/\{ *([\w_ -]+) *\}/g;function Te(e,t){return e.replace(ce,function(i,r){var a=t[r];if(a===void 0)throw new Error("No value provided for variable "+i);return typeof a=="function"&&(a=a(t)),a})}var ne=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function ct(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1}var Qe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Wi(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var Rn=0;function Zn(e){var t=+new Date,i=Math.max(0,16-(t-Rn));return Rn=t+i,window.setTimeout(e,i)}var Gi=window.requestAnimationFrame||Wi("RequestAnimationFrame")||Zn,Hn=window.cancelAnimationFrame||Wi("CancelAnimationFrame")||Wi("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function he(e,t,i){if(i&&Gi===Zn)e.call(t);else return Gi.call(window,d(e,t))}function ye(e){e&&Hn.call(window,e)}var es={__proto__:null,extend:o,create:s,bind:d,get lastId(){return m},stamp:g,throttle:x,wrapNum:P,falseFn:S,formatNum:I,trim:z,splitWords:B,setOptions:G,getParamString:Je,template:Te,isArray:ne,indexOf:ct,emptyImageUrl:Qe,requestFn:Gi,cancelFn:Hn,requestAnimFrame:he,cancelAnimFrame:ye};function Ae(){}Ae.extend=function(e){var t=function(){G(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,r=s(i);r.constructor=t,t.prototype=r;for(var a in this)Object.prototype.hasOwnProperty.call(this,a)&&a!=="prototype"&&a!=="__super__"&&(t[a]=this[a]);return e.statics&&o(t,e.statics),e.includes&&(ts(e.includes),o.apply(null,[r].concat(e.includes))),o(r,e),delete r.statics,delete r.includes,r.options&&(r.options=i.options?s(i.options):{},o(r.options,e.options)),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var c=0,f=r._initHooks.length;c<f;c++)r._initHooks[c].call(this)}},t},Ae.include=function(e){var t=this.prototype.options;return o(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},Ae.mergeOptions=function(e){return o(this.prototype.options,e),this},Ae.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),i=typeof e=="function"?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};function ts(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=ne(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var _e={on:function(e,t,i){if(typeof e=="object")for(var r in e)this._on(r,e[r],t);else{e=B(e);for(var a=0,c=e.length;a<c;a++)this._on(e[a],t,i)}return this},off:function(e,t,i){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var r in e)this._off(r,e[r],t);else{e=B(e);for(var a=arguments.length===1,c=0,f=e.length;c<f;c++)a?this._off(e[c]):this._off(e[c],t,i)}return this},_on:function(e,t,i,r){if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}if(this._listens(e,t,i)===!1){i===this&&(i=void 0);var a={fn:t,ctx:i};r&&(a.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(a)}},_off:function(e,t,i){var r,a,c;if(this._events&&(r=this._events[e],!!r)){if(arguments.length===1){if(this._firingCount)for(a=0,c=r.length;a<c;a++)r[a].fn=S;delete this._events[e];return}if(typeof t!="function"){console.warn("wrong listener type: "+typeof t);return}var f=this._listens(e,t,i);if(f!==!1){var _=r[f];this._firingCount&&(_.fn=S,this._events[e]=r=r.slice()),r.splice(f,1)}}},fire:function(e,t,i){if(!this.listens(e,i))return this;var r=o({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var c=0,f=a.length;c<f;c++){var _=a[c],v=_.fn;_.once&&this.off(e,v,_.ctx),v.call(_.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(e,t,i,r){typeof e!="string"&&console.warn('"string" type argument expected');var a=t;typeof t!="function"&&(r=!!t,a=void 0,i=void 0);var c=this._events&&this._events[e];if(c&&c.length&&this._listens(e,a,i)!==!1)return!0;if(r){for(var f in this._eventParents)if(this._eventParents[f].listens(e,t,i,r))return!0}return!1},_listens:function(e,t,i){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;i===this&&(i=void 0);for(var a=0,c=r.length;a<c;a++)if(r[a].fn===t&&r[a].ctx===i)return a;return!1},once:function(e,t,i){if(typeof e=="object")for(var r in e)this._on(r,e[r],t,!0);else{e=B(e);for(var a=0,c=e.length;a<c;a++)this._on(e[a],t,i,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[g(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[g(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,o({layer:e.target,propagatedFrom:e.target},e),!0)}};_e.addEventListener=_e.on,_e.removeEventListener=_e.clearAllEventListeners=_e.off,_e.addOneTimeEventListener=_e.once,_e.fireEvent=_e.fire,_e.hasEventListeners=_e.listens;var Lt=Ae.extend(_e);function V(e,t,i){this.x=i?Math.round(e):e,this.y=i?Math.round(t):t}var jn=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};V.prototype={clone:function(){return new V(this.x,this.y)},add:function(e){return this.clone()._add(k(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(k(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new V(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new V(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=jn(this.x),this.y=jn(this.y),this},distanceTo:function(e){e=k(e);var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){return e=k(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=k(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function k(e,t,i){return e instanceof V?e:ne(e)?new V(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new V(e.x,e.y):new V(e,t,i)}function ee(e,t){if(e)for(var i=t?[e,t]:e,r=0,a=i.length;r<a;r++)this.extend(i[r])}ee.prototype={extend:function(e){var t,i;if(!e)return this;if(e instanceof V||typeof e[0]=="number"||"x"in e)t=i=k(e);else if(e=pe(e),t=e.min,i=e.max,!t||!i)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=i.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(i.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(i.y,this.max.y)),this},getCenter:function(e){return k((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return k(this.min.x,this.max.y)},getTopRight:function(){return k(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,i;return typeof e[0]=="number"||e instanceof V?e=k(e):e=pe(e),e instanceof ee?(t=e.min,i=e.max):t=i=e,t.x>=this.min.x&&i.x<=this.max.x&&t.y>=this.min.y&&i.y<=this.max.y},intersects:function(e){e=pe(e);var t=this.min,i=this.max,r=e.min,a=e.max,c=a.x>=t.x&&r.x<=i.x,f=a.y>=t.y&&r.y<=i.y;return c&&f},overlaps:function(e){e=pe(e);var t=this.min,i=this.max,r=e.min,a=e.max,c=a.x>t.x&&r.x<i.x,f=a.y>t.y&&r.y<i.y;return c&&f},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,i=this.max,r=Math.abs(t.x-i.x)*e,a=Math.abs(t.y-i.y)*e;return pe(k(t.x-r,t.y-a),k(i.x+r,i.y+a))},equals:function(e){return e?(e=pe(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function pe(e,t){return!e||e instanceof ee?e:new ee(e,t)}function me(e,t){if(e)for(var i=t?[e,t]:e,r=0,a=i.length;r<a;r++)this.extend(i[r])}me.prototype={extend:function(e){var t=this._southWest,i=this._northEast,r,a;if(e instanceof K)r=e,a=e;else if(e instanceof me){if(r=e._southWest,a=e._northEast,!r||!a)return this}else return e?this.extend(H(e)||oe(e)):this;return!t&&!i?(this._southWest=new K(r.lat,r.lng),this._northEast=new K(a.lat,a.lng)):(t.lat=Math.min(r.lat,t.lat),t.lng=Math.min(r.lng,t.lng),i.lat=Math.max(a.lat,i.lat),i.lng=Math.max(a.lng,i.lng)),this},pad:function(e){var t=this._southWest,i=this._northEast,r=Math.abs(t.lat-i.lat)*e,a=Math.abs(t.lng-i.lng)*e;return new me(new K(t.lat-r,t.lng-a),new K(i.lat+r,i.lng+a))},getCenter:function(){return new K((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new K(this.getNorth(),this.getWest())},getSouthEast:function(){return new K(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof K||"lat"in e?e=H(e):e=oe(e);var t=this._southWest,i=this._northEast,r,a;return e instanceof me?(r=e.getSouthWest(),a=e.getNorthEast()):r=a=e,r.lat>=t.lat&&a.lat<=i.lat&&r.lng>=t.lng&&a.lng<=i.lng},intersects:function(e){e=oe(e);var t=this._southWest,i=this._northEast,r=e.getSouthWest(),a=e.getNorthEast(),c=a.lat>=t.lat&&r.lat<=i.lat,f=a.lng>=t.lng&&r.lng<=i.lng;return c&&f},overlaps:function(e){e=oe(e);var t=this._southWest,i=this._northEast,r=e.getSouthWest(),a=e.getNorthEast(),c=a.lat>t.lat&&r.lat<i.lat,f=a.lng>t.lng&&r.lng<i.lng;return c&&f},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,t){return e?(e=oe(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function oe(e,t){return e instanceof me?e:new me(e,t)}function K(e,t,i){if(isNaN(e)||isNaN(t))throw new Error("Invalid LatLng object: ("+e+", "+t+")");this.lat=+e,this.lng=+t,i!==void 0&&(this.alt=+i)}K.prototype={equals:function(e,t){if(!e)return!1;e=H(e);var i=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return i<=(t===void 0?1e-9:t)},toString:function(e){return"LatLng("+I(this.lat,e)+", "+I(this.lng,e)+")"},distanceTo:function(e){return He.distance(this,H(e))},wrap:function(){return He.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return oe([this.lat-t,this.lng-i],[this.lat+t,this.lng+i])},clone:function(){return new K(this.lat,this.lng,this.alt)}};function H(e,t,i){return e instanceof K?e:ne(e)&&typeof e[0]!="object"?e.length===3?new K(e[0],e[1],e[2]):e.length===2?new K(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new K(e.lat,"lng"in e?e.lng:e.lon,e.alt):t===void 0?null:new K(e,t,i)}var Ie={latLngToPoint:function(e,t){var i=this.projection.project(e),r=this.scale(t);return this.transformation._transform(i,r)},pointToLatLng:function(e,t){var i=this.scale(t),r=this.transformation.untransform(e,i);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,i=this.scale(e),r=this.transformation.transform(t.min,i),a=this.transformation.transform(t.max,i);return new ee(r,a)},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?P(e.lng,this.wrapLng,!0):e.lng,i=this.wrapLat?P(e.lat,this.wrapLat,!0):e.lat,r=e.alt;return new K(i,t,r)},wrapLatLngBounds:function(e){var t=e.getCenter(),i=this.wrapLatLng(t),r=t.lat-i.lat,a=t.lng-i.lng;if(r===0&&a===0)return e;var c=e.getSouthWest(),f=e.getNorthEast(),_=new K(c.lat-r,c.lng-a),v=new K(f.lat-r,f.lng-a);return new me(_,v)}},He=o({},Ie,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var i=Math.PI/180,r=e.lat*i,a=t.lat*i,c=Math.sin((t.lat-e.lat)*i/2),f=Math.sin((t.lng-e.lng)*i/2),_=c*c+Math.cos(r)*Math.cos(a)*f*f,v=2*Math.atan2(Math.sqrt(_),Math.sqrt(1-_));return this.R*v}}),Wn=6378137,Ui={R:Wn,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,i=this.MAX_LATITUDE,r=Math.max(Math.min(i,e.lat),-i),a=Math.sin(r*t);return new V(this.R*e.lng*t,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(e){var t=180/Math.PI;return new K((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:function(){var e=Wn*Math.PI;return new ee([-e,-e],[e,e])}()};function $i(e,t,i,r){if(ne(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=i,this._d=r}$i.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t=t||1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t=t||1,new V((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function Ot(e,t,i,r){return new $i(e,t,i,r)}var qi=o({},He,{code:"EPSG:3857",projection:Ui,transformation:function(){var e=.5/(Math.PI*Ui.R);return Ot(e,.5,-e,.5)}()}),is=o({},qi,{code:"EPSG:900913"});function Gn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Un(e,t){var i="",r,a,c,f,_,v;for(r=0,c=e.length;r<c;r++){for(_=e[r],a=0,f=_.length;a<f;a++)v=_[a],i+=(a?"L":"M")+v.x+" "+v.y;i+=t?D.svg?"z":"x":""}return i||"M0 0"}var Ki=document.documentElement.style,Xt="ActiveXObject"in window,ns=Xt&&!document.addEventListener,$n="msLaunchUri"in navigator&&!("documentMode"in document),Yi=Pe("webkit"),qn=Pe("android"),Kn=Pe("android 2")||Pe("android 3"),os=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),rs=qn&&Pe("Google")&&os<537&&!("AudioNode"in window),Ji=!!window.opera,Yn=!$n&&Pe("chrome"),Jn=Pe("gecko")&&!Yi&&!Ji&&!Xt,ss=!Yn&&Pe("safari"),Qn=Pe("phantom"),Xn="OTransition"in Ki,as=navigator.platform.indexOf("Win")===0,eo=Xt&&"transition"in Ki,Qi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Kn,to="MozPerspective"in Ki,ls=!window.L_DISABLE_3D&&(eo||Qi||to)&&!Xn&&!Qn,Dt=typeof orientation<"u"||Pe("mobile"),ds=Dt&&Yi,cs=Dt&&Qi,io=!window.PointerEvent&&window.MSPointerEvent,no=!!(window.PointerEvent||io),oo="ontouchstart"in window||!!window.TouchEvent,us=!window.L_NO_TOUCH&&(oo||no),hs=Dt&&Ji,ps=Dt&&Jn,ms=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,fs=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",S,t),window.removeEventListener("testPassiveEventSupport",S,t)}catch{}return e}(),gs=function(){return!!document.createElement("canvas").getContext}(),Xi=!!(document.createElementNS&&Gn("svg").createSVGRect),_s=!!Xi&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),vs=!Xi&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var t=e.firstChild;return t.style.behavior="url(#default#VML)",t&&typeof t.adj=="object"}catch{return!1}}(),ys=navigator.platform.indexOf("Mac")===0,bs=navigator.platform.indexOf("Linux")===0;function Pe(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var D={ie:Xt,ielt9:ns,edge:$n,webkit:Yi,android:qn,android23:Kn,androidStock:rs,opera:Ji,chrome:Yn,gecko:Jn,safari:ss,phantom:Qn,opera12:Xn,win:as,ie3d:eo,webkit3d:Qi,gecko3d:to,any3d:ls,mobile:Dt,mobileWebkit:ds,mobileWebkit3d:cs,msPointer:io,pointer:no,touch:us,touchNative:oo,mobileOpera:hs,mobileGecko:ps,retina:ms,passiveEvents:fs,canvas:gs,svg:Xi,vml:vs,inlineSvg:_s,mac:ys,linux:bs},ro=D.msPointer?"MSPointerDown":"pointerdown",so=D.msPointer?"MSPointerMove":"pointermove",ao=D.msPointer?"MSPointerUp":"pointerup",lo=D.msPointer?"MSPointerCancel":"pointercancel",en={touchstart:ro,touchmove:so,touchend:ao,touchcancel:lo},co={touchstart:Ps,touchmove:ei,touchend:ei,touchcancel:ei},ut={},uo=!1;function Cs(e,t,i){return t==="touchstart"&&Ms(),co[t]?(i=co[t].bind(this,i),e.addEventListener(en[t],i,!1),i):(console.warn("wrong event specified:",t),S)}function ws(e,t,i){if(!en[t]){console.warn("wrong event specified:",t);return}e.removeEventListener(en[t],i,!1)}function xs(e){ut[e.pointerId]=e}function Ss(e){ut[e.pointerId]&&(ut[e.pointerId]=e)}function ho(e){delete ut[e.pointerId]}function Ms(){uo||(document.addEventListener(ro,xs,!0),document.addEventListener(so,Ss,!0),document.addEventListener(ao,ho,!0),document.addEventListener(lo,ho,!0),uo=!0)}function ei(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||"mouse")){t.touches=[];for(var i in ut)t.touches.push(ut[i]);t.changedTouches=[t],e(t)}}function Ps(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&le(t),ei(e,t)}function Ls(e){var t={},i,r;for(r in e)i=e[r],t[r]=i&&i.bind?i.bind(e):i;return e=t,t.type="dblclick",t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var Os=200;function Ds(e,t){e.addEventListener("dblclick",t);var i=0,r;function a(c){if(c.detail!==1){r=c.detail;return}if(!(c.pointerType==="mouse"||c.sourceCapabilities&&!c.sourceCapabilities.firesTouchEvents)){var f=_o(c);if(!(f.some(function(v){return v instanceof HTMLLabelElement&&v.attributes.for})&&!f.some(function(v){return v instanceof HTMLInputElement||v instanceof HTMLSelectElement}))){var _=Date.now();_-i<=Os?(r++,r===2&&t(Ls(c))):r=1,i=_}}}return e.addEventListener("click",a),{dblclick:t,simDblclick:a}}function Es(e,t){e.removeEventListener("dblclick",t.dblclick),e.removeEventListener("click",t.simDblclick)}var tn=ni(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Et=ni(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),po=Et==="webkitTransition"||Et==="OTransition"?Et+"End":"transitionend";function mo(e){return typeof e=="string"?document.getElementById(e):e}function Tt(e,t){var i=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!i||i==="auto")&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);i=r?r[t]:null}return i==="auto"?null:i}function U(e,t,i){var r=document.createElement(e);return r.className=t||"",i&&i.appendChild(r),r}function te(e){var t=e.parentNode;t&&t.removeChild(e)}function ti(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ht(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function pt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function nn(e,t){if(e.classList!==void 0)return e.classList.contains(t);var i=ii(e);return i.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(i)}function N(e,t){if(e.classList!==void 0)for(var i=B(t),r=0,a=i.length;r<a;r++)e.classList.add(i[r]);else if(!nn(e,t)){var c=ii(e);on(e,(c?c+" ":"")+t)}}function ie(e,t){e.classList!==void 0?e.classList.remove(t):on(e,z((" "+ii(e)+" ").replace(" "+t+" "," ")))}function on(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function ii(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function be(e,t){"opacity"in e.style?e.style.opacity=t:"filter"in e.style&&Ts(e,t)}function Ts(e,t){var i=!1,r="DXImageTransform.Microsoft.Alpha";try{i=e.filters.item(r)}catch{if(t===1)return}t=Math.round(t*100),i?(i.Enabled=t!==100,i.Opacity=t):e.style.filter+=" progid:"+r+"(opacity="+t+")"}function ni(e){for(var t=document.documentElement.style,i=0;i<e.length;i++)if(e[i]in t)return e[i];return!1}function Xe(e,t,i){var r=t||new V(0,0);e.style[tn]=(D.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(i?" scale("+i+")":"")}function re(e,t){e._leaflet_pos=t,D.any3d?Xe(e,t):(e.style.left=t.x+"px",e.style.top=t.y+"px")}function et(e){return e._leaflet_pos||new V(0,0)}var At,It,rn;if("onselectstart"in document)At=function(){F(window,"selectstart",le)},It=function(){J(window,"selectstart",le)};else{var kt=ni(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);At=function(){if(kt){var e=document.documentElement.style;rn=e[kt],e[kt]="none"}},It=function(){kt&&(document.documentElement.style[kt]=rn,rn=void 0)}}function sn(){F(window,"dragstart",le)}function an(){J(window,"dragstart",le)}var oi,ln;function dn(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(ri(),oi=e,ln=e.style.outlineStyle,e.style.outlineStyle="none",F(window,"keydown",ri))}function ri(){oi&&(oi.style.outlineStyle=ln,oi=void 0,ln=void 0,J(window,"keydown",ri))}function fo(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function cn(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var As={__proto__:null,TRANSFORM:tn,TRANSITION:Et,TRANSITION_END:po,get:mo,getStyle:Tt,create:U,remove:te,empty:ti,toFront:ht,toBack:pt,hasClass:nn,addClass:N,removeClass:ie,setClass:on,getClass:ii,setOpacity:be,testProp:ni,setTransform:Xe,setPosition:re,getPosition:et,get disableTextSelection(){return At},get enableTextSelection(){return It},disableImageDrag:sn,enableImageDrag:an,preventOutline:dn,restoreOutline:ri,getSizedParentNode:fo,getScale:cn};function F(e,t,i,r){if(t&&typeof t=="object")for(var a in t)hn(e,a,t[a],i);else{t=B(t);for(var c=0,f=t.length;c<f;c++)hn(e,t[c],i,r)}return this}var Le="_leaflet_events";function J(e,t,i,r){if(arguments.length===1)go(e),delete e[Le];else if(t&&typeof t=="object")for(var a in t)pn(e,a,t[a],i);else if(t=B(t),arguments.length===2)go(e,function(_){return ct(t,_)!==-1});else for(var c=0,f=t.length;c<f;c++)pn(e,t[c],i,r);return this}function go(e,t){for(var i in e[Le]){var r=i.split(/\d/)[0];(!t||t(r))&&pn(e,r,null,null,i)}}var un={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hn(e,t,i,r){var a=t+g(i)+(r?"_"+g(r):"");if(e[Le]&&e[Le][a])return this;var c=function(_){return i.call(r||e,_||window.event)},f=c;!D.touchNative&&D.pointer&&t.indexOf("touch")===0?c=Cs(e,t,c):D.touch&&t==="dblclick"?c=Ds(e,c):"addEventListener"in e?t==="touchstart"||t==="touchmove"||t==="wheel"||t==="mousewheel"?e.addEventListener(un[t]||t,c,D.passiveEvents?{passive:!1}:!1):t==="mouseenter"||t==="mouseleave"?(c=function(_){_=_||window.event,fn(e,_)&&f(_)},e.addEventListener(un[t],c,!1)):e.addEventListener(t,f,!1):e.attachEvent("on"+t,c),e[Le]=e[Le]||{},e[Le][a]=c}function pn(e,t,i,r,a){a=a||t+g(i)+(r?"_"+g(r):"");var c=e[Le]&&e[Le][a];if(!c)return this;!D.touchNative&&D.pointer&&t.indexOf("touch")===0?ws(e,t,c):D.touch&&t==="dblclick"?Es(e,c):"removeEventListener"in e?e.removeEventListener(un[t]||t,c,!1):e.detachEvent("on"+t,c),e[Le][a]=null}function tt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function mn(e){return hn(e,"wheel",tt),this}function Vt(e){return F(e,"mousedown touchstart dblclick contextmenu",tt),e._leaflet_disable_click=!0,this}function le(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function it(e){return le(e),tt(e),this}function _o(e){if(e.composedPath)return e.composedPath();for(var t=[],i=e.target;i;)t.push(i),i=i.parentNode;return t}function vo(e,t){if(!t)return new V(e.clientX,e.clientY);var i=cn(t),r=i.boundingClientRect;return new V((e.clientX-r.left)/i.x-t.clientLeft,(e.clientY-r.top)/i.y-t.clientTop)}var Is=D.linux&&D.chrome?window.devicePixelRatio:D.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function yo(e){return D.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/Is:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function fn(e,t){var i=t.relatedTarget;if(!i)return!0;try{for(;i&&i!==e;)i=i.parentNode}catch{return!1}return i!==e}var ks={__proto__:null,on:F,off:J,stopPropagation:tt,disableScrollPropagation:mn,disableClickPropagation:Vt,preventDefault:le,stop:it,getPropagationPath:_o,getMousePosition:vo,getWheelDelta:yo,isExternalTarget:fn,addListener:F,removeListener:J},bo=Lt.extend({run:function(e,t,i,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=et(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=he(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,i=this._duration*1e3;t<i?this._runFrame(this._easeOut(t/i),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var i=this._startPos.add(this._offset.multiplyBy(e));t&&i._round(),re(this._el,i),this.fire("step")},_complete:function(){ye(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),j=Lt.extend({options:{crs:qi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=G(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(H(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Et&&D.any3d&&!D.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),F(this._proxy,po,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,i){if(t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(H(e),t,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&i!==!0){i.animate!==void 0&&(i.zoom=o({animate:i.animate},i.zoom),i.pan=o({animate:i.animate,duration:i.duration},i.pan));var r=this._zoom!==t?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,i.zoom):this._tryAnimatedPan(e,i.pan);if(r)return clearTimeout(this._sizeTimer),this}return this._resetView(e,t,i.pan&&i.pan.noMoveStart),this},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e=e||(D.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e=e||(D.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,i){var r=this.getZoomScale(t),a=this.getSize().divideBy(2),c=e instanceof V?e:this.latLngToContainerPoint(e),f=c.subtract(a).multiplyBy(1-1/r),_=this.containerPointToLatLng(a.add(f));return this.setView(_,t,{zoom:i})},_getBoundsCenterZoom:function(e,t){t=t||{},e=e.getBounds?e.getBounds():oe(e);var i=k(t.paddingTopLeft||t.padding||[0,0]),r=k(t.paddingBottomRight||t.padding||[0,0]),a=this.getBoundsZoom(e,!1,i.add(r));if(a=typeof t.maxZoom=="number"?Math.min(t.maxZoom,a):a,a===1/0)return{center:e.getCenter(),zoom:a};var c=r.subtract(i).divideBy(2),f=this.project(e.getSouthWest(),a),_=this.project(e.getNorthEast(),a),v=this.unproject(f.add(_).divideBy(2).add(c),a);return{center:v,zoom:a}},fitBounds:function(e,t){if(e=oe(e),!e.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(e,t);return this.setView(i.center,i.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=k(e).round(),t=t||{},!e.x&&!e.y)return this.fire("moveend");if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new bo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire("movestart"),t.animate!==!1){N(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,i,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,t,i){if(i=i||{},i.animate===!1||!D.any3d)return this.setView(e,t,i);this._stop();var r=this.project(this.getCenter()),a=this.project(e),c=this.getSize(),f=this._zoom;e=H(e),t=t===void 0?f:t;var _=Math.max(c.x,c.y),v=_*this.getZoomScale(f,t),b=a.distanceTo(r)||1,M=1.42,T=M*M;function R(se){var _i=se?-1:1,wa=se?v:_,xa=v*v-_*_+_i*T*T*b*b,Sa=2*wa*T*b,Pn=xa/Sa,er=Math.sqrt(Pn*Pn+1)-Pn,Ma=er<1e-9?-18:Math.log(er);return Ma}function ue(se){return(Math.exp(se)-Math.exp(-se))/2}function ae(se){return(Math.exp(se)+Math.exp(-se))/2}function we(se){return ue(se)/ae(se)}var fe=R(0);function yt(se){return _*(ae(fe)/ae(fe+M*se))}function va(se){return _*(ae(fe)*we(fe+M*se)-ue(fe))/T}function ya(se){return 1-Math.pow(1-se,1.5)}var ba=Date.now(),Qo=(R(1)-fe)/M,Ca=i.duration?1e3*i.duration:1e3*Qo*.8;function Xo(){var se=(Date.now()-ba)/Ca,_i=ya(se)*Qo;se<=1?(this._flyToFrame=he(Xo,this),this._move(this.unproject(r.add(a.subtract(r).multiplyBy(va(_i)/b)),f),this.getScaleZoom(_/yt(_i),f),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),Xo.call(this),this},flyToBounds:function(e,t){var i=this._getBoundsCenterZoom(e,t);return this.flyTo(i.center,i.zoom,t)},setMaxBounds:function(e){return e=oe(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var i=this.getCenter(),r=this._limitCenter(i,this._zoom,oe(e));return i.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){t=t||{};var i=k(t.paddingTopLeft||t.padding||[0,0]),r=k(t.paddingBottomRight||t.padding||[0,0]),a=this.project(this.getCenter()),c=this.project(e),f=this.getPixelBounds(),_=pe([f.min.add(i),f.max.subtract(r)]),v=_.getSize();if(!_.contains(c)){this._enforcingBounds=!0;var b=c.subtract(_.getCenter()),M=_.extend(c).getSize().subtract(v);a.x+=b.x<0?-M.x:M.x,a.y+=b.y<0?-M.y:M.y,this.panTo(this.unproject(a),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=o({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),r=t.divideBy(2).round(),a=i.divideBy(2).round(),c=r.subtract(a);return!c.x&&!c.y?this:(e.animate&&e.pan?this.panBy(c):(e.pan&&this._rawPanBy(c),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:t,newSize:i}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=o({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var t=d(this._handleGeolocationResponse,this),i=d(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,i,e):navigator.geolocation.getCurrentPosition(t,i,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,i=e.message||(t===1?"permission denied":t===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:t,message:"Geolocation error: "+i+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,i=e.coords.longitude,r=new K(t,i),a=r.toBounds(e.coords.accuracy*2),c=this._locateOptions;if(c.setView){var f=this.getBoundsZoom(a);this.setView(r,c.maxZoom?Math.min(f,c.maxZoom):f)}var _={latlng:r,bounds:a,timestamp:e.timestamp};for(var v in e.coords)typeof e.coords[v]=="number"&&(_[v]=e.coords[v]);this.fire("locationfound",_)}},addHandler:function(e,t){if(!t)return this;var i=this[e]=new t(this);return this._handlers.push(i),this.options[e]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),te(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(ye(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)te(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var i="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),r=U("div",i,t||this._mapPane);return e&&(this._panes[e]=r),r},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),t=this.unproject(e.getBottomLeft()),i=this.unproject(e.getTopRight());return new me(t,i)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,i){e=oe(e),i=k(i||[0,0]);var r=this.getZoom()||0,a=this.getMinZoom(),c=this.getMaxZoom(),f=e.getNorthWest(),_=e.getSouthEast(),v=this.getSize().subtract(i),b=pe(this.project(_,r),this.project(f,r)).getSize(),M=D.any3d?this.options.zoomSnap:1,T=v.x/b.x,R=v.y/b.y,ue=t?Math.max(T,R):Math.min(T,R);return r=this.getScaleZoom(ue,r),M&&(r=Math.round(r/(M/100))*(M/100),r=t?Math.ceil(r/M)*M:Math.floor(r/M)*M),Math.max(a,Math.min(c,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new V(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var i=this._getTopLeftPoint(e,t);return new ee(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var i=this.options.crs;return t=t===void 0?this._zoom:t,i.scale(e)/i.scale(t)},getScaleZoom:function(e,t){var i=this.options.crs;t=t===void 0?this._zoom:t;var r=i.zoom(e*i.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(H(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(k(e),t)},layerPointToLatLng:function(e){var t=k(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){var t=this.project(H(e))._round();return t._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(H(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(oe(e))},distance:function(e,t){return this.options.crs.distance(H(e),H(t))},containerPointToLayerPoint:function(e){return k(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return k(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(k(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(H(e)))},mouseEventToContainerPoint:function(e){return vo(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=mo(e);if(t){if(t._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");F(t,"scroll",this._onScroll,this),this._containerId=g(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&D.any3d,N(e,"leaflet-container"+(D.touch?" leaflet-touch":"")+(D.retina?" leaflet-retina":"")+(D.ielt9?" leaflet-oldie":"")+(D.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var t=Tt(e,"position");t!=="absolute"&&t!=="relative"&&t!=="fixed"&&t!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),re(this._mapPane,new V(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(N(e.markerPane,"leaflet-zoom-hide"),N(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,t,i){re(this._mapPane,new V(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire("viewprereset");var a=this._zoom!==t;this._moveStart(a,i)._move(e,t)._moveEnd(a),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(e,t){return e&&this.fire("zoomstart"),t||this.fire("movestart"),this},_move:function(e,t,i,r){t===void 0&&(t=this._zoom);var a=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?i&&i.pinch&&this.fire("zoom",i):((a||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return ye(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){re(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[g(this._container)]=this;var t=e?J:F;t(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&t(window,"resize",this._onResize,this),D.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){ye(this._resizeRequest),this._resizeRequest=he(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var i=[],r,a=t==="mouseout"||t==="mouseover",c=e.target||e.srcElement,f=!1;c;){if(r=this._targets[g(c)],r&&(t==="click"||t==="preclick")&&this._draggableMoved(r)){f=!0;break}if(r&&r.listens(t,!0)&&(a&&!fn(c,e)||(i.push(r),a))||c===this._container)break;c=c.parentNode}return!i.length&&!f&&!a&&this.listens(t,!0)&&(i=[this]),i},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(t))){var i=e.type;i==="mousedown"&&dn(t),this._fireDOMEvent(e,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,t,i){if(e.type==="click"){var r=o({},e);r.type="preclick",this._fireDOMEvent(r,r.type,i)}var a=this._findEventTargets(e,t);if(i){for(var c=[],f=0;f<i.length;f++)i[f].listens(t,!0)&&c.push(i[f]);a=c.concat(a)}if(a.length){t==="contextmenu"&&le(e);var _=a[0],v={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var b=_.getLatLng&&(!_._radius||_._radius<=10);v.containerPoint=b?this.latLngToContainerPoint(_.getLatLng()):this.mouseEventToContainerPoint(e),v.layerPoint=this.containerPointToLayerPoint(v.containerPoint),v.latlng=b?_.getLatLng():this.layerPointToLatLng(v.layerPoint)}for(f=0;f<a.length;f++)if(a[f].fire(t,v,!0),v.originalEvent._stopped||a[f].options.bubblingMouseEvents===!1&&ct(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on("load",e,t),this},_getMapPanePos:function(){return et(this._mapPane)||new V(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){var i=e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin();return i.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var i=this.getSize()._divideBy(2);return this.project(e,t)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,i){var r=this._getNewPixelOrigin(i,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,i){var r=this._getNewPixelOrigin(i,t);return pe([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,i){if(!i)return e;var r=this.project(e,t),a=this.getSize().divideBy(2),c=new ee(r.subtract(a),r.add(a)),f=this._getBoundsOffset(c,i,t);return Math.abs(f.x)<=1&&Math.abs(f.y)<=1?e:this.unproject(r.add(f),t)},_limitOffset:function(e,t){if(!t)return e;var i=this.getPixelBounds(),r=new ee(i.min.add(e),i.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,i){var r=pe(this.project(t.getNorthEast(),i),this.project(t.getSouthWest(),i)),a=r.min.subtract(e.min),c=r.max.subtract(e.max),f=this._rebound(a.x,-c.x),_=this._rebound(a.y,-c.y);return new V(f,_)},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),i=this.getMaxZoom(),r=D.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(i,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ie(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,t){var i=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(i)?!1:(this.panBy(i,t),!0)},_createAnimProxy:function(){var e=this._proxy=U("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(t){var i=tn,r=this._proxy.style[i];Xe(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),r===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){te(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Xe(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,t,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),a=this._getCenterOffset(e)._divideBy(1-1/r);return i.animate!==!0&&!this.getSize().contains(a)?!1:(he(function(){this._moveStart(!0,i.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,i,r){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,N(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ie(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vs(e,t){return new j(e,t)}var Se=Ae.extend({options:{position:"topright"},initialize:function(e){G(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),i=this.getPosition(),r=e._controlCorners[i];return N(t,"leaflet-control"),i.indexOf("bottom")!==-1?r.insertBefore(t,r.firstChild):r.appendChild(t),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(te(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Ft=function(e){return new Se(e)};j.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t="leaflet-",i=this._controlContainer=U("div",t+"control-container",this._container);function r(a,c){var f=t+a+" "+t+c;e[a+c]=U("div",f,i)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)te(this._controlCorners[e]);te(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Co=Se.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,i,r){return i<r?-1:r<i?1:0}},initialize:function(e,t,i){G(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var r in e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Se.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var t=this._getLayer(g(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){N(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(N(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):ie(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ie(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",t=this._container=U("div",e),i=this.options.collapsed;t.setAttribute("aria-haspopup",!0),Vt(t),mn(t);var r=this._section=U("section",e+"-list");i&&(this._map.on("click",this.collapse,this),F(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var a=this._layersLink=U("a",e+"-toggle",t);a.href="#",a.title="Layers",a.setAttribute("role","button"),F(a,{keydown:function(c){c.keyCode===13&&this._expandSafely()},click:function(c){le(c),this._expandSafely()}},this),i||this.expand(),this._baseLayersList=U("div",e+"-base",r),this._separator=U("div",e+"-separator",r),this._overlaysList=U("div",e+"-overlays",r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&g(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,i){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:i}),this.options.sortLayers&&this._layers.sort(d(function(r,a){return this.options.sortFunction(r.layer,a.layer,r.name,a.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ti(this._baseLayersList),ti(this._overlaysList),this._layerControlInputs=[];var e,t,i,r,a=0;for(i=0;i<this._layers.length;i++)r=this._layers[i],this._addItem(r),t=t||r.overlay,e=e||!r.overlay,a+=r.overlay?0:1;return this.options.hideSingleBase&&(e=e&&a>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=t&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(g(e.target)),i=t.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;i&&this._map.fire(i,t)},_createRadioElement:function(e,t){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(t?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=i,r.firstChild},_addItem:function(e){var t=document.createElement("label"),i=this._map.hasLayer(e.layer),r;e.overlay?(r=document.createElement("input"),r.type="checkbox",r.className="leaflet-control-layers-selector",r.defaultChecked=i):r=this._createRadioElement("leaflet-base-layers_"+g(this),i),this._layerControlInputs.push(r),r.layerId=g(e.layer),F(r,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+e.name;var c=document.createElement("span");t.appendChild(c),c.appendChild(r),c.appendChild(a);var f=e.overlay?this._overlaysList:this._baseLayersList;return f.appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,i,r=[],a=[];this._handlingClick=!0;for(var c=e.length-1;c>=0;c--)t=e[c],i=this._getLayer(t.layerId).layer,t.checked?r.push(i):t.checked||a.push(i);for(c=0;c<a.length;c++)this._map.hasLayer(a[c])&&this._map.removeLayer(a[c]);for(c=0;c<r.length;c++)this._map.hasLayer(r[c])||this._map.addLayer(r[c]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,i,r=this._map.getZoom(),a=e.length-1;a>=0;a--)t=e[a],i=this._getLayer(t.layerId).layer,t.disabled=i.options.minZoom!==void 0&&r<i.options.minZoom||i.options.maxZoom!==void 0&&r>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,F(e,"click",le),this.expand();var t=this;setTimeout(function(){J(e,"click",le),t._preventClick=!1})}}),Fs=function(e,t,i){return new Co(e,t,i)},gn=Se.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var t="leaflet-control-zoom",i=U("div",t+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+"-out",i,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,i,r,a){var c=U("a",i,r);return c.innerHTML=e,c.href="#",c.title=t,c.setAttribute("role","button"),c.setAttribute("aria-label",t),Vt(c),F(c,"click",it),F(c,"click",a,this),F(c,"click",this._refocusOnMap,this),c},_updateDisabled:function(){var e=this._map,t="leaflet-disabled";ie(this._zoomInButton,t),ie(this._zoomOutButton,t),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(N(this._zoomOutButton,t),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(N(this._zoomInButton,t),this._zoomInButton.setAttribute("aria-disabled","true"))}});j.mergeOptions({zoomControl:!0}),j.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new gn,this.addControl(this.zoomControl))});var Ns=function(e){return new gn(e)},wo=Se.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t="leaflet-control-scale",i=U("div",t),r=this.options;return this._addScales(r,t+"-line",i),e.on(r.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),i},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,t,i){e.metric&&(this._mScale=U("div",t,i)),e.imperial&&(this._iScale=U("div",t,i))},_update:function(){var e=this._map,t=e.getSize().y/2,i=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(i)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),i=t<1e3?t+" m":t/1e3+" km";this._updateScale(this._mScale,i,t/e)},_updateImperial:function(e){var t=e*3.2808399,i,r,a;t>5280?(i=t/5280,r=this._getRoundNum(i),this._updateScale(this._iScale,r+" mi",r/i)):(a=this._getRoundNum(t),this._updateScale(this._iScale,a+" ft",a/t))},_updateScale:function(e,t,i){e.style.width=Math.round(this.options.maxWidth*i)+"px",e.innerHTML=t},_getRoundNum:function(e){var t=Math.pow(10,(Math.floor(e)+"").length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,t*i}}),zs=function(e){return new wo(e)},Bs='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',_n=Se.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(D.inlineSvg?Bs+" ":"")+"Leaflet</a>"},initialize:function(e){G(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=U("div","leaflet-control-attribution"),Vt(this._container);for(var t in e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var i=[];this.options.prefix&&i.push(this.options.prefix),e.length&&i.push(e.join(", ")),this._container.innerHTML=i.join(' <span aria-hidden="true">|</span> ')}}});j.mergeOptions({attributionControl:!0}),j.addInitHook(function(){this.options.attributionControl&&new _n().addTo(this)});var Rs=function(e){return new _n(e)};Se.Layers=Co,Se.Zoom=gn,Se.Scale=wo,Se.Attribution=_n,Ft.layers=Fs,Ft.zoom=Ns,Ft.scale=zs,Ft.attribution=Rs;var Oe=Ae.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Oe.addTo=function(e,t){return e.addHandler(t,this),this};var Zs={Events:_e},xo=D.touch?"touchstart mousedown":"mousedown",je=Lt.extend({options:{clickTolerance:3},initialize:function(e,t,i,r){G(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=i},enable:function(){this._enabled||(F(this._dragStartTarget,xo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(je._dragging===this&&this.finishDrag(!0),J(this._dragStartTarget,xo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!nn(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){je._dragging===this&&this.finishDrag();return}if(!(je._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(je._dragging=this,this._preventOutline&&dn(this._element),sn(),At(),!this._moving)){this.fire("down");var t=e.touches?e.touches[0]:e,i=fo(this._element);this._startPoint=new V(t.clientX,t.clientY),this._startPos=et(this._element),this._parentScale=cn(i);var r=e.type==="mousedown";F(document,r?"mousemove":"touchmove",this._onMove,this),F(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,i=new V(t.clientX,t.clientY)._subtract(this._startPoint);!i.x&&!i.y||Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,le(e),this._moved||(this.fire("dragstart"),this._moved=!0,N(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),N(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),re(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){ie(document.body,"leaflet-dragging"),this._lastTarget&&(ie(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),J(document,"mousemove touchmove",this._onMove,this),J(document,"mouseup touchend touchcancel",this._onUp,this),an(),It();var t=this._moved&&this._moving;this._moving=!1,je._dragging=!1,t&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function So(e,t,i){var r,a=[1,4,2,8],c,f,_,v,b,M,T,R;for(c=0,M=e.length;c<M;c++)e[c]._code=nt(e[c],t);for(_=0;_<4;_++){for(T=a[_],r=[],c=0,M=e.length,f=M-1;c<M;f=c++)v=e[c],b=e[f],v._code&T?b._code&T||(R=si(b,v,T,t,i),R._code=nt(R,t),r.push(R)):(b._code&T&&(R=si(b,v,T,t,i),R._code=nt(R,t),r.push(R)),r.push(v));e=r}return e}function Mo(e,t){var i,r,a,c,f,_,v,b,M;if(!e||e.length===0)throw new Error("latlngs not passed");Ce(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var T=H([0,0]),R=oe(e),ue=R.getNorthWest().distanceTo(R.getSouthWest())*R.getNorthEast().distanceTo(R.getNorthWest());ue<1700&&(T=vn(e));var ae=e.length,we=[];for(i=0;i<ae;i++){var fe=H(e[i]);we.push(t.project(H([fe.lat-T.lat,fe.lng-T.lng])))}for(_=v=b=0,i=0,r=ae-1;i<ae;r=i++)a=we[i],c=we[r],f=a.y*c.x-c.y*a.x,v+=(a.x+c.x)*f,b+=(a.y+c.y)*f,_+=f*3;_===0?M=we[0]:M=[v/_,b/_];var yt=t.unproject(k(M));return H([yt.lat+T.lat,yt.lng+T.lng])}function vn(e){for(var t=0,i=0,r=0,a=0;a<e.length;a++){var c=H(e[a]);t+=c.lat,i+=c.lng,r++}return H([t/r,i/r])}var Hs={__proto__:null,clipPolygon:So,polygonCenter:Mo,centroid:vn};function Po(e,t){if(!t||!e.length)return e.slice();var i=t*t;return e=Gs(e,i),e=Ws(e,i),e}function Lo(e,t,i){return Math.sqrt(Nt(e,t,i,!0))}function js(e,t,i){return Nt(e,t,i)}function Ws(e,t){var i=e.length,r=typeof Uint8Array<"u"?Uint8Array:Array,a=new r(i);a[0]=a[i-1]=1,yn(e,a,t,0,i-1);var c,f=[];for(c=0;c<i;c++)a[c]&&f.push(e[c]);return f}function yn(e,t,i,r,a){var c=0,f,_,v;for(_=r+1;_<=a-1;_++)v=Nt(e[_],e[r],e[a],!0),v>c&&(f=_,c=v);c>i&&(t[f]=1,yn(e,t,i,r,f),yn(e,t,i,f,a))}function Gs(e,t){for(var i=[e[0]],r=1,a=0,c=e.length;r<c;r++)Us(e[r],e[a])>t&&(i.push(e[r]),a=r);return a<c-1&&i.push(e[c-1]),i}var Oo;function Do(e,t,i,r,a){var c=r?Oo:nt(e,i),f=nt(t,i),_,v,b;for(Oo=f;;){if(!(c|f))return[e,t];if(c&f)return!1;_=c||f,v=si(e,t,_,i,a),b=nt(v,i),_===c?(e=v,c=b):(t=v,f=b)}}function si(e,t,i,r,a){var c=t.x-e.x,f=t.y-e.y,_=r.min,v=r.max,b,M;return i&8?(b=e.x+c*(v.y-e.y)/f,M=v.y):i&4?(b=e.x+c*(_.y-e.y)/f,M=_.y):i&2?(b=v.x,M=e.y+f*(v.x-e.x)/c):i&1&&(b=_.x,M=e.y+f*(_.x-e.x)/c),new V(b,M,a)}function nt(e,t){var i=0;return e.x<t.min.x?i|=1:e.x>t.max.x&&(i|=2),e.y<t.min.y?i|=4:e.y>t.max.y&&(i|=8),i}function Us(e,t){var i=t.x-e.x,r=t.y-e.y;return i*i+r*r}function Nt(e,t,i,r){var a=t.x,c=t.y,f=i.x-a,_=i.y-c,v=f*f+_*_,b;return v>0&&(b=((e.x-a)*f+(e.y-c)*_)/v,b>1?(a=i.x,c=i.y):b>0&&(a+=f*b,c+=_*b)),f=e.x-a,_=e.y-c,r?f*f+_*_:new V(a,c)}function Ce(e){return!ne(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function Eo(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ce(e)}function To(e,t){var i,r,a,c,f,_,v,b;if(!e||e.length===0)throw new Error("latlngs not passed");Ce(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var M=H([0,0]),T=oe(e),R=T.getNorthWest().distanceTo(T.getSouthWest())*T.getNorthEast().distanceTo(T.getNorthWest());R<1700&&(M=vn(e));var ue=e.length,ae=[];for(i=0;i<ue;i++){var we=H(e[i]);ae.push(t.project(H([we.lat-M.lat,we.lng-M.lng])))}for(i=0,r=0;i<ue-1;i++)r+=ae[i].distanceTo(ae[i+1])/2;if(r===0)b=ae[0];else for(i=0,c=0;i<ue-1;i++)if(f=ae[i],_=ae[i+1],a=f.distanceTo(_),c+=a,c>r){v=(c-r)/a,b=[_.x-v*(_.x-f.x),_.y-v*(_.y-f.y)];break}var fe=t.unproject(k(b));return H([fe.lat+M.lat,fe.lng+M.lng])}var $s={__proto__:null,simplify:Po,pointToSegmentDistance:Lo,closestPointOnSegment:js,clipSegment:Do,_getEdgeIntersection:si,_getBitCode:nt,_sqClosestPointOnSegment:Nt,isFlat:Ce,_flat:Eo,polylineCenter:To},bn={project:function(e){return new V(e.lng,e.lat)},unproject:function(e){return new K(e.y,e.x)},bounds:new ee([-180,-90],[180,90])},Cn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ee([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var t=Math.PI/180,i=this.R,r=e.lat*t,a=this.R_MINOR/i,c=Math.sqrt(1-a*a),f=c*Math.sin(r),_=Math.tan(Math.PI/4-r/2)/Math.pow((1-f)/(1+f),c/2);return r=-i*Math.log(Math.max(_,1e-10)),new V(e.lng*t*i,r)},unproject:function(e){for(var t=180/Math.PI,i=this.R,r=this.R_MINOR/i,a=Math.sqrt(1-r*r),c=Math.exp(-e.y/i),f=Math.PI/2-2*Math.atan(c),_=0,v=.1,b;_<15&&Math.abs(v)>1e-7;_++)b=a*Math.sin(f),b=Math.pow((1-b)/(1+b),a/2),v=Math.PI/2-2*Math.atan(c*b)-f,f+=v;return new K(f*t,e.x*t/i)}},qs={__proto__:null,LonLat:bn,Mercator:Cn,SphericalMercator:Ui},Ks=o({},He,{code:"EPSG:3395",projection:Cn,transformation:function(){var e=.5/(Math.PI*Cn.R);return Ot(e,.5,-e,.5)}()}),Ao=o({},He,{code:"EPSG:4326",projection:bn,transformation:Ot(1/180,1,-1/180,.5)}),Ys=o({},Ie,{projection:bn,transformation:Ot(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var i=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(i*i+r*r)},infinite:!0});Ie.Earth=He,Ie.EPSG3395=Ks,Ie.EPSG3857=qi,Ie.EPSG900913=is,Ie.EPSG4326=Ao,Ie.Simple=Ys;var Me=Lt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[g(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[g(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var i=this.getEvents();t.on(i,this),this.once("remove",function(){t.off(i,this)},this)}this.onAdd(t),this.fire("add"),t.fire("layeradd",{layer:this})}}});j.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var t=g(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=g(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return g(e)in this._layers},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},_addLayers:function(e){e=e?ne(e)?e:[e]:[];for(var t=0,i=e.length;t<i;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[g(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=g(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,i=this._getZoomSpan();for(var r in this._zoomBoundLayers){var a=this._zoomBoundLayers[r].options;e=a.minZoom===void 0?e:Math.min(e,a.minZoom),t=a.maxZoom===void 0?t:Math.max(t,a.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var mt=Me.extend({initialize:function(e,t){G(this,t),this._layers={};var i,r;if(e)for(i=0,r=e.length;i<r;i++)this.addLayer(e[i])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){var t=typeof e=="number"?e:this.getLayerId(e);return t in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),i,r;for(i in this._layers)r=this._layers[i],r[e]&&r[e].apply(r,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var i in this._layers)e.call(t,this._layers[i]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return g(e)}}),Js=function(e,t){return new mt(e,t)},ke=mt.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),mt.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),mt.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new me;for(var t in this._layers){var i=this._layers[t];e.extend(i.getBounds?i.getBounds():i.getLatLng())}return e}}),Qs=function(e,t){return new ke(e,t)},ft=Ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){G(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,t){var i=this._getIconUrl(e);if(!i){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(i,t&&t.tagName==="IMG"?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),r},_setIconStyles:function(e,t){var i=this.options,r=i[t+"Size"];typeof r=="number"&&(r=[r,r]);var a=k(r),c=k(t==="shadow"&&i.shadowAnchor||i.iconAnchor||a&&a.divideBy(2,!0));e.className="leaflet-marker-"+t+" "+(i.className||""),c&&(e.style.marginLeft=-c.x+"px",e.style.marginTop=-c.y+"px"),a&&(e.style.width=a.x+"px",e.style.height=a.y+"px")},_createImg:function(e,t){return t=t||document.createElement("img"),t.src=e,t},_getIconUrl:function(e){return D.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function Xs(e){return new ft(e)}var zt=ft.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof zt.imagePath!="string"&&(zt.imagePath=this._detectIconPath()),(this.options.imagePath||zt.imagePath)+ft.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(i,r,a){var c=r.exec(i);return c&&c[a]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=U("div","leaflet-default-icon-path",document.body),t=Tt(e,"background-image")||Tt(e,"backgroundImage");if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var i=document.querySelector('link[href$="leaflet.css"]');return i?i.href.substring(0,i.href.length-11-1):""}}),Io=Oe.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new je(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),N(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ie(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,i=t._map,r=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,c=et(t._icon),f=i.getPixelBounds(),_=i.getPixelOrigin(),v=pe(f.min._subtract(_).add(a),f.max._subtract(_).subtract(a));if(!v.contains(c)){var b=k((Math.max(v.max.x,c.x)-v.max.x)/(f.max.x-v.max.x)-(Math.min(v.min.x,c.x)-v.min.x)/(f.min.x-v.min.x),(Math.max(v.max.y,c.y)-v.max.y)/(f.max.y-v.max.y)-(Math.min(v.min.y,c.y)-v.min.y)/(f.min.y-v.min.y)).multiplyBy(r);i.panBy(b,{animate:!1}),this._draggable._newPos._add(b),this._draggable._startPos._add(b),re(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=he(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(ye(this._panRequest),this._panRequest=he(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,i=t._shadow,r=et(t._icon),a=t._map.layerPointToLatLng(r);i&&re(i,r),t._latlng=a,e.latlng=a,e.oldLatLng=this._oldLatLng,t.fire("move",e).fire("drag",e)},_onDragEnd:function(e){ye(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),ai=Me.extend({options:{icon:new zt,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){G(this,t),this._latlng=H(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=H(e),this.update(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=e.icon.createIcon(this._icon),r=!1;i!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(i.title=e.title),i.tagName==="IMG"&&(i.alt=e.alt||"")),N(i,t),e.keyboard&&(i.tabIndex="0",i.setAttribute("role","button")),this._icon=i,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&F(i,"focus",this._panOnFocus,this);var a=e.icon.createShadow(this._shadow),c=!1;a!==this._shadow&&(this._removeShadow(),c=!0),a&&(N(a,t),a.alt=""),this._shadow=a,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&c&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&J(this._icon,"focus",this._panOnFocus,this),te(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&te(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&re(this._icon,e),this._shadow&&re(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(N(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Io)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Io(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&be(this._icon,e),this._shadow&&be(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,i=t.iconSize?k(t.iconSize):k(0,0),r=t.iconAnchor?k(t.iconAnchor):k(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:i.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ea(e,t){return new ai(e,t)}var We=Me.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return G(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),li=We.extend({options:{fill:!0,radius:10},initialize:function(e,t){G(this,t),this._latlng=H(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=H(e),this.redraw(),this.fire("move",{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return We.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,i=this._clickTolerance(),r=[e+i,t+i];this._pxBounds=new ee(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ta(e,t){return new li(e,t)}var wn=li.extend({initialize:function(e,t,i){if(typeof t=="number"&&(t=o({},i,{radius:t})),G(this,t),this._latlng=H(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new me(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:We.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,i=this._map,r=i.options.crs;if(r.distance===He.distance){var a=Math.PI/180,c=this._mRadius/He.R/a,f=i.project([t+c,e]),_=i.project([t-c,e]),v=f.add(_).divideBy(2),b=i.unproject(v).lat,M=Math.acos((Math.cos(c*a)-Math.sin(t*a)*Math.sin(b*a))/(Math.cos(t*a)*Math.cos(b*a)))/a;(isNaN(M)||M===0)&&(M=c/Math.cos(Math.PI/180*t)),this._point=v.subtract(i.getPixelOrigin()),this._radius=isNaN(M)?0:v.x-i.project([b,e-M]).x,this._radiusY=v.y-f.y}else{var T=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(T).x}this._updateBounds()}});function ia(e,t,i){return new wn(e,t,i)}var Ve=We.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){G(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,i=null,r=Nt,a,c,f=0,_=this._parts.length;f<_;f++)for(var v=this._parts[f],b=1,M=v.length;b<M;b++){a=v[b-1],c=v[b];var T=r(e,a,c,!0);T<t&&(t=T,i=r(e,a,c))}return i&&(i.distance=Math.sqrt(t)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return To(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t=t||this._defaultShape(),e=H(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new me,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Ce(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],i=Ce(e),r=0,a=e.length;r<a;r++)i?(t[r]=H(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new ee;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new V(e,e);this._rawPxBounds&&(this._pxBounds=new ee([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,i){var r=e[0]instanceof K,a=e.length,c,f;if(r){for(f=[],c=0;c<a;c++)f[c]=this._map.latLngToLayerPoint(e[c]),i.extend(f[c]);t.push(f)}else for(c=0;c<a;c++)this._projectLatlngs(e[c],t,i)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,i,r,a,c,f,_,v;for(i=0,a=0,c=this._rings.length;i<c;i++)for(v=this._rings[i],r=0,f=v.length;r<f-1;r++)_=Do(v[r],v[r+1],e,r,!0),_&&(t[a]=t[a]||[],t[a].push(_[0]),(_[1]!==v[r+1]||r===f-2)&&(t[a].push(_[1]),a++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,i=0,r=e.length;i<r;i++)e[i]=Po(e[i],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var i,r,a,c,f,_,v=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(i=0,c=this._parts.length;i<c;i++)for(_=this._parts[i],r=0,f=_.length,a=f-1;r<f;a=r++)if(!(!t&&r===0)&&Lo(e,_[a],_[r])<=v)return!0;return!1}});function na(e,t){return new Ve(e,t)}Ve._flat=Eo;var gt=Ve.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mo(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=Ve.prototype._convertLatLngs.call(this,e),i=t.length;return i>=2&&t[0]instanceof K&&t[0].equals(t[i-1])&&t.pop(),t},_setLatLngs:function(e){Ve.prototype._setLatLngs.call(this,e),Ce(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ce(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,i=new V(t,t);if(e=new ee(e.min.subtract(i),e.max.add(i)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,a=this._rings.length,c;r<a;r++)c=So(this._rings[r],e,!0),c.length&&this._parts.push(c)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,i,r,a,c,f,_,v,b;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(c=0,v=this._parts.length;c<v;c++)for(i=this._parts[c],f=0,b=i.length,_=b-1;f<b;_=f++)r=i[f],a=i[_],r.y>e.y!=a.y>e.y&&e.x<(a.x-r.x)*(e.y-r.y)/(a.y-r.y)+r.x&&(t=!t);return t||Ve.prototype._containsPoint.call(this,e,!0)}});function oa(e,t){return new gt(e,t)}var Fe=ke.extend({initialize:function(e,t){G(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=ne(e)?e:e.features,i,r,a;if(t){for(i=0,r=t.length;i<r;i++)a=t[i],(a.geometries||a.geometry||a.features||a.coordinates)&&this.addData(a);return this}var c=this.options;if(c.filter&&!c.filter(e))return this;var f=di(e,c);return f?(f.feature=hi(e),f.defaultOptions=f.options,this.resetStyle(f),c.onEachFeature&&c.onEachFeature(e,f),this.addLayer(f)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=o({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t=="function"&&(t=t(e.feature)),e.setStyle(t))}});function di(e,t){var i=e.type==="Feature"?e.geometry:e,r=i?i.coordinates:null,a=[],c=t&&t.pointToLayer,f=t&&t.coordsToLatLng||xn,_,v,b,M;if(!r&&!i)return null;switch(i.type){case"Point":return _=f(r),ko(c,e,_,t);case"MultiPoint":for(b=0,M=r.length;b<M;b++)_=f(r[b]),a.push(ko(c,e,_,t));return new ke(a);case"LineString":case"MultiLineString":return v=ci(r,i.type==="LineString"?0:1,f),new Ve(v,t);case"Polygon":case"MultiPolygon":return v=ci(r,i.type==="Polygon"?1:2,f),new gt(v,t);case"GeometryCollection":for(b=0,M=i.geometries.length;b<M;b++){var T=di({geometry:i.geometries[b],type:"Feature",properties:e.properties},t);T&&a.push(T)}return new ke(a);case"FeatureCollection":for(b=0,M=i.features.length;b<M;b++){var R=di(i.features[b],t);R&&a.push(R)}return new ke(a);default:throw new Error("Invalid GeoJSON object.")}}function ko(e,t,i,r){return e?e(t,i):new ai(i,r&&r.markersInheritOptions&&r)}function xn(e){return new K(e[1],e[0],e[2])}function ci(e,t,i){for(var r=[],a=0,c=e.length,f;a<c;a++)f=t?ci(e[a],t-1,i):(i||xn)(e[a]),r.push(f);return r}function Sn(e,t){return e=H(e),e.alt!==void 0?[I(e.lng,t),I(e.lat,t),I(e.alt,t)]:[I(e.lng,t),I(e.lat,t)]}function ui(e,t,i,r){for(var a=[],c=0,f=e.length;c<f;c++)a.push(t?ui(e[c],Ce(e[c])?0:t-1,i,r):Sn(e[c],r));return!t&&i&&a.length>0&&a.push(a[0].slice()),a}function _t(e,t){return e.feature?o({},e.feature,{geometry:t}):hi(t)}function hi(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var Mn={toGeoJSON:function(e){return _t(this,{type:"Point",coordinates:Sn(this.getLatLng(),e)})}};ai.include(Mn),wn.include(Mn),li.include(Mn),Ve.include({toGeoJSON:function(e){var t=!Ce(this._latlngs),i=ui(this._latlngs,t?1:0,!1,e);return _t(this,{type:(t?"Multi":"")+"LineString",coordinates:i})}}),gt.include({toGeoJSON:function(e){var t=!Ce(this._latlngs),i=t&&!Ce(this._latlngs[0]),r=ui(this._latlngs,i?2:t?1:0,!0,e);return t||(r=[r]),_t(this,{type:(i?"Multi":"")+"Polygon",coordinates:r})}}),mt.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(i){t.push(i.toGeoJSON(e).geometry.coordinates)}),_t(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t==="MultiPoint")return this.toMultiPoint(e);var i=t==="GeometryCollection",r=[];return this.eachLayer(function(a){if(a.toGeoJSON){var c=a.toGeoJSON(e);if(i)r.push(c.geometry);else{var f=hi(c);f.type==="FeatureCollection"?r.push.apply(r,f.features):r.push(f)}}}),i?_t(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});function Vo(e,t){return new Fe(e,t)}var ra=Vo,pi=Me.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,t,i){this._url=e,this._bounds=oe(t),G(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(N(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){te(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&ht(this._image),this},bringToBack:function(){return this._map&&pt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=oe(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",t=this._image=e?this._url:U("img");if(N(t,"leaflet-image-layer"),this._zoomAnimated&&N(t,"leaflet-zoom-animated"),this.options.className&&N(t,this.options.className),t.onselectstart=S,t.onmousemove=S,t.onload=d(this.fire,this,"load"),t.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(t.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Xe(this._image,i,t)},_reset:function(){var e=this._image,t=new ee(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=t.getSize();re(e,t.min),e.style.width=i.x+"px",e.style.height=i.y+"px"},_updateOpacity:function(){be(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),sa=function(e,t,i){return new pi(e,t,i)},Fo=pi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",t=this._image=e?this._url:U("video");if(N(t,"leaflet-image-layer"),this._zoomAnimated&&N(t,"leaflet-zoom-animated"),this.options.className&&N(t,this.options.className),t.onselectstart=S,t.onmousemove=S,t.onloadeddata=d(this.fire,this,"load"),e){for(var i=t.getElementsByTagName("source"),r=[],a=0;a<i.length;a++)r.push(i[a].src);this._url=i.length>0?r:[t.src];return}ne(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,"objectFit")&&(t.style.objectFit="fill"),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var c=0;c<this._url.length;c++){var f=U("source");f.src=this._url[c],t.appendChild(f)}}});function aa(e,t,i){return new Fo(e,t,i)}var No=pi.extend({_initImage:function(){var e=this._image=this._url;N(e,"leaflet-image-layer"),this._zoomAnimated&&N(e,"leaflet-zoom-animated"),this.options.className&&N(e,this.options.className),e.onselectstart=S,e.onmousemove=S}});function la(e,t,i){return new No(e,t,i)}var De=Me.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,t){e&&(e instanceof K||ne(e))?(this._latlng=H(e),G(this,t)):(G(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&be(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&be(this._container,1),this.bringToFront(),this.options.interactive&&(N(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(be(this._container,0),this._removeTimeout=setTimeout(d(te,void 0,this._container),200)):te(this._container),this.options.interactive&&(ie(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=H(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ht(this._container),this},bringToBack:function(){return this._map&&pt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof ke){t=null;var i=this._source._layers;for(var r in i)if(i[r]._map){t=i[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof t=="string")e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=k(this.options.offset),i=this._getAnchor();this._zoomAnimated?re(this._container,e.add(i)):t=t.add(e).add(i);var r=this._containerBottom=-t.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}});j.include({_initOverlay:function(e,t,i,r){var a=t;return a instanceof e||(a=new e(r).setContent(t)),i&&a.setLatLng(i),a}}),Me.include({_initOverlay:function(e,t,i,r){var a=i;return a instanceof e?(G(a,r),a._source=this):(a=t&&!r?t:new e(r,this),a.setContent(i)),a}});var mi=De.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,De.prototype.openOn.call(this,e)},onAdd:function(e){De.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof We||this._source.on("preclick",tt))},onRemove:function(e){De.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof We||this._source.off("preclick",tt))},getEvents:function(){var e=De.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",t=this._container=U("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=U("div",e+"-content-wrapper",t);if(this._contentNode=U("div",e+"-content",i),Vt(t),mn(this._contentNode),F(t,"contextmenu",tt),this._tipContainer=U("div",e+"-tip-container",t),this._tip=U("div",e+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=U("a",e+"-close-button",t);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',F(r,"click",function(a){le(a),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width="",t.whiteSpace="nowrap";var i=e.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),t.width=i+1+"px",t.whiteSpace="",t.height="";var r=e.offsetHeight,a=this.options.maxHeight,c="leaflet-popup-scrolled";a&&r>a?(t.height=a+"px",N(e,c)):ie(e,c),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),i=this._getAnchor();re(this._container,t.add(i))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(Tt(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+t,r=this._containerWidth,a=new V(this._containerLeft,-i-this._containerBottom);a._add(et(this._container));var c=e.layerPointToContainerPoint(a),f=k(this.options.autoPanPadding),_=k(this.options.autoPanPaddingTopLeft||f),v=k(this.options.autoPanPaddingBottomRight||f),b=e.getSize(),M=0,T=0;c.x+r+v.x>b.x&&(M=c.x+r-b.x+v.x),c.x-M-_.x<0&&(M=c.x-_.x),c.y+i+v.y>b.y&&(T=c.y+i-b.y+v.y),c.y-T-_.y<0&&(T=c.y-_.y),(M||T)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([M,T]))}},_getAnchor:function(){return k(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),da=function(e,t){return new mi(e,t)};j.mergeOptions({closePopupOnClick:!0}),j.include({openPopup:function(e,t,i){return this._initOverlay(mi,e,t,i).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),Me.include({bindPopup:function(e,t){return this._popup=this._initOverlay(mi,this._popup,e,t),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof ke||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){it(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof We)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var fi=De.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){De.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){De.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=De.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",t=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=U("div",t),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+g(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,i,r=this._map,a=this._container,c=r.latLngToContainerPoint(r.getCenter()),f=r.layerPointToContainerPoint(e),_=this.options.direction,v=a.offsetWidth,b=a.offsetHeight,M=k(this.options.offset),T=this._getAnchor();_==="top"?(t=v/2,i=b):_==="bottom"?(t=v/2,i=0):_==="center"?(t=v/2,i=b/2):_==="right"?(t=0,i=b/2):_==="left"?(t=v,i=b/2):f.x<c.x?(_="right",t=0,i=b/2):(_="left",t=v+(M.x+T.x)*2,i=b/2),e=e.subtract(k(t,i,!0)).add(M).add(T),ie(a,"leaflet-tooltip-right"),ie(a,"leaflet-tooltip-left"),ie(a,"leaflet-tooltip-top"),ie(a,"leaflet-tooltip-bottom"),N(a,"leaflet-tooltip-"+_),re(a,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&be(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return k(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ca=function(e,t){return new fi(e,t)};j.include({openTooltip:function(e,t,i){return this._initOverlay(fi,e,t,i).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Me.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(fi,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,i.click=this._openTooltip,this._map?this._addFocusListeners():i.add=this._addFocusListeners),this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),this[t](i),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof ke||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&(F(t,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),F(t,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement=="function"&&e.getElement();t&&t.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once("moveend",function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,i,r;this._tooltip.options.sticky&&e.originalEvent&&(i=this._map.mouseEventToContainerPoint(e.originalEvent),r=this._map.containerPointToLayerPoint(i),t=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(t)}});var zo=ft.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var t=e&&e.tagName==="DIV"?e:document.createElement("div"),i=this.options;if(i.html instanceof Element?(ti(t),t.appendChild(i.html)):t.innerHTML=i.html!==!1?i.html:"",i.bgPos){var r=k(i.bgPos);t.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(t,"icon"),t},createShadow:function(){return null}});function ua(e){return new zo(e)}ft.Default=zt;var Bt=Me.extend({options:{tileSize:256,opacity:1,updateWhenIdle:D.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){G(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),te(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ht(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=x(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof V?e:new V(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,i=-e(-1/0,1/0),r=0,a=t.length,c;r<a;r++)c=t[r].style.zIndex,t[r]!==this._container&&c&&(i=e(i,+c));isFinite(i)&&(this.options.zIndex=i+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!D.ielt9){be(this._container,this.options.opacity);var e=+new Date,t=!1,i=!1;for(var r in this._tiles){var a=this._tiles[r];if(!(!a.current||!a.loaded)){var c=Math.min(1,(e-a.loaded)/200);be(a.el,c),c<1?t=!0:(a.active?i=!0:this._onOpaqueTile(a),a.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),t&&(ye(this._fadeFrame),this._fadeFrame=he(this._updateOpacity,this))}},_onOpaqueTile:S,_initContainer:function(){this._container||(this._container=U("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var i in this._levels)i=Number(i),this._levels[i].el.children.length||i===e?(this._levels[i].el.style.zIndex=t-Math.abs(e-i),this._onUpdateLevel(i)):(te(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var r=this._levels[e],a=this._map;return r||(r=this._levels[e]={},r.el=U("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=t,r.origin=a.project(a.unproject(a.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,a.getCenter(),a.getZoom()),S(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:S,_onRemoveLevel:S,_onCreateLevel:S,_pruneTiles:function(){if(this._map){var e,t,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)te(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,i,r){var a=Math.floor(e/2),c=Math.floor(t/2),f=i-1,_=new V(+a,+c);_.z=+f;var v=this._tileCoordsToKey(_),b=this._tiles[v];return b&&b.active?(b.retain=!0,!0):(b&&b.loaded&&(b.retain=!0),f>r?this._retainParent(a,c,f,r):!1)},_retainChildren:function(e,t,i,r){for(var a=2*e;a<2*e+2;a++)for(var c=2*t;c<2*t+2;c++){var f=new V(a,c);f.z=i+1;var _=this._tileCoordsToKey(f),v=this._tiles[_];if(v&&v.active){v.retain=!0;continue}else v&&v.loaded&&(v.retain=!0);i+1<r&&this._retainChildren(a,c,i+1,r)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,i,r){var a=Math.round(t);this.options.maxZoom!==void 0&&a>this.options.maxZoom||this.options.minZoom!==void 0&&a<this.options.minZoom?a=void 0:a=this._clampZoom(a);var c=this.options.updateWhenZooming&&a!==this._tileZoom;(!r||c)&&(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),a!==void 0&&this._update(e),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var i in this._levels)this._setZoomTransform(this._levels[i],e,t)},_setZoomTransform:function(e,t,i){var r=this._map.getZoomScale(i,e.zoom),a=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,i)).round();D.any3d?Xe(e.el,a,r):re(e.el,a)},_resetGrid:function(){var e=this._map,t=e.options.crs,i=this._tileSize=this.getTileSize(),r=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/i.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/i.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/i.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/i.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,i=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(i,this._tileZoom),a=t.project(e,this._tileZoom).floor(),c=t.getSize().divideBy(r*2);return new ee(a.subtract(c),a.add(c))},_update:function(e){var t=this._map;if(t){var i=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(e),a=this._pxBoundsToTileRange(r),c=a.getCenter(),f=[],_=this.options.keepBuffer,v=new ee(a.getBottomLeft().subtract([_,-_]),a.getTopRight().add([_,-_]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var b in this._tiles){var M=this._tiles[b].coords;(M.z!==this._tileZoom||!v.contains(new V(M.x,M.y)))&&(this._tiles[b].current=!1)}if(Math.abs(i-this._tileZoom)>1){this._setView(e,i);return}for(var T=a.min.y;T<=a.max.y;T++)for(var R=a.min.x;R<=a.max.x;R++){var ue=new V(R,T);if(ue.z=this._tileZoom,!!this._isValidTile(ue)){var ae=this._tiles[this._tileCoordsToKey(ue)];ae?ae.current=!0:f.push(ue)}}if(f.sort(function(fe,yt){return fe.distanceTo(c)-yt.distanceTo(c)}),f.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var we=document.createDocumentFragment();for(R=0;R<f.length;R++)this._addTile(f[R],we);this._level.el.appendChild(we)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var i=this._globalTileRange;if(!t.wrapLng&&(e.x<i.min.x||e.x>i.max.x)||!t.wrapLat&&(e.y<i.min.y||e.y>i.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return oe(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,i=this.getTileSize(),r=e.scaleBy(i),a=r.add(i),c=t.unproject(r,e.z),f=t.unproject(a,e.z);return[c,f]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),i=new me(t[0],t[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var t=e.split(":"),i=new V(+t[0],+t[1]);return i.z=+t[2],i},_removeTile:function(e){var t=this._tiles[e];t&&(te(t.el),delete this._tiles[e],this.fire("tileunload",{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){N(e,"leaflet-tile");var t=this.getTileSize();e.style.width=t.x+"px",e.style.height=t.y+"px",e.onselectstart=S,e.onmousemove=S,D.ielt9&&this.options.opacity<1&&be(e,this.options.opacity)},_addTile:function(e,t){var i=this._getTilePos(e),r=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),d(this._tileReady,this,e));this._initTile(a),this.createTile.length<2&&he(d(this._tileReady,this,e,null,a)),re(a,i),this._tiles[r]={el:a,coords:e,current:!0},t.appendChild(a),this.fire("tileloadstart",{tile:a,coords:e})},_tileReady:function(e,t,i){t&&this.fire("tileerror",{error:t,tile:i,coords:e});var r=this._tileCoordsToKey(e);i=this._tiles[r],i&&(i.loaded=+new Date,this._map._fadeAnimated?(be(i.el,0),ye(this._fadeFrame),this._fadeFrame=he(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),t||(N(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),D.ielt9||!this._map._fadeAnimated?he(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new V(this._wrapX?P(e.x,this._wrapX):e.x,this._wrapY?P(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new ee(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function ha(e){return new Bt(e)}var vt=Bt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=G(this,t),t.detectRetina&&D.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains=="string"&&(t.subdomains=t.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var i=document.createElement("img");return F(i,"load",d(this._tileOnLoad,this,t,i)),F(i,"error",d(this._tileOnError,this,t,i)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(i.referrerPolicy=this.options.referrerPolicy),i.alt="",i.src=this.getTileUrl(e),i},getTileUrl:function(e){var t={r:D.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=i),t["-y"]=i}return Te(this._url,o(t,this.options))},_tileOnLoad:function(e,t){D.ielt9?setTimeout(d(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,i){var r=this.options.errorTileUrl;r&&t.getAttribute("src")!==r&&(t.src=r),e(i,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,i=this.options.zoomReverse,r=this.options.zoomOffset;return i&&(e=t-e),e+r},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=S,t.onerror=S,!t.complete)){t.src=Qe;var i=this._tiles[e].coords;te(t),delete this._tiles[e],this.fire("tileabort",{tile:t,coords:i})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute("src",Qe),Bt.prototype._removeTile.call(this,e)},_tileReady:function(e,t,i){if(!(!this._map||i&&i.getAttribute("src")===Qe))return Bt.prototype._tileReady.call(this,e,t,i)}});function Bo(e,t){return new vt(e,t)}var Ro=vt.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var i=o({},this.defaultWmsParams);for(var r in t)r in this.options||(i[r]=t[r]);t=G(this,t);var a=t.detectRetina&&D.retina?2:1,c=this.getTileSize();i.width=c.x*a,i.height=c.y*a,this.wmsParams=i},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[t]=this._crs.code,vt.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),i=this._crs,r=pe(i.project(t[0]),i.project(t[1])),a=r.min,c=r.max,f=(this._wmsVersion>=1.3&&this._crs===Ao?[a.y,a.x,c.y,c.x]:[a.x,a.y,c.x,c.y]).join(","),_=vt.prototype.getTileUrl.call(this,e);return _+Je(this.wmsParams,_,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+f},setParams:function(e,t){return o(this.wmsParams,e),t||this.redraw(),this}});function pa(e,t){return new Ro(e,t)}vt.WMS=Ro,Bo.wms=pa;var Ne=Me.extend({options:{padding:.1},initialize:function(e){G(this,e),g(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),N(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var i=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),a=this._map.project(this._center,t),c=r.multiplyBy(-i).add(a).subtract(this._map._getNewPixelOrigin(e,t));D.any3d?Xe(this._container,c,i):re(this._container,c)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),i=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new ee(i,i.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zo=Ne.extend({options:{tolerance:0},getEvents:function(){var e=Ne.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ne.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");F(e,"mousemove",this._onMouseMove,this),F(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),F(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){ye(this._redrawRequest),delete this._ctx,te(this._container),J(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var t in this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ne.prototype._update.call(this);var e=this._bounds,t=this._container,i=e.getSize(),r=D.retina?2:1;re(t,e.min),t.width=r*i.x,t.height=r*i.y,t.style.width=i.x+"px",t.style.height=i.y+"px",D.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){Ne.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[g(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,i=t.next,r=t.prev;i?i.prev=r:this._drawLast=r,r?r.next=i:this._drawFirst=i,delete e._order,delete this._layers[g(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var t=e.options.dashArray.split(/[, ]+/),i=[],r,a;for(a=0;a<t.length;a++){if(r=Number(t[a]),isNaN(r))return;i.push(r)}e.options._dashArray=i}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||he(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ee,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var i=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var i,r,a,c,f=e._parts,_=f.length,v=this._ctx;if(_){for(v.beginPath(),i=0;i<_;i++){for(r=0,a=f[i].length;r<a;r++)c=f[i][r],v[r?"lineTo":"moveTo"](c.x,c.y);t&&v.closePath()}this._fillStroke(v,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,i=this._ctx,r=Math.max(Math.round(e._radius),1),a=(Math.max(Math.round(e._radiusY),1)||r)/r;a!==1&&(i.save(),i.scale(1,a)),i.beginPath(),i.arc(t.x,t.y/a,r,0,Math.PI*2,!1),a!==1&&i.restore(),this._fillStroke(i,e)}},_fillStroke:function(e,t){var i=t.options;i.fill&&(e.globalAlpha=i.fillOpacity,e.fillStyle=i.fillColor||i.color,e.fill(i.fillRule||"evenodd")),i.stroke&&i.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=i.opacity,e.lineWidth=i.weight,e.strokeStyle=i.color,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),i,r,a=this._drawFirst;a;a=a.next)i=a.layer,i.options.interactive&&i._containsPoint(t)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(i))&&(r=i);this._fireEvent(r?[r]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(ie(this._container,"leaflet-interactive"),this._fireEvent([t],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var i,r,a=this._drawFirst;a;a=a.next)i=a.layer,i.options.interactive&&i._containsPoint(t)&&(r=i);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(N(this._container,"leaflet-interactive"),this._fireEvent([r],e,"mouseover"),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,i){this._map._fireDOMEvent(t,i||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var i=t.next,r=t.prev;if(i)i.prev=r;else return;r?r.next=i:i&&(this._drawFirst=i),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var i=t.next,r=t.prev;if(r)r.next=i;else return;i?i.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function Ho(e){return D.canvas?new Zo(e):null}var Rt=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ma={_initContainer:function(){this._container=U("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ne.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var t=e._container=Rt("shape");N(t,"leaflet-vml-shape "+(this.options.className||"")),t.coordsize="1 1",e._path=Rt("path"),t.appendChild(e._path),this._updateStyle(e),this._layers[g(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;te(t),e.removeInteractiveTarget(t),delete this._layers[g(e)]},_updateStyle:function(e){var t=e._stroke,i=e._fill,r=e.options,a=e._container;a.stroked=!!r.stroke,a.filled=!!r.fill,r.stroke?(t||(t=e._stroke=Rt("stroke")),a.appendChild(t),t.weight=r.weight+"px",t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=ne(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):t.dashStyle="",t.endcap=r.lineCap.replace("butt","flat"),t.joinstyle=r.lineJoin):t&&(a.removeChild(t),e._stroke=null),r.fill?(i||(i=e._fill=Rt("fill")),a.appendChild(i),i.color=r.fillColor||r.color,i.opacity=r.fillOpacity):i&&(a.removeChild(i),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),i=Math.round(e._radius),r=Math.round(e._radiusY||i);this._setPath(e,e._empty()?"M0 0":"AL "+t.x+","+t.y+" "+i+","+r+" 0,"+65535*360)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){ht(e._container)},_bringToBack:function(e){pt(e._container)}},gi=D.vml?Rt:Gn,Zt=Ne.extend({_initContainer:function(){this._container=gi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=gi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){te(this._container),J(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ne.prototype._update.call(this);var e=this._bounds,t=e.getSize(),i=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,i.setAttribute("width",t.x),i.setAttribute("height",t.y)),re(i,e.min),i.setAttribute("viewBox",[e.min.x,e.min.y,t.x,t.y].join(" ")),this.fire("update")}},_initPath:function(e){var t=e._path=gi("path");e.options.className&&N(t,e.options.className),e.options.interactive&&N(t,"leaflet-interactive"),this._updateStyle(e),this._layers[g(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){te(e._path),e.removeInteractiveTarget(e._path),delete this._layers[g(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,i=e.options;t&&(i.stroke?(t.setAttribute("stroke",i.color),t.setAttribute("stroke-opacity",i.opacity),t.setAttribute("stroke-width",i.weight),t.setAttribute("stroke-linecap",i.lineCap),t.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?t.setAttribute("stroke-dasharray",i.dashArray):t.removeAttribute("stroke-dasharray"),i.dashOffset?t.setAttribute("stroke-dashoffset",i.dashOffset):t.removeAttribute("stroke-dashoffset")):t.setAttribute("stroke","none"),i.fill?(t.setAttribute("fill",i.fillColor||i.color),t.setAttribute("fill-opacity",i.fillOpacity),t.setAttribute("fill-rule",i.fillRule||"evenodd")):t.setAttribute("fill","none"))},_updatePoly:function(e,t){this._setPath(e,Un(e._parts,t))},_updateCircle:function(e){var t=e._point,i=Math.max(Math.round(e._radius),1),r=Math.max(Math.round(e._radiusY),1)||i,a="a"+i+","+r+" 0 1,0 ",c=e._empty()?"M0 0":"M"+(t.x-i)+","+t.y+a+i*2+",0 "+a+-i*2+",0 ";this._setPath(e,c)},_setPath:function(e,t){e._path.setAttribute("d",t)},_bringToFront:function(e){ht(e._path)},_bringToBack:function(e){pt(e._path)}});D.vml&&Zt.include(ma);function jo(e){return D.svg||D.vml?new Zt(e):null}j.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||(t=this._renderer=this._createRenderer()),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Ho(e)||jo(e)}});var Wo=gt.extend({initialize:function(e,t){gt.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=oe(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function fa(e,t){return new Wo(e,t)}Zt.create=gi,Zt.pointsToPath=Un,Fe.geometryToLayer=di,Fe.coordsToLatLng=xn,Fe.coordsToLatLngs=ci,Fe.latLngToCoords=Sn,Fe.latLngsToCoords=ui,Fe.getFeature=_t,Fe.asFeature=hi,j.mergeOptions({boxZoom:!0});var Go=Oe.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){F(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){J(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){te(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),At(),sn(),this._startPoint=this._map.mouseEventToContainerPoint(e),F(document,{contextmenu:it,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=U("div","leaflet-zoom-box",this._container),N(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var t=new ee(this._point,this._startPoint),i=t.getSize();re(this._box,t.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(te(this._box),ie(this._container,"leaflet-crosshair")),It(),an(),J(document,{contextmenu:it,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var t=new me(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire("boxzoomend",{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});j.addInitHook("addHandler","boxZoom",Go),j.mergeOptions({doubleClickZoom:!0});var Uo=Oe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,i=t.getZoom(),r=t.options.zoomDelta,a=e.originalEvent.shiftKey?i-r:i+r;t.options.doubleClickZoom==="center"?t.setZoom(a):t.setZoomAround(e.containerPoint,a)}});j.addInitHook("addHandler","doubleClickZoom",Uo),j.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $o=Oe.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new je(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}N(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ie(this._map._container,"leaflet-grab"),ie(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=oe(this._map.options.maxBounds);this._offsetLimit=pe(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(t),this._prunePositions(t)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),t=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=t.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),i=this._initialWorldOffset,r=this._draggable._newPos.x,a=(r-t+i)%e+t-i,c=(r+t+i)%e-t-i,f=Math.abs(a+i)<Math.abs(c+i)?a:c;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=f},_onDragEnd:function(e){var t=this._map,i=t.options,r=!i.inertia||e.noInertia||this._times.length<2;if(t.fire("dragend",e),r)t.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),c=(this._lastTime-this._times[0])/1e3,f=i.easeLinearity,_=a.multiplyBy(f/c),v=_.distanceTo([0,0]),b=Math.min(i.inertiaMaxSpeed,v),M=_.multiplyBy(b/v),T=b/(i.inertiaDeceleration*f),R=M.multiplyBy(-T/2).round();!R.x&&!R.y?t.fire("moveend"):(R=t._limitOffset(R,t.options.maxBounds),he(function(){t.panBy(R,{duration:T,easeLinearity:f,noMoveStart:!0,animate:!0})}))}}});j.addInitHook("addHandler","dragging",$o),j.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qo=Oe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),F(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),J(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,i=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var t=this._panKeys={},i=this.keyCodes,r,a;for(r=0,a=i.left.length;r<a;r++)t[i.left[r]]=[-1*e,0];for(r=0,a=i.right.length;r<a;r++)t[i.right[r]]=[e,0];for(r=0,a=i.down.length;r<a;r++)t[i.down[r]]=[0,e];for(r=0,a=i.up.length;r<a;r++)t[i.up[r]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},i=this.keyCodes,r,a;for(r=0,a=i.zoomIn.length;r<a;r++)t[i.zoomIn[r]]=e;for(r=0,a=i.zoomOut.length;r<a;r++)t[i.zoomOut[r]]=-e},_addHooks:function(){F(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){J(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,i=this._map,r;if(t in this._panKeys){if(!i._panAnim||!i._panAnim._inProgress)if(r=this._panKeys[t],e.shiftKey&&(r=k(r).multiplyBy(3)),i.options.maxBounds&&(r=i._limitOffset(k(r),i.options.maxBounds)),i.options.worldCopyJump){var a=i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(r)));i.panTo(a)}else i.panBy(r)}else if(t in this._zoomKeys)i.setZoom(i.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&i._popup&&i._popup.options.closeOnEscapeKey)i.closePopup();else return;it(e)}}});j.addInitHook("addHandler","keyboard",qo),j.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ko=Oe.extend({addHooks:function(){F(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){J(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var t=yo(e),i=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var r=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),r),it(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),i=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),a=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,c=i?Math.ceil(a/i)*i:a,f=e._limitZoom(t+(this._delta>0?c:-c))-t;this._delta=0,this._startTime=null,f&&(e.options.scrollWheelZoom==="center"?e.setZoom(t+f):e.setZoomAround(this._lastMousePos,t+f))}});j.addInitHook("addHandler","scrollWheelZoom",Ko);var ga=600;j.mergeOptions({tapHold:D.touchNative&&D.safari&&D.mobile,tapTolerance:15});var Yo=Oe.extend({addHooks:function(){F(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){J(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new V(t.clientX,t.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(F(document,"touchend",le),F(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",t))},this),ga),F(document,"touchend touchcancel contextmenu",this._cancel,this),F(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){J(document,"touchend",le),J(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),J(document,"touchend touchcancel contextmenu",this._cancel,this),J(document,"touchmove",this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new V(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var i=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});i._simulated=!0,t.target.dispatchEvent(i)}});j.addInitHook("addHandler","tapHold",Yo),j.mergeOptions({touchZoom:D.touch,bounceAtZoomLimits:!0});var Jo=Oe.extend({addHooks:function(){N(this._map._container,"leaflet-touch-zoom"),F(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ie(this._map._container,"leaflet-touch-zoom"),J(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var i=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!=="center"&&(this._pinchStartLatLng=t.containerPointToLatLng(i.add(r)._divideBy(2))),this._startDist=i.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),F(document,"touchmove",this._onTouchMove,this),F(document,"touchend touchcancel",this._onTouchEnd,this),le(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,i=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),a=i.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(a,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&a<1||this._zoom>t.getMaxZoom()&&a>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom==="center"){if(this._center=this._startLatLng,a===1)return}else{var c=i._add(r)._divideBy(2)._subtract(this._centerPoint);if(a===1&&c.x===0&&c.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(c),this._zoom)}this._moved||(t._moveStart(!0,!1),this._moved=!0),ye(this._animRequest);var f=d(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=he(f,this,!0),le(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,ye(this._animRequest),J(document,"touchmove",this._onTouchMove,this),J(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});j.addInitHook("addHandler","touchZoom",Jo),j.BoxZoom=Go,j.DoubleClickZoom=Uo,j.Drag=$o,j.Keyboard=qo,j.ScrollWheelZoom=Ko,j.TapHold=Yo,j.TouchZoom=Jo,l.Bounds=ee,l.Browser=D,l.CRS=Ie,l.Canvas=Zo,l.Circle=wn,l.CircleMarker=li,l.Class=Ae,l.Control=Se,l.DivIcon=zo,l.DivOverlay=De,l.DomEvent=ks,l.DomUtil=As,l.Draggable=je,l.Evented=Lt,l.FeatureGroup=ke,l.GeoJSON=Fe,l.GridLayer=Bt,l.Handler=Oe,l.Icon=ft,l.ImageOverlay=pi,l.LatLng=K,l.LatLngBounds=me,l.Layer=Me,l.LayerGroup=mt,l.LineUtil=$s,l.Map=j,l.Marker=ai,l.Mixin=Zs,l.Path=We,l.Point=V,l.PolyUtil=Hs,l.Polygon=gt,l.Polyline=Ve,l.Popup=mi,l.PosAnimation=bo,l.Projection=qs,l.Rectangle=Wo,l.Renderer=Ne,l.SVG=Zt,l.SVGOverlay=No,l.TileLayer=vt,l.Tooltip=fi,l.Transformation=$i,l.Util=es,l.VideoOverlay=Fo,l.bind=d,l.bounds=pe,l.canvas=Ho,l.circle=ia,l.circleMarker=ta,l.control=Ft,l.divIcon=ua,l.extend=o,l.featureGroup=Qs,l.geoJSON=Vo,l.geoJson=ra,l.gridLayer=ha,l.icon=Xs,l.imageOverlay=sa,l.latLng=H,l.latLngBounds=oe,l.layerGroup=Js,l.map=Vs,l.marker=ea,l.point=k,l.polygon=oa,l.polyline=na,l.popup=da,l.rectangle=fa,l.setOptions=G,l.stamp=g,l.svg=jo,l.svgOverlay=la,l.tileLayer=Bo,l.tooltip=ca,l.transformation=Ot,l.version=n,l.videoOverlay=aa;var _a=window.L;l.noConflict=function(){return window.L=_a,this},window.L=l})});var Ir=(()=>{class l{constructor(o,s){this._renderer=o,this._elementRef=s,this.onChange=d=>{},this.onTouched=()=>{}}setProperty(o,s){this._renderer.setProperty(this._elementRef.nativeElement,o,s)}registerOnTouched(o){this.onTouched=o}registerOnChange(o){this.onChange=o}setDisabledState(o){this.setProperty("disabled",o)}static{this.\u0275fac=function(s){return new(s||l)(W(Wt),W(Be))}}static{this.\u0275dir=ge({type:l})}}return l})(),Nn=(()=>{class l extends Ir{static{this.\u0275fac=(()=>{let o;return function(d){return(o||(o=xi(l)))(d||l)}})()}static{this.\u0275dir=ge({type:l,features:[ot]})}}return l})(),Fi=new Ct("");var Oa={provide:Fi,useExisting:jt(()=>Ni),multi:!0};function Da(){let l=An()?An().getUserAgent():"";return/android (\d+)/.test(l.toLowerCase())}var Ea=new Ct(""),Ni=(()=>{class l extends Ir{constructor(o,s,d){super(o,s),this._compositionMode=d,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Da())}writeValue(o){let s=o??"";this.setProperty("value",s)}_handleInput(o){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(o)}_compositionStart(){this._composing=!0}_compositionEnd(o){this._composing=!1,this._compositionMode&&this.onChange(o)}static{this.\u0275fac=function(s){return new(s||l)(W(Wt),W(Be),W(Ea,8))}}static{this.\u0275dir=ge({type:l,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(s,d){s&1&&O("input",function(g){return d._handleInput(g.target.value)})("blur",function(){return d.onTouched()})("compositionstart",function(){return d._compositionStart()})("compositionend",function(g){return d._compositionEnd(g.target.value)})},features:[Gt([Oa]),ot]})}}return l})();var Ta=new Ct(""),Aa=new Ct("");function kr(l){return l!=null}function Vr(l){return mr(l)?vi(l):l}function Fr(l){let n={};return l.forEach(o=>{n=o!=null?Z(Z({},n),o):n}),Object.keys(n).length===0?null:n}function Nr(l,n){return n.map(o=>o(l))}function Ia(l){return!l.validate}function zr(l){return l.map(n=>Ia(n)?n:o=>n.validate(o))}function ka(l){if(!l)return null;let n=l.filter(kr);return n.length==0?null:function(o){return Fr(Nr(o,n))}}function Br(l){return l!=null?ka(zr(l)):null}function Va(l){if(!l)return null;let n=l.filter(kr);return n.length==0?null:function(o){let s=Nr(o,n).map(Vr);return bt(s).pipe(Ge(Fr))}}function Rr(l){return l!=null?Va(zr(l)):null}function Mr(l,n){return l===null?[n]:Array.isArray(l)?[...l,n]:[l,n]}function Fa(l){return l._rawValidators}function Na(l){return l._rawAsyncValidators}function In(l){return l?Array.isArray(l)?l:[l]:[]}function Ii(l,n){return Array.isArray(l)?l.includes(n):l===n}function Pr(l,n){let o=In(n);return In(l).forEach(d=>{Ii(o,d)||o.push(d)}),o}function Lr(l,n){return In(n).filter(o=>!Ii(l,o))}var ki=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Br(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=Rr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n=void 0){this.control&&this.control.reset(n)}hasError(n,o){return this.control?this.control.hasError(n,o):!1}getError(n,o){return this.control?this.control.getError(n,o):null}},kn=class extends ki{get formDirective(){return null}get path(){return null}},Yt=class extends ki{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Vn=class{constructor(n){this._cd=n}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},za={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pd=X(Z({},za),{"[class.ng-submitted]":"isSubmitted"}),Zr=(()=>{class l extends Vn{constructor(o){super(o)}static{this.\u0275fac=function(s){return new(s||l)(W(Yt,2))}}static{this.\u0275dir=ge({type:l,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(s,d){s&2&&Re("ng-untouched",d.isUntouched)("ng-touched",d.isTouched)("ng-pristine",d.isPristine)("ng-dirty",d.isDirty)("ng-valid",d.isValid)("ng-invalid",d.isInvalid)("ng-pending",d.isPending)},features:[ot]})}}return l})();var Ut="VALID",Ai="INVALID",wt="PENDING",$t="DISABLED",St=class{},Vi=class extends St{constructor(n,o){super(),this.value=n,this.source=o}},qt=class extends St{constructor(n,o){super(),this.pristine=n,this.source=o}},Kt=class extends St{constructor(n,o){super(),this.touched=n,this.source=o}},xt=class extends St{constructor(n,o){super(),this.status=n,this.source=o}};function Ba(l){return(zi(l)?l.validators:l)||null}function Ra(l){return Array.isArray(l)?Br(l):l||null}function Za(l,n){return(zi(n)?n.asyncValidators:l)||null}function Ha(l){return Array.isArray(l)?Rr(l):l||null}function zi(l){return l!=null&&!Array.isArray(l)&&typeof l=="object"}var Fn=class{constructor(n,o){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ei(()=>this.statusReactive()),this.statusReactive=Pi(void 0),this._pristine=Ei(()=>this.pristineReactive()),this.pristineReactive=Pi(!0),this._touched=Ei(()=>this.touchedReactive()),this.touchedReactive=Pi(!1),this._events=new Ee,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(n),this._assignAsyncValidators(o)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get status(){return dt(this.statusReactive)}set status(n){dt(()=>this.statusReactive.set(n))}get valid(){return this.status===Ut}get invalid(){return this.status===Ai}get pending(){return this.status==wt}get disabled(){return this.status===$t}get enabled(){return this.status!==$t}get pristine(){return dt(this.pristineReactive)}set pristine(n){dt(()=>this.pristineReactive.set(n))}get dirty(){return!this.pristine}get touched(){return dt(this.touchedReactive)}set touched(n){dt(()=>this.touchedReactive.set(n))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._assignValidators(n)}setAsyncValidators(n){this._assignAsyncValidators(n)}addValidators(n){this.setValidators(Pr(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(Pr(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(Lr(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(Lr(n,this._rawAsyncValidators))}hasValidator(n){return Ii(this._rawValidators,n)}hasAsyncValidator(n){return Ii(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){let o=this.touched===!1;this.touched=!0;let s=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsTouched(X(Z({},n),{sourceControl:s})),o&&n.emitEvent!==!1&&this._events.next(new Kt(!0,s))}markAllAsTouched(n={}){this.markAsTouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:this}),this._forEachChild(o=>o.markAllAsTouched(n))}markAsUntouched(n={}){let o=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let s=n.sourceControl??this;this._forEachChild(d=>{d.markAsUntouched({onlySelf:!0,emitEvent:n.emitEvent,sourceControl:s})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,s),o&&n.emitEvent!==!1&&this._events.next(new Kt(!1,s))}markAsDirty(n={}){let o=this.pristine===!0;this.pristine=!1;let s=n.sourceControl??this;this._parent&&!n.onlySelf&&this._parent.markAsDirty(X(Z({},n),{sourceControl:s})),o&&n.emitEvent!==!1&&this._events.next(new qt(!1,s))}markAsPristine(n={}){let o=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let s=n.sourceControl??this;this._forEachChild(d=>{d.markAsPristine({onlySelf:!0,emitEvent:n.emitEvent})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n,s),o&&n.emitEvent!==!1&&this._events.next(new qt(!0,s))}markAsPending(n={}){this.status=wt;let o=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new xt(this.status,o)),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.markAsPending(X(Z({},n),{sourceControl:o}))}disable(n={}){let o=this._parentMarkedDirty(n.onlySelf);this.status=$t,this.errors=null,this._forEachChild(d=>{d.disable(X(Z({},n),{onlySelf:!0}))}),this._updateValue();let s=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Vi(this.value,s)),this._events.next(new xt(this.status,s)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(X(Z({},n),{skipPristineCheck:o}),this),this._onDisabledChange.forEach(d=>d(!0))}enable(n={}){let o=this._parentMarkedDirty(n.onlySelf);this.status=Ut,this._forEachChild(s=>{s.enable(X(Z({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(X(Z({},n),{skipPristineCheck:o}),this),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(n,o){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine({},o),this._parent._updateTouched({},o))}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let s=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ut||this.status===wt)&&this._runAsyncValidator(s,n.emitEvent)}let o=n.sourceControl??this;n.emitEvent!==!1&&(this._events.next(new Vi(this.value,o)),this._events.next(new xt(this.status,o)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(X(Z({},n),{sourceControl:o}))}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(o=>o._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$t:Ut}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n,o){if(this.asyncValidator){this.status=wt,this._hasOwnPendingAsyncValidator={emitEvent:o!==!1};let s=Vr(this.asyncValidator(this));this._asyncValidationSubscription=s.subscribe(d=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(d,{emitEvent:o,shouldHaveEmitted:n})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let n=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,n}return!1}setErrors(n,o={}){this.errors=n,this._updateControlsErrors(o.emitEvent!==!1,this,o.shouldHaveEmitted)}get(n){let o=n;return o==null||(Array.isArray(o)||(o=o.split(".")),o.length===0)?null:o.reduce((s,d)=>s&&s._find(d),this)}getError(n,o){let s=o?this.get(o):this;return s&&s.errors?s.errors[n]:null}hasError(n,o){return!!this.getError(n,o)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n,o,s){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),(n||s)&&this._events.next(new xt(this.status,o)),this._parent&&this._parent._updateControlsErrors(n,o,s)}_initObservables(){this.valueChanges=new Q,this.statusChanges=new Q}_calculateStatus(){return this._allControlsDisabled()?$t:this.errors?Ai:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wt)?wt:this._anyControlsHaveStatus(Ai)?Ai:Ut}_anyControlsHaveStatus(n){return this._anyControls(o=>o.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n,o){let s=!this._anyControlsDirty(),d=this.pristine!==s;this.pristine=s,this._parent&&!n.onlySelf&&this._parent._updatePristine(n,o),d&&this._events.next(new qt(this.pristine,o))}_updateTouched(n={},o){this.touched=this._anyControlsTouched(),this._events.next(new Kt(this.touched,o)),this._parent&&!n.onlySelf&&this._parent._updateTouched(n,o)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){zi(n)&&n.updateOn!=null&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){let o=this._parent&&this._parent.dirty;return!n&&!!o&&!this._parent._anyControlsDirty()}_find(n){return null}_assignValidators(n){this._rawValidators=Array.isArray(n)?n.slice():n,this._composedValidatorFn=Ra(this._rawValidators)}_assignAsyncValidators(n){this._rawAsyncValidators=Array.isArray(n)?n.slice():n,this._composedAsyncValidatorFn=Ha(this._rawAsyncValidators)}};var Hr=new Ct("CallSetDisabledState",{providedIn:"root",factory:()=>zn}),zn="always";function ja(l,n){return[...n.path,l]}function Wa(l,n,o=zn){Ua(l,n),n.valueAccessor.writeValue(l.value),(l.disabled||o==="always")&&n.valueAccessor.setDisabledState?.(l.disabled),$a(l,n),Ka(l,n),qa(l,n),Ga(l,n)}function Or(l,n){l.forEach(o=>{o.registerOnValidatorChange&&o.registerOnValidatorChange(n)})}function Ga(l,n){if(n.valueAccessor.setDisabledState){let o=s=>{n.valueAccessor.setDisabledState(s)};l.registerOnDisabledChange(o),n._registerOnDestroy(()=>{l._unregisterOnDisabledChange(o)})}}function Ua(l,n){let o=Fa(l);n.validator!==null?l.setValidators(Mr(o,n.validator)):typeof o=="function"&&l.setValidators([o]);let s=Na(l);n.asyncValidator!==null?l.setAsyncValidators(Mr(s,n.asyncValidator)):typeof s=="function"&&l.setAsyncValidators([s]);let d=()=>l.updateValueAndValidity();Or(n._rawValidators,d),Or(n._rawAsyncValidators,d)}function $a(l,n){n.valueAccessor.registerOnChange(o=>{l._pendingValue=o,l._pendingChange=!0,l._pendingDirty=!0,l.updateOn==="change"&&jr(l,n)})}function qa(l,n){n.valueAccessor.registerOnTouched(()=>{l._pendingTouched=!0,l.updateOn==="blur"&&l._pendingChange&&jr(l,n),l.updateOn!=="submit"&&l.markAsTouched()})}function jr(l,n){l._pendingDirty&&l.markAsDirty(),l.setValue(l._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(l._pendingValue),l._pendingChange=!1}function Ka(l,n){let o=(s,d)=>{n.valueAccessor.writeValue(s),d&&n.viewToModelUpdate(s)};l.registerOnChange(o),n._registerOnDestroy(()=>{l._unregisterOnChange(o)})}function Ya(l,n){if(!l.hasOwnProperty("model"))return!1;let o=l.model;return o.isFirstChange()?!0:!Object.is(n,o.currentValue)}function Ja(l){return Object.getPrototypeOf(l.constructor)===Nn}function Qa(l,n){if(!n)return null;Array.isArray(n);let o,s,d;return n.forEach(m=>{m.constructor===Ni?o=m:Ja(m)?s=m:d=m}),d||s||o||null}function Dr(l,n){let o=l.indexOf(n);o>-1&&l.splice(o,1)}function Er(l){return typeof l=="object"&&l!==null&&Object.keys(l).length===2&&"value"in l&&"disabled"in l}var Xa=class extends Fn{constructor(n=null,o,s){super(Ba(o),Za(s,o)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(o),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),zi(o)&&(o.nonNullable||o.initialValueIsDefault)&&(Er(n)?this.defaultValue=n.value:this.defaultValue=n)}setValue(n,o={}){this.value=this._pendingValue=n,this._onChange.length&&o.emitModelToViewChange!==!1&&this._onChange.forEach(s=>s(this.value,o.emitViewToModelChange!==!1)),this.updateValueAndValidity(o)}patchValue(n,o={}){this.setValue(n,o)}reset(n=this.defaultValue,o={}){this._applyFormState(n),this.markAsPristine(o),this.markAsUntouched(o),this.setValue(this.value,o),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){Dr(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){Dr(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(n){Er(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}};var el={provide:Yt,useExisting:jt(()=>Bn)},Tr=Promise.resolve(),Bn=(()=>{class l extends Yt{constructor(o,s,d,m,g,x){super(),this._changeDetectorRef=g,this.callSetDisabledState=x,this.control=new Xa,this._registered=!1,this.name="",this.update=new Q,this._parent=o,this._setValidators(s),this._setAsyncValidators(d),this.valueAccessor=Qa(this,m)}ngOnChanges(o){if(this._checkForErrors(),!this._registered||"name"in o){if(this._registered&&(this._checkName(),this.formDirective)){let s=o.name.previousValue;this.formDirective.removeControl({name:s,path:this._getPath(s)})}this._setUpControl()}"isDisabled"in o&&this._updateDisabled(o),Ya(o,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(o){this.viewModel=o,this.update.emit(o)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Wa(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(o){Tr.then(()=>{this.control.setValue(o,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(o){let s=o.isDisabled.currentValue,d=s!==0&&gr(s);Tr.then(()=>{d&&!this.control.disabled?this.control.disable():!d&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(o){return this._parent?ja(o,this._parent):[o]}static{this.\u0275fac=function(s){return new(s||l)(W(kn,9),W(Ta,10),W(Aa,10),W(Fi,10),W(fr,8),W(Hr,8))}}static{this.\u0275dir=ge({type:l,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Gt([el]),ot,Ue]})}}return l})();var tl={provide:Fi,useExisting:jt(()=>Bi),multi:!0};function Wr(l,n){return l==null?`${n}`:(n&&typeof n=="object"&&(n="Object"),`${l}: ${n}`.slice(0,50))}function il(l){return l.split(":")[0]}var Bi=(()=>{class l extends Nn{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(o){this._compareWith=o}writeValue(o){this.value=o;let s=this._getOptionId(o),d=Wr(s,o);this.setProperty("value",d)}registerOnChange(o){this.onChange=s=>{this.value=this._getOptionValue(s),o(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(o){for(let s of this._optionMap.keys())if(this._compareWith(this._optionMap.get(s),o))return s;return null}_getOptionValue(o){let s=il(o);return this._optionMap.has(s)?this._optionMap.get(s):o}static{this.\u0275fac=(()=>{let o;return function(d){return(o||(o=xi(l)))(d||l)}})()}static{this.\u0275dir=ge({type:l,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(s,d){s&1&&O("change",function(g){return d.onChange(g.target.value)})("blur",function(){return d.onTouched()})},inputs:{compareWith:"compareWith"},features:[Gt([tl]),ot]})}}return l})(),Gr=(()=>{class l{constructor(o,s,d){this._element=o,this._renderer=s,this._select=d,this._select&&(this.id=this._select._registerOption())}set ngValue(o){this._select!=null&&(this._select._optionMap.set(this.id,o),this._setElementValue(Wr(this.id,o)),this._select.writeValue(this._select.value))}set value(o){this._setElementValue(o),this._select&&this._select.writeValue(this._select.value)}_setElementValue(o){this._renderer.setProperty(this._element.nativeElement,"value",o)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(s){return new(s||l)(W(Be),W(Wt),W(Bi,9))}}static{this.\u0275dir=ge({type:l,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return l})(),nl={provide:Fi,useExisting:jt(()=>Ur),multi:!0};function Ar(l,n){return l==null?`${n}`:(typeof n=="string"&&(n=`'${n}'`),n&&typeof n=="object"&&(n="Object"),`${l}: ${n}`.slice(0,50))}function ol(l){return l.split(":")[0]}var Ur=(()=>{class l extends Nn{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(o){this._compareWith=o}writeValue(o){this.value=o;let s;if(Array.isArray(o)){let d=o.map(m=>this._getOptionId(m));s=(m,g)=>{m._setSelected(d.indexOf(g.toString())>-1)}}else s=(d,m)=>{d._setSelected(!1)};this._optionMap.forEach(s)}registerOnChange(o){this.onChange=s=>{let d=[],m=s.selectedOptions;if(m!==void 0){let g=m;for(let x=0;x<g.length;x++){let P=g[x],S=this._getOptionValue(P.value);d.push(S)}}else{let g=s.options;for(let x=0;x<g.length;x++){let P=g[x];if(P.selected){let S=this._getOptionValue(P.value);d.push(S)}}}this.value=d,o(d)}}_registerOption(o){let s=(this._idCounter++).toString();return this._optionMap.set(s,o),s}_getOptionId(o){for(let s of this._optionMap.keys())if(this._compareWith(this._optionMap.get(s)._value,o))return s;return null}_getOptionValue(o){let s=ol(o);return this._optionMap.has(s)?this._optionMap.get(s)._value:o}static{this.\u0275fac=(()=>{let o;return function(d){return(o||(o=xi(l)))(d||l)}})()}static{this.\u0275dir=ge({type:l,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(s,d){s&1&&O("change",function(g){return d.onChange(g.target)})("blur",function(){return d.onTouched()})},inputs:{compareWith:"compareWith"},features:[Gt([nl]),ot]})}}return l})(),$r=(()=>{class l{constructor(o,s,d){this._element=o,this._renderer=s,this._select=d,this._select&&(this.id=this._select._registerOption(this))}set ngValue(o){this._select!=null&&(this._value=o,this._setElementValue(Ar(this.id,o)),this._select.writeValue(this._select.value))}set value(o){this._select?(this._value=o,this._setElementValue(Ar(this.id,o)),this._select.writeValue(this._select.value)):this._setElementValue(o)}_setElementValue(o){this._renderer.setProperty(this._element.nativeElement,"value",o)}_setSelected(o){this._renderer.setProperty(this._element.nativeElement,"selected",o)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(s){return new(s||l)(W(Be),W(Wt),W(Ur,9))}}static{this.\u0275dir=ge({type:l,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return l})();var rl=(()=>{class l{static{this.\u0275fac=function(s){return new(s||l)}}static{this.\u0275mod=Dn({type:l})}static{this.\u0275inj=On({})}}return l})();var qr=(()=>{class l{static withConfig(o){return{ngModule:l,providers:[{provide:Hr,useValue:o.callSetDisabledState??zn}]}}static{this.\u0275fac=function(s){return new(s||l)}}static{this.\u0275mod=Dn({type:l})}static{this.\u0275inj=On({imports:[rl]})}}return l})();var Ri=class l{constructor(n){this.http=n}nominatimBaseUrl="https://nominatim.openstreetmap.org/search";negativeCache=new Set;resolveLocation(n){let o=n.latitude!==void 0&&n.longitude!==void 0,s=o&&Number(n.latitude)===0&&Number(n.longitude)===0,d=[n.address,n.addressLine2,n.city,n.state,n.zipCode,n.country].some(ce=>!!(ce&&String(ce).trim().length));if(o&&(!s||!d))return ve({lat:Number(n.latitude),lng:Number(n.longitude)});let m=ce=>ce&&ce.trim().length?ce.trim():"",g=m(n.address),x=m(n.addressLine2),P=m(n.city),S=m(n.state),I=m(n.zipCode),z=m(n.country),B=[];B.push([g,x,P,S,I,z]),B.push([g,P,S,I,z]),B.push([x,P,S,I,z]),B.push([P,S,I,z]),B.push([P,S,z]),B.push([P,z]),B.push([I,S,z]),B.push([I,z]),B.push([S,z]),B.push([P]),B.push([S]),B.push([z]),B.push([z]);let G=new Set,Je=[];for(let ce of B){let Te=ce.filter(Qe=>Qe&&Qe.length);if(Te.length===0)continue;let ne=Te.join(", "),ct=ne.toLowerCase();!ne.trim().length||G.has(ct)||(G.add(ct),Je.push(ne))}return Je.length===0?ve(null):vi(Je).pipe(Ln(ce=>{let Te=ce.toLowerCase();return this.negativeCache.has(Te)?ve(null):this.geocodeAddress(ce).pipe(Ge(ne=>ne?ne.lat===0&&ne.lng===0&&Je.length>1?(this.negativeCache.add(Te),null):ne:(this.negativeCache.add(Te),null)))}),Ln(ce=>ce?ve(ce):ve()),or(1),nr(null))}geocodeAddress(n){let o={q:n,format:"json",limit:"1",addressdetails:"1"};return this.http.get(this.nominatimBaseUrl,{params:o}).pipe(Ge(s=>{if(s&&s.length){let d=s[0],m=parseFloat(String(d.lat)),g=parseFloat(String(d.lon));return isNaN(m)||isNaN(g)?null:{lat:m,lng:g}}return null}),Ht(s=>(console.error("Geocoding error:",s),ve(null))))}reverseGeocode(n,o){let s={lat:n.toString(),lon:o.toString(),format:"json",zoom:"18",addressdetails:"1"};return this.http.get("https://nominatim.openstreetmap.org/reverse",{params:s}).pipe(Ge(m=>m?.display_name||null),Ht(m=>(console.error("Reverse geocoding error:",m),ve(null))))}static \u0275fac=function(o){return new(o||l)(Ci(Ti))};static \u0275prov=ze({token:l,factory:l.\u0275fac,providedIn:"root"})};var A=La(Yr());var Mt=class l{constructor(n){this.http=n}nominatimBaseUrl="https://nominatim.openstreetmap.org/search";searchSubject=new Ee;getSuggestions(n,o=5){if(!n||n.length<2)return ve([]);let s={q:n,format:"json",limit:o.toString(),addressdetails:"1",extratags:"1",namedetails:"1"};return this.http.get(this.nominatimBaseUrl,{params:s}).pipe(Ge(d=>this.mapToAutocompleteSuggestions(d)),Ht(d=>(console.error("Autocomplete error:",d),ve([]))))}createDebouncedSearch(n=300,o=5){return this.searchSubject.pipe(yi(n),bi(),rr(s=>this.getSuggestions(s,o)))}search(n){this.searchSubject.next(n)}mapToAutocompleteSuggestions(n){return n.map(o=>({displayText:this.createDisplayText(o),fullDisplayName:o.display_name,coordinates:{latitude:parseFloat(String(o.lat)),longitude:parseFloat(String(o.lon))},address:o.address,originalResult:o}))}createDisplayText(n){let o=[];if(n.address){let s=n.address;s.road?o.push(s.road):s.house_number&&o.push(s.house_number),s.city?o.push(s.city):s.postcode&&o.push(s.postcode),s.state&&o.push(s.state),s.country&&o.length<3&&o.push(s.country)}if(o.length===0){let s=n.display_name.split(", ");o.push(...s.slice(0,3))}return o.join(", ")}formatSuggestion(n){return n.displayText}getLocationDetails(n){return n.fullDisplayName}static \u0275fac=function(o){return new(o||l)(Ci(Ti))};static \u0275prov=ze({token:l,factory:l.\u0275fac,providedIn:"root"})};var Hi=class l{predefinedLayers={openstreetmap:{type:"openstreetmap",name:"OpenStreetMap",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19},satellite:{type:"satellite",name:"Satellite",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",labelUrl:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png",attribution:'\xA9 <a href="https://www.esri.com/">Esri</a>, \xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19,subdomains:["a","b","c","d"]},hybrid:{type:"hybrid",name:"Hybrid",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",labelUrl:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager_only_labels/{z}/{x}/{y}{r}.png",attribution:'\xA9 <a href="https://www.esri.com/">Esri</a>, \xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, \xA9 <a href="https://carto.com/attributions">CARTO</a>',maxZoom:19,subdomains:["a","b","c","d"]},terrain:{type:"terrain",name:"Terrain",url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",attribution:'\xA9 <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)',maxZoom:17,subdomains:["a","b","c"]},dark:{type:"dark",name:"Dark",url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xA9 <a href="https://carto.com/attributions">CARTO</a>',maxZoom:20,subdomains:["a","b","c","d"]},light:{type:"light",name:"Light",url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xA9 <a href="https://carto.com/attributions">CARTO</a>',maxZoom:20,subdomains:["a","b","c","d"]},watercolor:{type:"watercolor",name:"Watercolor",url:"https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.jpg",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data \xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:16,subdomains:["a","b","c","d"]},toner:{type:"toner",name:"Toner",url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner/{z}/{x}/{y}{r}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data \xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:20,subdomains:["a","b","c","d"]}};getTileLayerConfig(n){return this.predefinedLayers[n]}getAllTileLayerConfigs(){return Object.values(this.predefinedLayers)}getDefaultTileLayersForControl(){return[this.predefinedLayers.openstreetmap,this.predefinedLayers.satellite,this.predefinedLayers.hybrid,this.predefinedLayers.terrain,this.predefinedLayers.dark,this.predefinedLayers.light]}isValidTileLayerType(n){return n in this.predefinedLayers}getTileLayerUrl(n){return this.predefinedLayers[n].url}getAttribution(n){return this.predefinedLayers[n].attribution}createCustomTileLayer(n,o,s,d,m){return Z({type:n,name:o,url:s,attribution:d,maxZoom:19},m)}static \u0275fac=function(o){return new(o||l)};static \u0275prov=ze({token:l,factory:l.\u0275fac,providedIn:"root"})};var Pt=class l{searchSubject=new Ee;suggestionSelectedSubject=new Ee;locationSelectedSubject=new Ee;connections=new Map;reverseConnections=new Map;get searchEvents$(){return this.searchSubject.asObservable()}get suggestionSelectedEvents$(){return this.suggestionSelectedSubject.asObservable()}get locationSelectedEvents$(){return this.locationSelectedSubject.asObservable()}connectSearchInputToMap(n,o){this.disconnectSearchInput(n),this.connections.set(n,o),this.reverseConnections.has(o)||this.reverseConnections.set(o,[]),this.reverseConnections.get(o).push(n)}disconnectSearchInput(n){let o=this.connections.get(n);if(o){this.connections.delete(n);let s=this.reverseConnections.get(o);if(s){let d=s.indexOf(n);d>-1&&s.splice(d,1),s.length===0&&this.reverseConnections.delete(o)}}}disconnectMap(n){let o=this.reverseConnections.get(n);o&&(o.forEach(s=>{this.connections.delete(s)}),this.reverseConnections.delete(n))}getConnectedMap(n){return this.connections.get(n)}getConnectedSearchInputs(n){return this.reverseConnections.get(n)||[]}isConnected(n,o){return this.connections.get(n)===o}emitSearchEvent(n,o){this.searchSubject.next({query:n,searchInputId:o})}emitSuggestionSelectedEvent(n,o){this.suggestionSelectedSubject.next({suggestion:n,searchInputId:o})}emitLocationSelectedEvent(n,o,s){this.locationSelectedSubject.next({displayValue:n,coordinates:o,mapId:s})}getAllConnections(){let n=[];return this.connections.forEach((o,s)=>{n.push({searchInputId:s,mapId:o})}),n}static \u0275fac=function(o){return new(o||l)};static \u0275prov=ze({token:l,factory:l.\u0275fac,providedIn:"root"})};var Jt=class l{constructor(n,o,s,d,m,g,x,P){this.elementRef=n;this.platformId=o;this.geocodingService=s;this.autocompleteService=d;this.tileLayerService=m;this.ngZone=g;this.injector=x;this.searchConnectionService=P}pins=[];zoomInto;highlightAreas=[];mapOptions={};mapId;preSelectedLocations=[];searchLocation;mapClick=new Q;locationSelected=new Q;searchResult=new Q;pinDragged=new Q;autocompleteResults=new Q;pinDeleted=new Q;selectionChanged=new Q;map;markers=[];areas=[];searchControl;layerControl;currentTileLayer;_hybridLabelLayer;tileLayers={};clickSelectEnabled=!1;autocompleteDropdown;externalSearchInput;externalSearchCleanup;selectedLocations=[];selectionCounter=0;embeddedViews=new Map;coordinatesCache=new Map;searchConnectionSubscription;suggestionConnectionSubscription;defaultOptions={zoom:13,minZoom:1,maxZoom:18,zoomControl:!0,height:400,width:"100%",scrollWheelZoom:!0,doubleClickZoom:!0,tileLayer:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xA9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'};ngOnInit(){wr(this.platformId)&&(this.initializeMap(),this.setupSearchInputConnections())}ngOnDestroy(){this.embeddedViews.forEach(n=>n.destroy()),this.embeddedViews.clear(),this.coordinatesCache.clear(),this.externalSearchCleanup&&this.externalSearchCleanup(),this.searchConnectionSubscription&&this.searchConnectionSubscription.unsubscribe(),this.suggestionConnectionSubscription&&this.suggestionConnectionSubscription.unsubscribe(),this.map&&this.map.remove()}ngOnChanges(n){if(this.map){if(n.pins){let o=n.pins.currentValue||[],s=n.pins.previousValue||[];this.updatePinsEfficiently(s,o),this.reconcileSelectionsAfterPinsChange()}n.highlightAreas&&this.updateHighlightAreas(),n.zoomInto&&this.handleZoomInto(),n.mapOptions&&this.handleMapOptionsChange(n.mapOptions),n.preSelectedLocations&&this.handlePreSelectedLocationsChange(),n.searchLocation&&this.handleSearchLocationChange()}}reconcileSelectionsAfterPinsChange(){let n=new Set;this.pins.forEach(d=>{d.data?.selectionId&&n.add(d.data.selectionId)});let o=this.selectedLocations.length;this.selectedLocations=this.selectedLocations.filter(d=>n.has(d.id));let s=this.pins.length;this.selectedLocations.forEach(d=>{d.pinIndex!==void 0&&d.pinIndex>=s&&(d.pinIndex=void 0)}),this.selectedLocations.length!==o&&this.ngZone.run(()=>this.selectionChanged.emit([...this.selectedLocations]))}initializeMap(){this.ngZone.runOutsideAngular(()=>{let n=Z(Z({},this.defaultOptions),this.mapOptions),o=this.elementRef.nativeElement;o.style.height=typeof n.height=="number"?`${n.height}px`:n.height,o.style.width=typeof n.width=="number"?`${n.width}px`:n.width,this.map=A.map(o,{zoom:n.zoom,minZoom:n.minZoom,maxZoom:n.maxZoom,zoomControl:n.readonly?!1:n.zoomControl,scrollWheelZoom:n.readonly?n.scrollWheelZoomInReadonly===!0:n.scrollWheelZoom,doubleClickZoom:n.readonly?!1:n.doubleClickZoom,dragging:!n.readonly,touchZoom:!n.readonly,boxZoom:!n.readonly,keyboard:!n.readonly,worldCopyJump:!n.noWrap}),this.setupMapBoundaries(n),this.setupTileLayers(n),this.setInitialView(),n.enableLayerControl&&!n.readonly&&this.addLayerControl(),n.search?.enabled&&!n.readonly&&this.addSearchControl(),n.enableClickSelect&&!n.readonly&&this.enableClickSelect(),n.searchInput?.enableExternalBinding&&this.setupExternalSearchInput(),this.setupPinDeletionHandler(),this.updatePins(),this.updateHighlightAreas(),this.handlePreSelectedLocationsChange()})}setupMapBoundaries(n){if(this.map){if(this.map.setMaxBounds(void 0),n.mapBounds){let o=A.latLngBounds(A.latLng(n.mapBounds.southWest[0],n.mapBounds.southWest[1]),A.latLng(n.mapBounds.northEast[0],n.mapBounds.northEast[1]));this.map.setMaxBounds(o),this.map.on("drag",()=>{this.map.panInsideBounds(o,{animate:!1})}),this.map.on("moveend",()=>{o.contains(this.map.getCenter())||this.map.panInsideBounds(o,{animate:!1})})}else if(n.enableWorldBounds){let o=A.latLngBounds(A.latLng(-85.0511,-180),A.latLng(85.0511,180));this.map.setMaxBounds(o),this.map.on("drag",()=>{this.map.panInsideBounds(o,{animate:!1})}),this.map.on("moveend",()=>{o.contains(this.map.getCenter())||this.map.panInsideBounds(o,{animate:!1})})}n.noWrap&&(this.map.options.worldCopyJump=!1)}}setInitialView(){this.zoomInto?this.handleZoomInto():this.pins.length>0?this.geocodingService.resolveLocation(this.pins[0].location).subscribe(n=>{n&&this.map&&this.map.setView([n.lat,n.lng],this.mapOptions.zoom||13)}):this.map?.setView([0,0],2)}handleZoomInto(){!this.zoomInto||!this.map||this.geocodingService.resolveLocation(this.zoomInto).subscribe(n=>{n&&this.map&&this.map.setView([n.lat,n.lng],this.mapOptions.zoom||13)})}updatePins(){if(!this.map||(this.markers.forEach(o=>this.map.removeLayer(o)),this.markers=[],this.embeddedViews.forEach(o=>o.destroy()),this.embeddedViews.clear(),!this.pins||this.pins.length===0))return;let n=this.pins.map(o=>this.resolveLocationWithCache(o.location));bt(n).subscribe(o=>{o.forEach((s,d)=>{if(s&&this.map){let m=this.pins[d],g=this.createMarker(s,m,d);g.addTo(this.map),this.markers.push(g)}})})}updatePinsEfficiently(n,o){if(!this.map)return;if(!n||n.length===0){this.updatePins();return}let s=[];for(let g=this.markers.length-1;g>=o.length;g--)s.push(g);s.forEach(g=>{if(this.markers[g]){this.map.removeLayer(this.markers[g]);let x=this.embeddedViews.get(g);x&&(x.destroy(),this.embeddedViews.delete(g))}}),this.markers=this.markers.slice(0,o.length);let d=[],m=[];o.forEach((g,x)=>{let P=n[x];!P||this.hasLocationChanged(P.location,g.location)?(d.push(this.resolveLocationWithCache(g.location)),m.push(x)):P&&this.hasPinPropertiesChanged(P,g)&&this.updateMarkerProperties(x,g)}),d.length>0&&bt(d).subscribe(g=>{g.forEach((x,P)=>{if(x&&this.map){let S=m[P],I=o[S];if(this.markers[S]){this.map.removeLayer(this.markers[S]);let B=this.embeddedViews.get(S);B&&(B.destroy(),this.embeddedViews.delete(S))}let z=this.createMarker(x,I,S);z.addTo(this.map),this.markers[S]=z}})})}resolveLocationWithCache(n){let o=this.getLocationCacheKey(n);return this.coordinatesCache.has(o)?ve(this.coordinatesCache.get(o)):this.geocodingService.resolveLocation(n).pipe(sr(s=>{s&&this.coordinatesCache.set(o,s)}))}getLocationCacheKey(n){return n.latitude!==void 0&&n.longitude!==void 0?`coord_${n.latitude}_${n.longitude}`:`addr_${[n.address||"",n.city||"",n.state||"",n.country||"",n.zipCode||""].filter(s=>s.length>0).join("_")}`}hasLocationChanged(n,o){return n.latitude!==o.latitude||n.longitude!==o.longitude?!0:n.address!==o.address||n.city!==o.city||n.state!==o.state||n.country!==o.country||n.zipCode!==o.zipCode}hasPinPropertiesChanged(n,o){return n.color!==o.color||n.title!==o.title||n.content!==o.content||n.draggable!==o.draggable||n.icon!==o.icon||n.popupTemplate!==o.popupTemplate}updateMarkerProperties(n,o){let s=this.markers[n];if(!s)return;(o.popupTemplate||o.content||o.title)&&(s.unbindPopup(),this.addPopupToMarker(s,o,n));let d=this.mapOptions.readonly?!1:o.draggable!==void 0?o.draggable:this.mapOptions.defaultPinsDraggable||!1;s.options.draggable!==d&&(d?s.dragging?.enable():s.dragging?.disable())}createMarker(n,o,s){let d={},m=this.mapOptions.readonly?!1:o.draggable!==void 0?o.draggable:this.mapOptions.defaultPinsDraggable||!1;if(d.draggable=m,o.icon)typeof o.icon=="string"?d.icon=A.icon({iconUrl:o.icon,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34]}):d.icon=A.icon({iconUrl:o.icon.iconUrl,iconSize:o.icon.iconSize||[25,41],iconAnchor:o.icon.iconAnchor||[12,41],popupAnchor:o.icon.popupAnchor||[1,-34],shadowUrl:o.icon.shadowUrl,shadowSize:o.icon.shadowSize});else if(o.color){let x=this.createColoredIcon(o.color);d.icon=x}let g=A.marker([n.lat,n.lng],d);return(o.popupTemplate||o.content||o.title)&&this.addPopupToMarker(g,o,s),m&&g.on("dragend",x=>{let P=x.target.getLatLng(),S={pinIndex:s,originalPin:o,newCoordinates:{latitude:P.lat,longitude:P.lng},originalEvent:x};this.geocodingService.reverseGeocode(P.lat,P.lng).subscribe(I=>{I&&(S.newAddressInfo={display_name:I,address:this.parseAddressFromDisplayName(I)}),this.ngZone.run(()=>{if(this.pinDragged.emit(S),o.data?.selectionId){let z=this.selectedLocations.find(B=>B.id===o.data.selectionId);z&&(z.coordinates={latitude:P.lat,longitude:P.lng},S.newAddressInfo&&(z.addressInfo=S.newAddressInfo),this.updateExternalSearchInputFromSelection(),this.selectionChanged.emit([...this.selectedLocations]))}})})}),g}addPopupToMarker(n,o,s){if(o.popupTemplate)this.addTemplatePopup(n,o,s);else if(o.content||o.title){let d=o.content||o.title||"",m=this.mapOptions.selection;m?.allowPinDeletion&&m?.showDeleteButton&&!this.mapOptions.readonly&&(d+=`
          <br>
          <button class="pin-delete-btn" onclick="window.deletePinHandler?.(${s})"
                  style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; margin-top: 8px;">
            \u{1F5D1}\uFE0F Delete Pin
          </button>
        `),n.bindPopup(d)}}getViewContainer(){try{return this.injector.get(Mi,null)}catch{return null}}addTemplatePopup(n,o,s){if(!o.popupTemplate)return;let d=this.getViewContainer();if(!d){console.warn("ViewContainerRef not available for template popups. Falling back to string-based popup.");let x=o.title||"Template Popup";n.bindPopup(x);return}let m=()=>{let x={$implicit:o.location,pin:o,pinIndex:s,deletePin:()=>this.deletePinByIndex(s,"user-action")},P=d.createEmbeddedView(o.popupTemplate,x);this.embeddedViews.set(s,P),P.detectChanges();let S=document.createElement("div");return S.className="template-popup-container",P.rootNodes.forEach(I=>{(I.nodeType===Node.ELEMENT_NODE||I.nodeType===Node.TEXT_NODE)&&S.appendChild(I)}),S},g=A.popup({maxWidth:400,closeButton:!0,autoClose:!0,autoPan:!0});n.bindPopup(g),n.on("popupopen",()=>{let x=m();g.setContent(x)}),n.on("popupclose",()=>{let x=this.embeddedViews.get(s);x&&(x.destroy(),this.embeddedViews.delete(s))})}createColoredIcon(n){let o=`
      <svg width="25" height="41" viewBox="0 0 25 41" xmlns="http://www.w3.org/2000/svg">
        <path d="M12.5 0C5.596 0 0 5.596 0 12.5c0 12.5 12.5 28.5 12.5 28.5s12.5-16 12.5-28.5C25 5.596 19.404 0 12.5 0z"
              fill="${n}" stroke="#fff" stroke-width="2"/>
        <circle cx="12.5" cy="12.5" r="5" fill="#fff"/>
      </svg>
    `;return A.divIcon({html:o,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],className:"colored-marker"})}updateHighlightAreas(){this.map&&(this.areas.forEach(n=>this.map.removeLayer(n)),this.areas=[],!(!this.highlightAreas||this.highlightAreas.length===0)&&this.highlightAreas.forEach(n=>{let o=n.boundary.map(s=>this.geocodingService.resolveLocation(s));bt(o).subscribe(s=>{let d=s.filter(m=>m!==null);if(d.length>=3&&this.map){let m=d.map(x=>[x.lat,x.lng]),g=A.polygon(m,{color:n.borderColor||"#3388ff",weight:n.borderWidth||3,fillColor:n.fillColor||"#3388ff",fillOpacity:n.fillOpacity||.2});n.title&&g.bindPopup(n.title),g.addTo(this.map),this.areas.push(g)}})}))}getMap(){return this.map}fitBounds(){if(!this.map)return;let n=new A.FeatureGroup([...this.markers,...this.areas]);n.getLayers().length>0&&this.map.fitBounds(n.getBounds(),{padding:[10,10]})}addPin(n){this.pins=[...this.pins,n],this.updatePins()}removePin(n){n>=0&&n<this.pins.length&&(this.pins=this.pins.filter((o,s)=>s!==n),this.updatePins())}clearPins(){this.pins=[],this.updatePins()}addSearchControl(){if(!this.map)return;let n=this.mapOptions.search,o=A.Control.extend({onAdd:s=>{let d=A.DomUtil.create("div","leaflet-control-search");d.style.backgroundColor="white",d.style.padding="5px",d.style.borderRadius="4px",d.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)",d.style.position="relative";let m=A.DomUtil.create("form","",d),g=A.DomUtil.create("input","",m),x=A.DomUtil.create("button","",m);g.type="text",g.placeholder=n.placeholder||"Search location...",g.style.padding="5px",g.style.border="1px solid #ccc",g.style.borderRadius="4px 0 0 4px",g.style.width="200px",x.type="submit",x.innerHTML="\u{1F50D}",x.style.padding="5px 10px",x.style.border="1px solid #ccc",x.style.borderLeft="none",x.style.borderRadius="0 4px 4px 0",x.style.backgroundColor="#f8f9fa",x.style.cursor="pointer";let P=null;n.autocomplete?.enabled&&(P=A.DomUtil.create("div","leaflet-search-autocomplete",d),P.style.cssText=`
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ccc;
            border-top: none;
            border-radius: 0 0 4px 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
          `),A.DomEvent.disableClickPropagation(d),A.DomEvent.disableScrollPropagation(d);let S;return n.autocomplete?.enabled&&P&&(A.DomEvent.on(g,"input",I=>{let B=I.target.value.trim();S&&clearTimeout(S),B.length>=(n.autocomplete?.minQueryLength||2)?S=setTimeout(()=>{this.autocompleteService.getSuggestions(B,n.autocomplete?.maxResults||5).subscribe(G=>{this.showBuiltInAutocompleteSuggestions(G,P,g),this.ngZone.run(()=>{this.autocompleteResults.emit(G)})})},n.autocomplete?.debounceMs||300):this.hideBuiltInAutocompleteSuggestions(P)}),A.DomEvent.on(g,"keydown",I=>{I.key==="Escape"&&this.hideBuiltInAutocompleteSuggestions(P)}),A.DomEvent.on(g,"blur",()=>{setTimeout(()=>{this.hideBuiltInAutocompleteSuggestions(P)},200)})),A.DomEvent.on(m,"submit",I=>{I.preventDefault();let z=g.value.trim();z&&(this.handleSearch(z),P&&this.hideBuiltInAutocompleteSuggestions(P))}),d}});this.searchControl=new o({position:"topright"}),this.searchControl.addTo(this.map)}showBuiltInAutocompleteSuggestions(n,o,s){if(n.length===0){this.hideBuiltInAutocompleteSuggestions(o);return}o.innerHTML="",n.forEach(d=>{let m=document.createElement("div");m.className="leaflet-search-autocomplete-item",m.style.cssText=`
        padding: 8px 12px;
        cursor: pointer;
        border-bottom: 1px solid #eee;
        transition: background-color 0.2s;
      `,m.innerHTML=`
        <div style="font-weight: 500; margin-bottom: 2px;">${d.displayText}</div>
        <div style="font-size: 0.85em; color: #666; opacity: 0.8;">${d.fullDisplayName}</div>
      `,m.addEventListener("mouseenter",()=>{m.style.backgroundColor="#f5f5f5"}),m.addEventListener("mouseleave",()=>{m.style.backgroundColor="white"}),m.addEventListener("click",()=>{s.value=d.displayText,this.handleSearch(d.displayText),this.hideBuiltInAutocompleteSuggestions(o)}),o.appendChild(m)}),o.style.display="block"}hideBuiltInAutocompleteSuggestions(n){n.style.display="none"}handleSearch(n){if(!n||!this.map)return;let o={address:n};this.geocodingService.resolveLocation(o).subscribe(s=>{if(s&&this.map){let d=this.mapOptions.search,m=this.mapOptions.selection;this.geocodingService.reverseGeocode(s.lat,s.lng).subscribe(g=>{let x={coordinates:{latitude:s.lat,longitude:s.lng},displayName:g||n,address:this.parseAddressFromDisplayName(g||"")},P={coordinates:{latitude:s.lat,longitude:s.lng},addressInfo:g?{display_name:g,address:this.parseAddressFromDisplayName(g)}:void 0},S=m&&m.createPinsForSelections!==!1||d.addPinOnResult,I=d.addPinOnResult&&d.searchResultPin?Z({},d.searchResultPin):void 0;this.handleLocationSelection(P,"search-result",I),this.ngZone.run(()=>{this.searchResult.emit(x)})})}})}enableClickSelect(){this.map&&(this.clickSelectEnabled=!0,this.map.on("click",n=>{let o={coordinates:{latitude:n.latlng.lat,longitude:n.latlng.lng},originalEvent:n};this.ngZone.run(()=>{this.mapClick.emit(o)}),this.geocodingService.reverseGeocode(n.latlng.lat,n.latlng.lng).subscribe(s=>{s&&(o.addressInfo={display_name:s,address:this.parseAddressFromDisplayName(s)}),this.handleLocationSelection(o,"map-click"),this.ngZone.run(()=>{this.locationSelected.emit(o)})})}))}parseAddressFromDisplayName(n){let o=n.split(", ");return o.length>=4?{road:o[0],city:o[o.length-4],state:o[o.length-3],postcode:o[o.length-2],country:o[o.length-1]}:{}}search(n){this.handleSearch(n)}toggleClickSelect(n){this.map&&(n&&!this.clickSelectEnabled?this.enableClickSelect():!n&&this.clickSelectEnabled&&(this.map.off("click"),this.clickSelectEnabled=!1))}isSearchEnabled(){return!!this.searchControl}isClickSelectEnabled(){return this.clickSelectEnabled}setupExternalSearchInput(){if(!this.mapOptions.searchInput?.enableExternalBinding)return;let n=this.mapOptions.searchInput,o;if(typeof n.inputElement=="string"){let P=document.querySelector(n.inputElement);if(!P){console.warn(`External search input element not found: ${n.inputElement}`);return}o=P}else if(n.inputElement instanceof HTMLInputElement)o=n.inputElement;else{console.warn("Invalid external search input element configuration");return}this.externalSearchInput=o;let s=this.mapOptions.readonly&&!n.overrideReadonlyMode;s?(o.disabled=!0,o.style.opacity="0.6",o.title="Search is disabled in readonly mode"):(o.disabled=!1,o.style.opacity="",o.title=n.overrideReadonlyMode&&this.mapOptions.readonly?"Search enabled (overriding readonly mode)":""),n.autoFocus&&!s&&setTimeout(()=>o.focus(),100),n.showSuggestionsDropdown&&this.setupAutocompleteDropdown(o,n);let d,m=P=>{if(this.mapOptions.readonly)return;let I=P.target.value.trim();if(d&&clearTimeout(d),I.length>=2){if(n.showSuggestionsDropdown&&this.mapOptions.search?.autocomplete?.enabled){let z=this.mapOptions.search.autocomplete;d=setTimeout(()=>{this.autocompleteService.getSuggestions(I,z?.maxResults||5).subscribe(B=>{this.showAutocompleteSuggestions(B,o),this.ngZone.run(()=>{this.autocompleteResults.emit(B)})})},z?.debounceMs||300)}}else this.hideAutocompleteSuggestions()};o.addEventListener("input",P=>{let I=P.target.value.trim();if(d&&clearTimeout(d),I.length>=2){if(n.showSuggestionsDropdown&&this.mapOptions.search?.autocomplete?.enabled){let z=this.mapOptions.search.autocomplete;d=setTimeout(()=>{this.autocompleteService.getSuggestions(I,z?.maxResults||5).subscribe(B=>{this.showAutocompleteSuggestions(B,o),this.ngZone.run(()=>{this.autocompleteResults.emit(B)})})},z?.debounceMs||300)}}else this.hideAutocompleteSuggestions()});let g=P=>{if(P.key==="Enter"){if(P.preventDefault(),this.mapOptions.readonly)return;let S=o.value.trim();S&&(this.performExternalSearch(S,o),this.hideAutocompleteSuggestions())}else P.key==="Escape"&&this.hideAutocompleteSuggestions()},x=()=>{setTimeout(()=>{this.hideAutocompleteSuggestions()},200)};o.addEventListener("input",m),o.addEventListener("keydown",g),o.addEventListener("blur",x),this.externalSearchCleanup=()=>{o.removeEventListener("input",m),o.removeEventListener("keydown",g),o.removeEventListener("blur",x),d&&clearTimeout(d)}}performExternalSearch(n,o){if(!n||!this.map)return;let s={address:n};this.geocodingService.resolveLocation(s).subscribe(d=>{d&&this.map&&this.geocodingService.reverseGeocode(d.lat,d.lng).subscribe(m=>{let g={coordinates:{latitude:d.lat,longitude:d.lng},displayName:m||n,address:this.parseAddressFromDisplayName(m||"")},x={coordinates:{latitude:d.lat,longitude:d.lng},addressInfo:m?{display_name:m,address:this.parseAddressFromDisplayName(m)}:void 0},P=this.mapOptions.search,S=this.mapOptions.selection,I=P.addPinOnResult&&P.searchResultPin?Z({},P.searchResultPin):void 0;this.handleLocationSelection(x,"search-result",I),o.value=g.displayName,this.ngZone.run(()=>{this.searchResult.emit(g)})})})}setupAutocompleteDropdown(n,o){this.autocompleteDropdown=document.createElement("div"),this.autocompleteDropdown.className="ng-osm-autocomplete-dropdown",this.autocompleteDropdown.style.cssText=`
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      border-top: none;
      border-radius: 0 0 4px 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      max-height: 200px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
    `;let s=null;if(o.dropdownContainer&&(typeof o.dropdownContainer=="string"?s=document.querySelector(o.dropdownContainer):s=o.dropdownContainer),!s){let d=n.parentElement;if(d&&d.style.position!=="relative"){let m=document.createElement("div");m.style.position="relative",m.style.display="inline-block",d.insertBefore(m,n),m.appendChild(n),s=m}else s=d||document.body}s.appendChild(this.autocompleteDropdown)}showAutocompleteSuggestions(n,o){if(!this.autocompleteDropdown||n.length===0){this.hideAutocompleteSuggestions();return}this.autocompleteDropdown.innerHTML="",n.forEach((s,d)=>{let m=document.createElement("div");m.className="ng-osm-autocomplete-item",m.style.cssText=`
          padding: 8px 12px;
          cursor: pointer;
          border-bottom: 1px solid #eee;
          transition: background-color 0.2s;
        `,m.innerHTML=`
          <div style="font-weight: 500; margin-bottom: 2px;">${s.displayText}</div>
          <div style="font-size: 0.85em; color: #666; opacity: 0.8;">${s.fullDisplayName}</div>
        `,m.addEventListener("mouseenter",()=>{m.style.backgroundColor="#f5f5f5"}),m.addEventListener("mouseleave",()=>{m.style.backgroundColor="white"}),m.addEventListener("click",()=>{o.value=s.displayText,this.handleSearch(s.displayText),this.hideAutocompleteSuggestions()}),this.autocompleteDropdown&&this.autocompleteDropdown.appendChild(m)}),this.autocompleteDropdown.style.display="block"}hideAutocompleteSuggestions(){this.autocompleteDropdown&&(this.autocompleteDropdown.style.display="none")}setupTileLayers(n){if(!this.map)return;let o;if(n.tileLayerType?o=this.tileLayerService.getTileLayerConfig(n.tileLayerType):n.tileLayer&&n.attribution?o={type:"openstreetmap",name:"Custom",url:n.tileLayer,attribution:n.attribution,maxZoom:n.maxZoom||19}:o=this.tileLayerService.getTileLayerConfig("openstreetmap"),this.currentTileLayer=A.tileLayer(o.url,{attribution:o.attribution,maxZoom:o.maxZoom||19,minZoom:o.minZoom||1,subdomains:o.subdomains||["a","b","c"],noWrap:n.noWrap||!1}),this.currentTileLayer.addTo(this.map),this.tileLayers[o.name]=this.currentTileLayer,(o.type==="hybrid"||o.type==="satellite")&&o.labelUrl){let s=A.tileLayer(o.labelUrl,{pane:"overlayPane",attribution:"",maxZoom:o.maxZoom||19,minZoom:o.minZoom||1,subdomains:o.subdomains||["a","b","c"],noWrap:n.noWrap||!1});s.addTo(this.map),this._hybridLabelLayer=s}n.enableLayerControl&&this.setupAdditionalTileLayers(n)}setupAdditionalTileLayers(n){(n.availableTileLayers||this.tileLayerService.getDefaultTileLayersForControl()).forEach(s=>{if(!this.tileLayers[s.name]){let d=A.tileLayer(s.url,{attribution:s.attribution,maxZoom:s.maxZoom||19,minZoom:s.minZoom||1,subdomains:s.subdomains||["a","b","c"],noWrap:n.noWrap||!1});this.tileLayers[s.name]=d}})}addLayerControl(){if(!this.map||Object.keys(this.tileLayers).length<=1)return;let n={};Object.entries(this.tileLayers).forEach(([o,s])=>{n[o]=s}),this.layerControl=A.control.layers(n,{},{position:"topright",collapsed:!0}),this.layerControl.addTo(this.map)}switchTileLayer(n){if(!this.map)return;let o=this.tileLayerService.getTileLayerConfig(n);if(this.currentTileLayer&&this.map.removeLayer(this.currentTileLayer),this._hybridLabelLayer&&(this.map.removeLayer(this._hybridLabelLayer),this._hybridLabelLayer=void 0),this.currentTileLayer=A.tileLayer(o.url,{attribution:o.attribution,maxZoom:o.maxZoom||19,minZoom:o.minZoom||1,subdomains:o.subdomains||["a","b","c"],noWrap:this.mapOptions?.noWrap||!1}),this.currentTileLayer.addTo(this.map),(n==="hybrid"||n==="satellite")&&o.labelUrl){let s=A.tileLayer(o.labelUrl,{pane:"overlayPane",attribution:"",maxZoom:o.maxZoom||19,minZoom:o.minZoom||1,subdomains:o.subdomains||["a","b","c"],noWrap:this.mapOptions?.noWrap||!1});s.addTo(this.map),this._hybridLabelLayer=s}}getAvailableTileLayerTypes(){return this.tileLayerService.getAllTileLayerConfigs().map(n=>n.type)}getCurrentTileLayerType(){return this.mapOptions.tileLayerType||"openstreetmap"}updatePinLocation(n,o){if(n>=0&&n<this.markers.length&&n<this.pins.length){let s=this.markers[n];o.latitude!==void 0&&o.longitude!==void 0?(s.setLatLng([o.latitude,o.longitude]),this.pins[n].location=o):this.geocodingService.resolveLocation(o).subscribe(d=>{d&&s&&(s.setLatLng([d.lat,d.lng]),this.pins[n].location={latitude:d.lat,longitude:d.lng})})}}zoomToLocation(n,o){if(!this.map)return;let s=this.mapOptions.search,d=this.mapOptions.selection,m=!1,g=15,x=!0;o==="search"?s?.autoZoom!==!1?(m=!0,g=s?.searchZoom||15,x=!0):d?.autoZoomToSelection&&(m=!0,g=d.selectionZoom||15,x=d.animatedZoom!==!1):o==="selection"&&d?.autoZoomToSelection&&(m=!0,g=d.selectionZoom||15,x=d.animatedZoom!==!1),m&&(x?this.map.setView([n.latitude,n.longitude],g,{animate:!0,duration:1}):this.map.setView([n.latitude,n.longitude],g,{animate:!1}))}handleLocationSelection(n,o="map-click",s){let d=this.mapOptions.selection;if(!d||!this.map)return;let m=!!d.multiSelect,g=d.maxSelections||0;if(m||(this.selectedLocations.forEach(S=>{S.pinIndex!==void 0&&this.removeSelectionPin(S.pinIndex)}),this.selectedLocations=[]),m&&g>0&&this.selectedLocations.length>=g){let S=this.selectedLocations[0];S.pinIndex!==void 0&&this.removeSelectionPin(S.pinIndex),this.selectedLocations=this.selectedLocations.slice(1)}let x={id:`${o}_${++this.selectionCounter}`,coordinates:n.coordinates,addressInfo:n.addressInfo,selectedAt:new Date};if(d.createPinsForSelections!==!1){let S={location:{latitude:n.coordinates.latitude,longitude:n.coordinates.longitude},color:"#007bff",title:"Selected Location",content:n.addressInfo?.display_name?`<h3>\u{1F4CD} Selected</h3><p>${n.addressInfo.display_name}</p>`:"<h3>\u{1F4CD} Selected Location</h3>",draggable:!0,data:{selectionId:x.id}},I=d.selectionPin||{},z=Z(Z(Z({},S),I),s);!z.color&&S.color&&(z.color=S.color),!z.title&&S.title&&(z.title=S.title);let B=[...this.pins];this.pins=[...this.pins,z];let G=this.pins.length-1;x.pinIndex=G,this.updatePinsEfficiently(B,this.pins)}this.selectedLocations=[...this.selectedLocations,x],o!=="pre-selected"&&this.ngZone.run(()=>{this.selectionChanged.emit([...this.selectedLocations])}),this.updateExternalSearchInputFromSelection(),this.zoomToLocation(x.coordinates,"selection")}removeSelectionPin(n){n>=0&&n<this.pins.length&&(this.pins=this.pins.filter((o,s)=>s!==n),this.updatePins(),this.selectedLocations.forEach(o=>{o.pinIndex!==void 0&&o.pinIndex>n?o.pinIndex=o.pinIndex-1:o.pinIndex===n&&(o.pinIndex=void 0)}))}handlePreSelectedLocationsChange(){if(!this.preSelectedLocations||this.preSelectedLocations.length===0||!this.map)return;let o=!!this.mapOptions.selection?.multiSelect;o?(this.selectedLocations.filter(m=>m.id.startsWith("pre-selected_")).forEach(m=>{m.pinIndex!==void 0&&this.removeSelectionPin(m.pinIndex)}),this.selectedLocations=this.selectedLocations.filter(m=>!m.id.startsWith("pre-selected_"))):this.clearSelections(),(o?this.preSelectedLocations:[this.preSelectedLocations[0]]).forEach(d=>{this.geocodingService.resolveLocation(d).subscribe(m=>{m&&this.geocodingService.reverseGeocode(m.lat,m.lng).subscribe(g=>{let x={coordinates:{latitude:m.lat,longitude:m.lng},addressInfo:g?{display_name:g,address:this.parseAddressFromDisplayName(g)}:void 0};this.handleLocationSelection(x,"pre-selected")})})})}handleSearchLocationChange(){!this.searchLocation||!this.map||this.searchForLocation(this.searchLocation)}searchForLocation(n){if(!this.map||!n)return;!!this.mapOptions.selection?.multiSelect||this.clearSelections(),this.geocodingService.resolveLocation(n).subscribe(d=>{d?this.geocodingService.reverseGeocode(d.lat,d.lng).subscribe(m=>{let g={coordinates:{latitude:d.lat,longitude:d.lng},addressInfo:m?{display_name:m,address:this.parseAddressFromDisplayName(m)}:void 0};this.handleLocationSelection(g,"search-result")}):console.warn("Failed to geocode search location:",n)})}handleMapOptionsChange(n){this.mapOptions.enableClickSelect&&!this.clickSelectEnabled&&!this.mapOptions.readonly&&this.enableClickSelect()}setupSearchInputConnections(){}setupPinDeletionHandler(){window.deletePinHandler=n=>{this.deletePinByIndex(n,"user-action")}}deletePinByIndex(n,o){if(n<0||n>=this.pins.length)return;let s=this.pins[n];this.pins=this.pins.filter((m,g)=>g!==n),this.updatePins();let d=s.data?.selectionId;d&&(this.selectedLocations=this.selectedLocations.filter(m=>m.id!==d)),this.selectedLocations.forEach(m=>{m.pinIndex===n?m.pinIndex=void 0:m.pinIndex!==void 0&&m.pinIndex>n&&(m.pinIndex=m.pinIndex-1)}),this.ngZone.run(()=>{let m={pinIndex:n,deletedPin:s,reason:o};this.pinDeleted.emit(m),this.selectionChanged.emit([...this.selectedLocations])})}updateExternalSearchInputFromSelection(){}getSelectedLocations(){return[...this.selectedLocations]}clearSelections(){this.selectedLocations.forEach(n=>{n.pinIndex!==void 0&&this.removeSelectionPin(n.pinIndex)}),this.selectedLocations=[],this.ngZone.run(()=>this.selectionChanged.emit([]))}addSelection(n,o){let s={coordinates:n,addressInfo:o};this.handleLocationSelection(s,"map-click")}zoomToSelection(){this.selectedLocations.length!==0&&this.zoomToLocation(this.selectedLocations[0].coordinates,"selection")}clearLocationCache(){this.coordinatesCache.clear()}static \u0275fac=function(o){return new(o||l)(W(Be),W(ar),W(Ri),W(Mt),W(Hi),W(Si),W(En),W(Pt))};static \u0275dir=ge({type:l,selectors:[["","ngOsmMap",""]],inputs:{pins:"pins",zoomInto:"zoomInto",highlightAreas:"highlightAreas",mapOptions:"mapOptions",mapId:"mapId",preSelectedLocations:"preSelectedLocations",searchLocation:"searchLocation"},outputs:{mapClick:"mapClick",locationSelected:"locationSelected",searchResult:"searchResult",pinDragged:"pinDragged",autocompleteResults:"autocompleteResults",pinDeleted:"pinDeleted",selectionChanged:"selectionChanged"},standalone:!0,features:[Ue]})};var ul=["mapContainer"],Qt=class l{mapDirective;mapContainer;pins=[];zoomInto;highlightAreas=[];mapOptions={};mapId;preSelectedLocations=[];searchLocation;height=400;width="100%";set selectedLocation(n){n?this.preSelectedLocations=[n]:this.preSelectedLocations=[]}mapClick=new Q;locationSelected=new Q;searchResult=new Q;pinDragged=new Q;autocompleteResults=new Q;pinDeleted=new Q;selectionChanged=new Q;get mapHeight(){return typeof this.height=="number"?`${this.height}px`:this.height}get mapWidth(){return typeof this.width=="number"?`${this.width}px`:this.width}ngOnInit(){}ngOnDestroy(){}ngOnChanges(n){}onMapClick(n){this.mapClick.emit(n)}onLocationSelected(n){this.locationSelected.emit(n)}onSearchResult(n){this.searchResult.emit(n)}onPinDragged(n){this.pinDragged.emit(n)}onAutocompleteResults(n){this.autocompleteResults.emit(n)}onPinDeleted(n){this.pinDeleted.emit(n)}onSelectionChanged(n){this.selectionChanged.emit(n)}getMap(){return this.mapDirective?.getMap()}getDirective(){return this.mapDirective}fitBounds(){this.mapDirective?.fitBounds()}addPin(n){this.mapDirective?.addPin(n)}removePin(n){this.mapDirective?.removePin(n)}clearPins(){this.mapDirective?.clearPins()}search(n){this.mapDirective?.search(n)}toggleClickSelect(n){this.mapDirective?.toggleClickSelect(n)}isSearchEnabled(){return this.mapDirective?.isSearchEnabled()||!1}isClickSelectEnabled(){return this.mapDirective?.isClickSelectEnabled()||!1}switchTileLayer(n){this.mapDirective?.switchTileLayer(n)}getAvailableTileLayerTypes(){return this.mapDirective?.getAvailableTileLayerTypes()||[]}getCurrentTileLayerType(){return this.mapDirective?.getCurrentTileLayerType()}updatePinLocation(n,o){this.mapDirective?.updatePinLocation(n,o)}clearLocationCache(){this.mapDirective?.clearLocationCache()}getSelectedLocations(){return this.mapDirective?.getSelectedLocations()||[]}clearSelections(){this.mapDirective?.clearSelections()}addSelection(n,o){this.mapDirective?.addSelection(n,o)}deletePin(n){this.mapDirective&&this.mapDirective.deletePinByIndex(n,"user-action")}setPreSelectedLocations(n){this.preSelectedLocations=n}zoomToSelection(){this.mapDirective?.zoomToSelection()}searchForLocation(n){this.mapDirective&&this.mapDirective.searchForLocation(n)}static \u0275fac=function(o){return new(o||l)};static \u0275cmp=wi({type:l,selectors:[["ng-osm-map"]],viewQuery:function(o,s){if(o&1&&($e(Jt,7),$e(ul,7)),o&2){let d;qe(d=Ke())&&(s.mapDirective=d.first),qe(d=Ke())&&(s.mapContainer=d.first)}},inputs:{pins:"pins",zoomInto:"zoomInto",highlightAreas:"highlightAreas",mapOptions:"mapOptions",mapId:"mapId",preSelectedLocations:"preSelectedLocations",searchLocation:"searchLocation",height:"height",width:"width",selectedLocation:"selectedLocation"},outputs:{mapClick:"mapClick",locationSelected:"locationSelected",searchResult:"searchResult",pinDragged:"pinDragged",autocompleteResults:"autocompleteResults",pinDeleted:"pinDeleted",selectionChanged:"selectionChanged"},standalone:!0,features:[Ue,Oi],decls:2,vars:11,consts:[["mapContainer",""],["ngOsmMap","",3,"mapClick","locationSelected","searchResult","pinDragged","autocompleteResults","pinDeleted","selectionChanged","pins","zoomInto","highlightAreas","mapOptions","preSelectedLocations","searchLocation","mapId"]],template:function(o,s){if(o&1){let d=xe();h(0,"div",1,0),O("mapClick",function(g){return C(d),w(s.onMapClick(g))})("locationSelected",function(g){return C(d),w(s.onLocationSelected(g))})("searchResult",function(g){return C(d),w(s.onSearchResult(g))})("pinDragged",function(g){return C(d),w(s.onPinDragged(g))})("autocompleteResults",function(g){return C(d),w(s.onAutocompleteResults(g))})("pinDeleted",function(g){return C(d),w(s.onPinDeleted(g))})("selectionChanged",function(g){return C(d),w(s.onSelectionChanged(g))}),u()}o&2&&(Li("height",s.mapHeight)("width",s.mapWidth),E("pins",s.pins)("zoomInto",s.zoomInto)("highlightAreas",s.highlightAreas)("mapOptions",s.mapOptions)("preSelectedLocations",s.preSelectedLocations)("searchLocation",s.searchLocation)("mapId",s.mapId))},dependencies:[Jt],styles:["[_nghost-%COMP%]{display:block}div[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000001a}"]})};var ji=class l{constructor(n,o,s,d,m){this.elementRef=n;this.autocompleteService=o;this.ngZone=s;this.viewContainer=d;this.connectionService=m;this.inputElement=this.elementRef.nativeElement,this.searchInputId=`ng-osm-search-input-${Math.random().toString(36).substr(2,9)}`}enableAutocomplete=!0;debounceMs=300;maxResults=5;minQueryLength=2;placeholder="Search location...";autoFocus=!1;showSuggestionsDropdown=!0;dropdownContainer;customSearchTemplate;connectedMapId;search=new Q;suggestionSelected=new Q;autocompleteResults=new Q;inputChange=new Q;inputElement;searchSubject=new Ee;subscription;locationUpdateSubscription;autocompleteDropdown;customTemplateView;currentSuggestions=[];isLoading=!1;searchInputId;ngOnInit(){this.initializeSearchInput(),this.setupAutocomplete(),this.setupMapConnection()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe(),this.locationUpdateSubscription&&this.locationUpdateSubscription.unsubscribe(),this.searchSubject.complete(),this.cleanupAutocomplete(),this.connectionService.disconnectSearchInput(this.searchInputId)}ngOnChanges(n){n.placeholder&&this.inputElement&&(this.inputElement.placeholder=this.placeholder),n.customSearchTemplate&&this.updateCustomTemplate(),n.connectedMapId&&this.updateMapConnection()}initializeSearchInput(){this.inputElement.placeholder=this.placeholder,this.inputElement.type="text",this.autoFocus&&setTimeout(()=>this.inputElement.focus(),100),this.setupEventListeners()}setupEventListeners(){this.inputElement.addEventListener("input",this.handleInput.bind(this)),this.inputElement.addEventListener("keydown",this.handleKeydown.bind(this)),this.inputElement.addEventListener("blur",this.handleBlur.bind(this)),this.inputElement.addEventListener("focus",this.handleFocus.bind(this))}setupAutocomplete(){this.enableAutocomplete&&(this.showSuggestionsDropdown&&this.createAutocompleteDropdown(),this.subscription=this.searchSubject.pipe(yi(this.debounceMs),bi()).subscribe(n=>{this.performAutocompleteSearch(n)}))}handleInput(n){let s=n.target.value.trim();this.inputChange.emit(s),this.enableAutocomplete&&s.length>=this.minQueryLength?(this.isLoading=!0,this.updateCustomTemplate(),this.searchSubject.next(s)):this.hideSuggestions()}handleKeydown(n){switch(n.key){case"Enter":n.preventDefault();let o=this.inputElement.value.trim();o&&this.triggerSearch(o);break;case"Escape":this.hideSuggestions();break;case"ArrowDown":n.preventDefault(),this.navigateDropdown("down");break;case"ArrowUp":n.preventDefault(),this.navigateDropdown("up");break}}handleBlur(){setTimeout(()=>{this.hideSuggestions()},200)}handleFocus(){this.inputElement.value.trim().length>=this.minQueryLength&&this.currentSuggestions.length>0&&this.showSuggestions()}performAutocompleteSearch(n){this.autocompleteService.getSuggestions(n,this.maxResults).subscribe({next:o=>{this.isLoading=!1,this.currentSuggestions=o,this.customSearchTemplate?this.updateCustomTemplate():this.showSuggestionsDropdown&&this.showDefaultDropdown(o),this.ngZone.run(()=>{this.autocompleteResults.emit(o)})},error:o=>{this.isLoading=!1,console.error("Autocomplete search error:",o),this.updateCustomTemplate()}})}createAutocompleteDropdown(){if(this.customSearchTemplate){this.createCustomTemplateContainer();return}this.autocompleteDropdown=document.createElement("div"),this.autocompleteDropdown.className="ng-osm-autocomplete-dropdown",this.styleDropdown(this.autocompleteDropdown),this.getDropdownContainer().appendChild(this.autocompleteDropdown)}createCustomTemplateContainer(){}updateCustomTemplate(){if(!this.customSearchTemplate)return;this.customTemplateView&&(this.customTemplateView.destroy(),this.customTemplateView=void 0);let n={$implicit:this.currentSuggestions,query:this.inputElement.value.trim(),loading:this.isLoading,search:this.triggerSearch.bind(this),selectSuggestion:this.selectSuggestion.bind(this),clearSuggestions:this.hideSuggestions.bind(this)};this.customTemplateView=this.viewContainer.createEmbeddedView(this.customSearchTemplate,n),this.customTemplateView.detectChanges()}styleDropdown(n){n.style.cssText=`
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      border-top: none;
      border-radius: 0 0 4px 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      max-height: 200px;
      overflow-y: auto;
      z-index: 1000;
      display: none;
    `}getDropdownContainer(){if(this.dropdownContainer)if(typeof this.dropdownContainer=="string"){let o=document.querySelector(this.dropdownContainer);if(o)return o}else return this.dropdownContainer;let n=this.inputElement.parentElement;if(n&&getComputedStyle(n).position==="static"){let o=document.createElement("div");return o.style.position="relative",o.style.display="inline-block",n.insertBefore(o,this.inputElement),o.appendChild(this.inputElement),o}return n||document.body}showDefaultDropdown(n){if(!this.autocompleteDropdown||n.length===0){this.hideSuggestions();return}this.autocompleteDropdown.innerHTML="",n.forEach((o,s)=>{let d=this.createSuggestionItem(o,s);this.autocompleteDropdown.appendChild(d)}),this.showSuggestions()}createSuggestionItem(n,o){let s=document.createElement("div");return s.className="ng-osm-autocomplete-item",s.dataset.index=o.toString(),s.style.cssText=`
      padding: 8px 12px;
      cursor: pointer;
      border-bottom: 1px solid #eee;
      transition: background-color 0.2s;
    `,s.innerHTML=`
      <div style="font-weight: 500; margin-bottom: 2px;">${n.displayText}</div>
      <div style="font-size: 0.85em; color: #666; opacity: 0.8;">${n.fullDisplayName}</div>
    `,s.addEventListener("mouseenter",()=>{this.highlightItem(s)}),s.addEventListener("mouseleave",()=>{this.unhighlightItem(s)}),s.addEventListener("click",()=>{this.selectSuggestion(n)}),s}highlightItem(n){n.style.backgroundColor="#f5f5f5"}unhighlightItem(n){n.style.backgroundColor="white"}navigateDropdown(n){if(!this.autocompleteDropdown)return;let o=this.autocompleteDropdown.querySelectorAll(".ng-osm-autocomplete-item");if(o.length===0)return;let s=this.autocompleteDropdown.querySelector(".active"),d=0;if(s){let g=parseInt(s.dataset.index||"0");n==="down"?d=(g+1)%o.length:d=g===0?o.length-1:g-1}o.forEach(g=>g.classList.remove("active"));let m=o[d];m.classList.add("active"),this.highlightItem(m),m.scrollIntoView({block:"nearest"})}showSuggestions(){this.autocompleteDropdown&&(this.autocompleteDropdown.style.display="block")}hideSuggestions(){this.currentSuggestions=[],this.isLoading=!1,this.autocompleteDropdown&&(this.autocompleteDropdown.style.display="none"),this.customTemplateView&&this.updateCustomTemplate()}selectSuggestion(n){this.inputElement.value=n.displayText,this.hideSuggestions(),this.ngZone.run(()=>{this.suggestionSelected.emit(n),this.search.emit(n.displayText),this.connectedMapId&&this.connectionService.emitSuggestionSelectedEvent(n,this.searchInputId)})}triggerSearch(n){this.hideSuggestions(),this.ngZone.run(()=>{this.search.emit(n),this.connectedMapId&&this.connectionService.emitSearchEvent(n,this.searchInputId)})}cleanupAutocomplete(){this.autocompleteDropdown&&this.autocompleteDropdown.parentElement&&this.autocompleteDropdown.parentElement.removeChild(this.autocompleteDropdown),this.customTemplateView&&this.customTemplateView.destroy()}setupMapConnection(){this.connectedMapId&&this.connectionService.connectSearchInputToMap(this.searchInputId,this.connectedMapId),this.locationUpdateSubscription=this.connectionService.locationSelectedEvents$.pipe(ir(n=>this.connectedMapId?n.mapId===this.connectedMapId:!1)).subscribe(n=>{this.setValue(n.displayValue)})}updateMapConnection(){this.connectedMapId?this.connectionService.connectSearchInputToMap(this.searchInputId,this.connectedMapId):this.connectionService.disconnectSearchInput(this.searchInputId)}setValue(n){this.inputElement.value=n,this.inputChange.emit(n)}getValue(){return this.inputElement.value}focus(){this.inputElement.focus()}blur(){this.inputElement.blur()}clear(){this.inputElement.value="",this.hideSuggestions(),this.inputChange.emit("")}getSuggestions(){return[...this.currentSuggestions]}static \u0275fac=function(o){return new(o||l)(W(Be),W(Mt),W(Si),W(Mi),W(Pt))};static \u0275dir=ge({type:l,selectors:[["","ngOsmSearchInput",""]],inputs:{enableAutocomplete:"enableAutocomplete",debounceMs:"debounceMs",maxResults:"maxResults",minQueryLength:"minQueryLength",placeholder:"placeholder",autoFocus:"autoFocus",showSuggestionsDropdown:"showSuggestionsDropdown",dropdownContainer:"dropdownContainer",customSearchTemplate:"customSearchTemplate",connectedMapId:"connectedMapId"},outputs:{search:"search",suggestionSelected:"suggestionSelected",autocompleteResults:"autocompleteResults",inputChange:"inputChange"},exportAs:["ngOsmSearchInput"],standalone:!0,features:[Ue]})};var hl=["customPopupTemplate"],pl=["deleteablePopupTemplate"],ml=["customAutocompleteTemplate"];function fl(l,n){if(l&1&&(h(0,"div",151)(1,"strong"),p(2),u(),p(3),h(4,"small"),p(5),hr(6,"date"),u()()),l&2){let o=n.$implicit;y(2),$("",o.type,":"),y(),$(" ",o.message," "),y(2),de(pr(6,3,o.timestamp,"HH:mm:ss"))}}function gl(l,n){l&1&&(h(0,"div",152),p(1," No search events yet. Try using the search inputs above! "),u())}function _l(l,n){if(l&1&&(h(0,"div",153),p(1),u()),l&2){let o=q();y(),$(" ... and ",o.searchEventLog.length-10," more events ")}}function vl(l,n){if(l&1){let o=xe();h(0,"div",154)(1,"label",155),p(2),u(),h(3,"input",156),O("input",function(d){C(o);let m=q();return w(m.onZoomLevelChange(d))}),u()()}if(l&2){let o=q();y(2),$("Zoom Level (",o.autoZoomLevel,"):"),y(),E("value",o.autoZoomLevel)}}function yl(l,n){if(l&1){let o=xe();h(0,"div",157)(1,"button",158),O("click",function(){C(o);let d=q();return w(d.toggleAnimatedZoom())}),p(2),u()()}if(l&2){let o=q();y(),Re("btn-success",o.isAnimatedZoomEnabled())("btn-outline-success",!o.isAnimatedZoomEnabled()),y(),$(" ",o.isAnimatedZoomEnabled()?"\u{1F3AC} Animated":"\u26A1 Instant"," Zoom ")}}function bl(l,n){if(l&1&&(h(0,"span"),p(1),u()),l&2){let o=q();y(),$(" (",o.getPreSelectedLocationNames(),") ")}}function Cl(l,n){if(l&1){let o=xe();h(0,"div",159)(1,"button",158),O("click",function(){C(o);let d=q();return w(d.toggleScrollInReadonlyMode())}),p(2),u()()}if(l&2){let o=q();y(),Re("btn-info",o.isScrollInReadonlyEnabled())("btn-outline-secondary",!o.isScrollInReadonlyEnabled()),y(),$(" ",o.isScrollInReadonlyEnabled()?"\u{1F5B1}\uFE0F Scroll Zoom Enabled":"\u{1F5B1}\uFE0F Enable Scroll Zoom"," ")}}function wl(l,n){l&1&&(h(0,"span",160),p(1," Scroll Zoom Allowed "),u())}function xl(l,n){if(l&1){let o=xe();h(0,"button",168),O("click",function(){let d=C(o).$implicit,m=q(2);return w(m.setBoundaryPreset(d))}),p(1),u()}if(l&2){let o=n.$implicit;y(),$(" ",o.name," ")}}function Sl(l,n){if(l&1){let o=xe();h(0,"div",161)(1,"h4"),p(2,"Quick Presets:"),u(),h(3,"div",162),Y(4,xl,2,1,"button",163),u(),h(5,"h4"),p(6,"Custom Bounds:"),u(),h(7,"div",164)(8,"div",165)(9,"label"),p(10,"North-East:"),u(),h(11,"input",166),O("input",function(d){C(o);let m=q();return w(m.onBoundInputChange(d,"northEast.lat"))}),u(),h(12,"input",167),O("input",function(d){C(o);let m=q();return w(m.onBoundInputChange(d,"northEast.lng"))}),u()(),h(13,"div",165)(14,"label"),p(15,"South-West:"),u(),h(16,"input",166),O("input",function(d){C(o);let m=q();return w(m.onBoundInputChange(d,"southWest.lat"))}),u(),h(17,"input",167),O("input",function(d){C(o);let m=q();return w(m.onBoundInputChange(d,"southWest.lng"))}),u()()()()}if(l&2){let o=q();y(4),E("ngForOf",o.boundaryPresets),y(7),E("value",o.customBounds.northEast.lat),y(),E("value",o.customBounds.northEast.lng),y(4),E("value",o.customBounds.southWest.lat),y(),E("value",o.customBounds.southWest.lng)}}function Ml(l,n){if(l&1){let o=xe();h(0,"button",169),O("click",function(){let d=C(o).$implicit,m=q();return w(m.switchTileLayer(d.type))}),p(1),u()}if(l&2){let o=n.$implicit,s=q();Re("active",s.currentTileLayer===o.type),E("title",o.description),y(),$(" ",o.name," ")}}function Pl(l,n){if(l&1&&(h(0,"div",170)(1,"small"),p(2),u()()),l&2){let o=q();y(2),Ze("\u{1F517} Tracked pin: #",o.selectedLocationPinIndex+1," (",o.pins[o.selectedLocationPinIndex].title||"Selected Location",")")}}function Ll(l,n){if(l&1&&(lr(0),p(1),dr()),l&2){let o=q().$implicit,s=q();y(),$(" - ",s.getTruncatedAddress(o.addressInfo),"")}}function Ol(l,n){if(l&1&&(h(0,"div",171)(1,"small"),p(2),Y(3,Ll,2,1,"ng-container",49),u()()),l&2){let o=n.$implicit,s=n.index,d=q();y(2),Tn("",s+1,". Lat: ",o.coordinates.latitude.toFixed(4),", Lng: ",o.coordinates.longitude.toFixed(4)," "),y(),E("ngIf",d.getTruncatedAddress(o.addressInfo))}}function Dl(l,n){if(l&1&&(h(0,"div",170)(1,"small"),p(2),u()()),l&2){let o=q();y(2),Ze("\u{1F517} Tracked pin: #",o.searchResultPinIndex+1," (",o.pins[o.searchResultPinIndex].title||"Search Result",")")}}function El(l,n){if(l&1&&(h(0,"div",171)(1,"small"),p(2),u()()),l&2){let o=n.$implicit,s=n.index;y(2),Ze("",s+1,". ",o.displayText,"")}}function Tl(l,n){if(l&1&&(h(0,"div",171)(1,"small"),p(2),u()()),l&2){let o=n.$implicit,s=n.index;y(2),ur("",s+1,". ",o.originalPin.title||"Pin"," moved to ",o.newCoordinates.latitude.toFixed(4),", ",o.newCoordinates.longitude.toFixed(4)," ")}}function Al(l,n){if(l&1&&(h(0,"div",171)(1,"small"),p(2),u()()),l&2){let o=n.$implicit,s=n.index;y(2),Tn("",s+1,". ",o.deletedPin.title||"Pin"," (",o.reason,")")}}function Il(l,n){l&1&&(h(0,"span"),p(1,"\u{1F504} Geocoding..."),u())}function kl(l,n){l&1&&(h(0,"span"),p(1,"\u{1F5FA}\uFE0F Geocode & Show on Map"),u())}function Vl(l,n){if(l&1&&(h(0,"div",175)(1,"p")(2,"strong"),p(3,"\u{1F4CD} Coordinates:"),u(),p(4),u(),h(5,"p")(6,"strong"),p(7,"\u{1F4CB} Built Address:"),u(),p(8),u()()),l&2){let o=q(2);y(4),Ze(" ",o.builtAddressLocation.latitude==null?null:o.builtAddressLocation.latitude.toFixed(6),", ",o.builtAddressLocation.longitude==null?null:o.builtAddressLocation.longitude.toFixed(6),""),y(4),$(" ",o.getBuiltAddress(),"")}}function Fl(l,n){if(l&1&&(h(0,"div",172)(1,"div",173)(2,"strong"),p(3),u(),p(4),u(),Y(5,Vl,9,3,"div",174),u()),l&2){let o=q();y(),E("ngClass",o.addressGeocodingStatus.type),y(2),de(o.addressGeocodingStatus.type==="success"?"\u2705":"\u274C"),y(),$(" ",o.addressGeocodingStatus.message," "),y(),E("ngIf",o.builtAddressLocation)}}function Nl(l,n){if(l&1&&(h(0,"p")(1,"strong"),p(2,"Latest Address:"),u(),p(3),u()),l&2){let o,s=q();y(3),$(" ",((o=s.getLatestAddressPin())==null?null:o.title)||"N/A","")}}function zl(l,n){if(l&1&&(h(0,"li"),p(1),u()),l&2){let o=n.$implicit;y(),de(o)}}function Bl(l,n){if(l&1&&(h(0,"div",183)(1,"div",184)(2,"strong"),p(3,"\u{1F465} Population:"),u(),p(4),u(),h(5,"div",184)(6,"strong"),p(7,"\u{1F4C5} Established:"),u(),p(8),u(),h(9,"div",184)(10,"strong"),p(11,"\u{1F3DB}\uFE0F Famous Landmarks:"),u(),h(12,"ul",185),Y(13,zl,2,1,"li",186),u()()()),l&2){let o=q().pin;y(4),$(" ",o.data.cityInfo.population," "),y(4),$(" ",o.data.cityInfo.established," "),y(5),E("ngForOf",o.data.cityInfo.landmarks)}}function Rl(l,n){if(l&1&&(h(0,"div",176)(1,"div",177)(2,"h3"),p(3),u(),h(4,"span",178),p(5),u()(),h(6,"div",179),Y(7,Bl,14,3,"div",180),h(8,"div",181)(9,"small",182),p(10),u()()()()),l&2){let o=n.$implicit,s=n.pin,d=n.pinIndex;y(3),$("\u{1F31F} ",s.title,""),y(2),Ze("",o.latitude==null?null:o.latitude.toFixed(4),", ",o.longitude==null?null:o.longitude.toFixed(4),""),y(2),E("ngIf",s.data==null?null:s.data.cityInfo),y(3),Ze("Pin #",d," \u2022 ",s.draggable?"Draggable":"Fixed","")}}function Zl(l,n){if(l&1&&(h(0,"span",199),p(1),u()),l&2){let o=n.$implicit;y(),$(" ",o," ")}}function Hl(l,n){if(l&1&&(h(0,"div",183)(1,"div",192)(2,"div",193)(3,"div",194),p(4,"Population"),u(),h(5,"div",195),p(6),u()(),h(7,"div",193)(8,"div",194),p(9,"Founded"),u(),h(10,"div",195),p(11),u()()(),h(12,"div",196)(13,"h4"),p(14,"Famous Landmarks:"),u(),h(15,"div",197),Y(16,Zl,2,1,"span",198),u()()()),l&2){let o=q().pin;y(6),de(o.data.cityInfo.population),y(5),de(o.data.cityInfo.established),y(5),E("ngForOf",o.data.cityInfo.landmarks)}}function jl(l,n){if(l&1){let o=xe();h(0,"div",187)(1,"div",177)(2,"h3"),p(3),u(),h(4,"button",188),p(5,"\xD7"),u()(),h(6,"div",179)(7,"div",189)(8,"p")(9,"strong"),p(10,"\u{1F4CD} Location:"),u(),p(11),u(),h(12,"p")(13,"strong"),p(14,"\u{1F3A8} Color:"),u(),h(15,"span",190),p(16),u()()(),Y(17,Hl,17,3,"div",180),h(18,"div",181)(19,"button",191),O("click",function(){let d=C(o).deletePin;return w(d())}),p(20," \u{1F5D1}\uFE0F Delete This Pin "),u(),h(21,"small",182),p(22,"Template-based popup with custom delete action"),u()()()()}if(l&2){let o=n.$implicit,s=n.pin;y(3),$("\u{1F5D1}\uFE0F ",s.title,""),y(8),Ze(" ",o.latitude==null?null:o.latitude.toFixed(6),", ",o.longitude==null?null:o.longitude.toFixed(6),""),y(4),Li("background-color",s.color),y(),de(s.color),y(),E("ngIf",s.data==null?null:s.data.cityInfo)}}function Wl(l,n){l&1&&(h(0,"div",204),rt(1,"div",205),h(2,"span"),p(3,"Searching..."),u()())}function Gl(l,n){if(l&1){let o=xe();h(0,"div",206),O("click",function(){let d=C(o).$implicit,m=q(2).selectSuggestion;return w(m(d))}),h(1,"div",207),p(2),u(),h(3,"div",208),p(4),u(),h(5,"div",209),p(6),u()()}if(l&2){let o=n.$implicit;y(2),de(o.displayText),y(2),de(o.fullDisplayName),y(2),Ze(" ",o.coordinates.latitude.toFixed(4),", ",o.coordinates.longitude.toFixed(4)," ")}}function Ul(l,n){if(l&1&&(h(0,"div",201),Y(1,Wl,4,0,"div",202)(2,Gl,7,4,"div",203),u()),l&2){let o=q(),s=o.$implicit,d=o.loading;y(),E("ngIf",d),y(),E("ngForOf",s)}}function $l(l,n){if(l&1&&Y(0,Ul,3,2,"div",200),l&2){let o=n.$implicit,s=n.loading;E("ngIf",o.length>0||s)}}var Xr=class l{mapComponent;customPopupTemplate;deleteablePopupTemplate;customAutocompleteTemplate;title="ngmahesh";currentTileLayer="openstreetmap";mapId="main-demo-map";searchEventLog=[];tileLayerOptions=[{type:"openstreetmap",name:"Street Map",description:"Standard OpenStreetMap view"},{type:"satellite",name:"Satellite",description:"Satellite imagery view"},{type:"terrain",name:"Terrain",description:"Topographic terrain view"},{type:"dark",name:"Dark",description:"Dark theme map"},{type:"light",name:"Light",description:"Light theme map"},{type:"watercolor",name:"Watercolor",description:"Artistic watercolor style"},{type:"toner",name:"Toner",description:"High contrast black and white"}];pins=[{location:{latitude:40.7128,longitude:-74.006},color:"#ff0000",title:"New York City",content:"<h3>\u{1F5FD} New York City</h3><p>The Big Apple - Most populous city in the US</p>",draggable:!0},{location:{address:"1600 Amphitheatre Parkway",city:"Mountain View",state:"CA",country:"USA"},color:"#00ff00",title:"Google HQ",content:"<h3>\u{1F3E2} Google Headquarters</h3><p>Home of the search engine</p>",draggable:!0},{location:{city:"Paris",country:"France"},color:"#0000ff",title:"Paris",content:"<h3>\u{1F5FC} Paris</h3><p>City of Light</p>",draggable:!1},{location:{latitude:35.6762,longitude:139.6503},color:"#ff00ff",title:"Tokyo",content:"<h3>\u{1F3EF} Tokyo</h3><p>Capital of Japan</p>",draggable:!0}];centerLocation={latitude:40.7128,longitude:-74.006};highlightAreas=[{boundary:[{latitude:40.7589,longitude:-73.9851},{latitude:40.7505,longitude:-73.9934},{latitude:40.7434,longitude:-73.9857},{latitude:40.7518,longitude:-73.9774}],borderColor:"#ff0000",fillColor:"#ff0000",fillOpacity:.2,borderWidth:3,title:"Times Square Area"}];mapOptions={zoom:2,height:400,zoomControl:!0,scrollWheelZoom:!0,defaultPinsDraggable:!1,tileLayerType:"openstreetmap",enableLayerControl:!0,search:{enabled:!0,placeholder:"Search for locations...",autoZoom:!0,searchZoom:15,addPinOnResult:!0,searchResultPin:{color:"#ff6b6b",title:"Search Result",draggable:!0},autocomplete:{enabled:!0,debounceMs:300,maxResults:5,minQueryLength:2}},enableClickSelect:!0,selection:{multiSelect:!1,maxSelections:5,createPinsForSelections:!0,selectionPin:{color:"#9c27b0",title:"Selected Location",draggable:!0},showDeleteButton:!0,allowPinDeletion:!0,autoZoomToSelection:!1,selectionZoom:15,animatedZoom:!0}};lastClickedLocation=null;lastSearchResult=null;clickHistory=[];dragHistory=[];autocompleteHistory=[];selectedLocations=[];deleteHistory=[];demoLocations=[{name:"New York City",location:{latitude:40.7128,longitude:-74.006}},{name:"London",location:{latitude:51.5074,longitude:-.1278}},{name:"Tokyo",location:{latitude:35.6762,longitude:139.6503}},{name:"Paris",location:{latitude:48.8566,longitude:2.3522}},{name:"Sydney",location:{latitude:-33.8688,longitude:151.2093}}];boundaryMode="none";noWrapEnabled=!1;customBounds={northEast:{lat:60,lng:20},southWest:{lat:35,lng:-20}};boundaryPresets=[{name:"Europe",bounds:{northEast:{lat:70,lng:40},southWest:{lat:35,lng:-20}}},{name:"North America",bounds:{northEast:{lat:72,lng:-50},southWest:{lat:15,lng:-170}}},{name:"Asia Pacific",bounds:{northEast:{lat:60,lng:180},southWest:{lat:-50,lng:60}}}];searchResultPinIndex=-1;selectedLocationPinIndex=-1;addressMapId="address-demo-map";addressPins=[];addressMapCenter={latitude:40.7128,longitude:-74.006};addressMapOptions={zoom:2,height:350,zoomControl:!0,scrollWheelZoom:!0,defaultPinsDraggable:!0,tileLayerType:"openstreetmap",enableLayerControl:!1,search:{enabled:!1,placeholder:"",autoZoom:!1,searchZoom:15,addPinOnResult:!1},enableClickSelect:!0,selection:{multiSelect:!1,maxSelections:1,createPinsForSelections:!0,selectionPin:{color:"#28a745",title:"Address Location",draggable:!0},showDeleteButton:!0,allowPinDeletion:!0,autoZoomToSelection:!0,selectionZoom:15,animatedZoom:!0}};addressComponents={addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:""};builtAddressLocation=null;addressGeocodingStatus=null;isGeocodingAddress=!1;searchLocation=null;sampleAddresses={us:{addressLine1:"123 Main Street",addressLine2:"Apt 4B",city:"New York",state:"NY",postalCode:"10001",country:"United States"},uk:{addressLine1:"10 Downing Street",addressLine2:"Westminster",city:"London",state:"",postalCode:"SW1A 2AA",country:"United Kingdom"},ca:{addressLine1:"24 Sussex Drive",addressLine2:"",city:"Ottawa",state:"ON",postalCode:"K1M 1M4",country:"Canada"},de:{addressLine1:"Unter den Linden 77",addressLine2:"",city:"Berlin",state:"",postalCode:"10117",country:"Germany"},jp:{addressLine1:"1-1 Chiyoda",addressLine2:"",city:"Tokyo",state:"",postalCode:"100-8111",country:"Japan"},au:{addressLine1:"1 Macquarie Street",addressLine2:"",city:"Sydney",state:"NSW",postalCode:"2000",country:"Australia"}};addRandomPin(){let n=["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"],o=n[Math.floor(Math.random()*n.length)],s={location:{latitude:(Math.random()-.5)*180,longitude:(Math.random()-.5)*360},color:o,title:"Random Pin",content:`<h3>\u{1F4CD} Random Location</h3><p>Generated at ${new Date().toLocaleTimeString()}</p>`};this.searchResultPinIndex===this.pins.length-1&&(this.searchResultPinIndex=-1),this.selectedLocationPinIndex===this.pins.length-1&&(this.selectedLocationPinIndex=-1),this.pins=[...this.pins,s]}clearPins(){this.pins=[],this.searchResultPinIndex=-1,this.selectedLocationPinIndex=-1}zoomToNewYork(){this.centerLocation={latitude:40.7128,longitude:-74.006},this.mapOptions=X(Z({},this.mapOptions),{zoom:12})}zoomToWorld(){this.centerLocation={latitude:0,longitude:0},this.mapOptions=X(Z({},this.mapOptions),{zoom:2})}setPreSelectedLocation(n){let o=this.demoLocations.find(s=>s.name===n);o&&this.mapComponent.searchForLocation(o.location)}setMultiplePreSelectedLocations(){this.isMultiSelectEnabled()||this.toggleMultiSelect(),this.demoLocations.slice(0,3).forEach((n,o)=>{setTimeout(()=>{this.mapComponent.searchForLocation(n.location)},o*100)})}clearPreSelectedLocations(){this.clearSelections()}getPreSelectedLocationNames(){return this.selectedLocations.map((n,o)=>this.demoLocations.find(d=>Math.abs(d.location.latitude-n.coordinates.latitude)<.001&&Math.abs(d.location.longitude-n.coordinates.longitude)<.001)?.name||`Selection ${o+1}`).join(", ")}toggleReadonlyMode(){let n=this.mapOptions.readonly||!1;this.mapOptions=X(Z({},this.mapOptions),{readonly:!n})}toggleScrollInReadonlyMode(){let n=this.mapOptions.scrollWheelZoomInReadonly||!1;this.mapOptions=X(Z({},this.mapOptions),{scrollWheelZoomInReadonly:!n})}isScrollInReadonlyEnabled(){return this.mapOptions.scrollWheelZoomInReadonly||!1}isReadonlyMode(){return this.mapOptions.readonly||!1}getReadonlyModeDescription(){return this.isReadonlyMode()?"Readonly Mode: All map interactions disabled (zoom, pan, click, drag, search)":"Interactive Mode: Full map interactions enabled"}onMapClick(n){console.log("Map clicked:",n),this.lastClickedLocation=n}onLocationSelected(n){console.log("Location selected with address info:",n),this.lastClickedLocation=n,this.clickHistory=[n,...this.clickHistory.slice(0,4)]}onSearchResult(n){console.log("Search result:",n),this.lastSearchResult=n,this.mapOptions.search?.addPinOnResult&&(this.selectedLocationPinIndex===this.pins.length-1&&(this.selectedLocationPinIndex=-1),this.searchResultPinIndex=this.pins.length)}onPinDragged(n){console.log("Pin dragged:",n),this.dragHistory=[n,...this.dragHistory.slice(0,4)],n.pinIndex>=0&&n.pinIndex<this.pins.length&&(this.pins[n.pinIndex].location={latitude:n.newCoordinates.latitude,longitude:n.newCoordinates.longitude},n.pinIndex===this.searchResultPinIndex&&this.lastSearchResult&&(console.log("Updating search result info after pin drag"),this.lastSearchResult.coordinates={latitude:n.newCoordinates.latitude,longitude:n.newCoordinates.longitude},n.newAddressInfo?.display_name?(this.lastSearchResult.displayName=n.newAddressInfo.display_name,this.lastSearchResult.address=n.newAddressInfo.address):this.lastSearchResult.displayName=`${n.newCoordinates.latitude.toFixed(6)}, ${n.newCoordinates.longitude.toFixed(6)}`),n.pinIndex===this.selectedLocationPinIndex&&this.lastClickedLocation&&(console.log("Updating selected location info after pin drag"),this.lastClickedLocation.coordinates={latitude:n.newCoordinates.latitude,longitude:n.newCoordinates.longitude},n.newAddressInfo?this.lastClickedLocation.addressInfo=n.newAddressInfo:this.lastClickedLocation.addressInfo=void 0))}onAutocompleteResults(n){console.log("Autocomplete suggestions:",n),this.autocompleteHistory=n}onPinDeleted(n){console.log("Pin deleted:",n),this.deleteHistory=[n,...this.deleteHistory.slice(0,4)],this.searchResultPinIndex>n.pinIndex?this.searchResultPinIndex--:this.searchResultPinIndex===n.pinIndex&&(this.searchResultPinIndex=-1),this.selectedLocationPinIndex>n.pinIndex?this.selectedLocationPinIndex--:this.selectedLocationPinIndex===n.pinIndex&&(this.selectedLocationPinIndex=-1)}onSelectionChanged(n){console.log("Selections changed:",n),this.selectedLocations=n}getSelectedLocationInfo(){if(!this.lastClickedLocation)return"No location selected";let n=this.lastClickedLocation.coordinates,o=this.lastClickedLocation.addressInfo?.display_name;return`Lat: ${n.latitude.toFixed(6)}, Lng: ${n.longitude.toFixed(6)}${o?`
Address: `+o:""}`}getSearchResultInfo(){if(!this.lastSearchResult)return"No search performed";let n=this.lastSearchResult.coordinates;return`${this.lastSearchResult.displayName}
Lat: ${n.latitude.toFixed(6)}, Lng: ${n.longitude.toFixed(6)}`}getDragHistoryInfo(){if(this.dragHistory.length===0)return"No pins dragged yet";let n=this.dragHistory[0],o=n.newCoordinates;return`${n.originalPin.title||"Unknown Pin"} moved to:
Lat: ${o.latitude.toFixed(6)}, Lng: ${o.longitude.toFixed(6)}${n.newAddressInfo?.display_name?`
Address: `+n.newAddressInfo.display_name:""}`}getAutocompleteInfo(){return this.autocompleteHistory.length===0?"No autocomplete suggestions yet":`${this.autocompleteHistory.length} suggestions:
${this.autocompleteHistory.slice(0,3).map(n=>n.displayText).join(`
`)}`}getTruncatedAddress(n){return n?.display_name?n.display_name.substring(0,50)+"...":""}switchTileLayer(n){this.currentTileLayer=n,this.mapComponent?.switchTileLayer(n)}getCurrentTileLayerName(){return this.tileLayerOptions.find(o=>o.type===this.currentTileLayer)?.name||"Unknown"}movePinToLondon(){if(this.pins.length>0){let n={country:"United Kingdom",city:"London"};this.mapComponent?.updatePinLocation(0,n),this.pins[0].location=n,this.pins[0].title="Moved to London",this.pins[0].content="<h3>\u{1F1EC}\u{1F1E7} London</h3><p>Pin moved programmatically!</p>"}}updateExternalSearchInput(n){try{let o=document.querySelector("#external-search-input");if(o){o.value=n;let s=new Event("input",{bubbles:!0,cancelable:!0});o.dispatchEvent(s),console.log("External search input updated with value:",n)}else console.warn("External search input element not found")}catch(o){console.error("Error updating external search input:",o)}}clearSelections(){this.mapComponent?.clearSelections()}toggleMultiSelect(){let n=this.mapOptions.selection?.multiSelect||!1;this.mapOptions=X(Z({},this.mapOptions),{selection:X(Z({},this.mapOptions.selection),{multiSelect:!n})})}isMultiSelectEnabled(){return this.mapOptions.selection?.multiSelect||!1}toggleAutoZoomToSelection(){let n=this.mapOptions.selection?.autoZoomToSelection||!1;this.mapOptions=X(Z({},this.mapOptions),{selection:X(Z({},this.mapOptions.selection),{autoZoomToSelection:!n})})}isAutoZoomToSelectionEnabled(){return this.mapOptions.selection?.autoZoomToSelection||!1}updateSelectionZoomLevel(n){this.mapOptions=X(Z({},this.mapOptions),{selection:X(Z({},this.mapOptions.selection),{selectionZoom:n})})}getSelectionZoomLevel(){return this.mapOptions.selection?.selectionZoom||15}toggleAnimatedZoom(){let n=this.mapOptions.selection?.animatedZoom!==!1;this.mapOptions=X(Z({},this.mapOptions),{selection:X(Z({},this.mapOptions.selection),{animatedZoom:!n})})}isAnimatedZoomEnabled(){return this.mapOptions.selection?.animatedZoom!==!1}getAutoZoomDescription(){return this.isAutoZoomToSelectionEnabled()?`Auto-zoom enabled: Zoom to level ${this.getSelectionZoomLevel()} with ${this.isAnimatedZoomEnabled()?"animated":"instant"} transition`:"Auto-zoom disabled: Manual zoom control only"}testTemplatePopups(){console.log("Testing template popups..."),console.log("Custom popup template:",this.customPopupTemplate),console.log("Deleteable popup template:",this.deleteablePopupTemplate),console.log("Current pins with templates:",this.pins.filter(n=>n.popupTemplate))}ngAfterViewInit(){this.addTemplatePins()}addTemplatePins(){let n=[{location:{latitude:51.5074,longitude:-.1278},color:"#e91e63",title:"London - Custom Template",popupTemplate:this.customPopupTemplate,draggable:!0,data:{cityInfo:{population:"9 million",established:"43 AD",landmarks:["Big Ben","London Eye","Tower Bridge"]}}},{location:{latitude:52.52,longitude:13.405},color:"#9c27b0",title:"Berlin - Deleteable Template",popupTemplate:this.deleteablePopupTemplate,draggable:!0,data:{cityInfo:{population:"3.7 million",established:"13th century",landmarks:["Brandenburg Gate","Berlin Wall","Museum Island"]}}}];this.pins=[...this.pins,...n]}updatePinLocation(n,o){this.mapComponent?.updatePinLocation(n,o)}clearLocationCache(){this.mapComponent?.clearLocationCache()}clearCache(){this.mapComponent?.clearLocationCache(),console.log("Location cache cleared")}addSinglePin(){let n=[{name:"Rome",location:{city:"Rome",country:"Italy"},color:"#ff6b35"},{name:"Barcelona",location:{city:"Barcelona",country:"Spain"},color:"#f7931e"},{name:"Amsterdam",location:{city:"Amsterdam",country:"Netherlands"},color:"#6a994e"},{name:"Prague",location:{city:"Prague",country:"Czech Republic"},color:"#bc6c25"},{name:"Vienna",location:{city:"Vienna",country:"Austria"},color:"#8b5cf6"}],o=n[Math.floor(Math.random()*n.length)],s={location:o.location,color:o.color,title:o.name,content:`<h3>\u{1F4CD} ${o.name}</h3><p>Added via efficient update!</p>`,draggable:!0};this.pins=[...this.pins,s],console.log(`Added ${o.name} pin - should only create 1 new marker`)}onSearchInputSearch(n){this.addToSearchEventLog("Search",`Searching for: "${n}"`)}onSearchInputSuggestionSelected(n){this.addToSearchEventLog("Suggestion Selected",`Selected: ${n.displayText}`)}onSearchInputAutocompleteResults(n){this.addToSearchEventLog("Autocomplete",`Got ${n.length} suggestions`)}addToSearchEventLog(n,o){this.searchEventLog.unshift({type:n,message:o,timestamp:new Date}),this.searchEventLog.length>10&&(this.searchEventLog=this.searchEventLog.slice(0,10))}setBoundaryMode(n){this.boundaryMode=n,this.updateMapBoundaries()}toggleNoWrap(){this.noWrapEnabled=!this.noWrapEnabled,this.updateMapBoundaries()}setBoundaryPreset(n){this.customBounds=n.bounds,this.boundaryMode="custom",this.updateMapBoundaries()}updateCustomBounds(){this.boundaryMode==="custom"&&this.updateMapBoundaries()}updateCustomBoundValue(n,o){let s=parseFloat(o);if(!isNaN(s)){let d=n.split(".");d.length===3&&(this.customBounds[d[0]][d[1]]=s,this.updateCustomBounds())}}onBoundInputChange(n,o){let s=n.target;s&&s.value&&this.updateCustomBoundValue(o,s.value)}updateMapBoundaries(){this.mapOptions.enableWorldBounds=this.boundaryMode==="world",this.mapOptions.noWrap=this.noWrapEnabled,this.boundaryMode==="custom"?this.mapOptions.mapBounds={northEast:[this.customBounds.northEast.lat,this.customBounds.northEast.lng],southWest:[this.customBounds.southWest.lat,this.customBounds.southWest.lng]}:delete this.mapOptions.mapBounds,this.mapOptions=Z({},this.mapOptions)}getBoundaryDescription(){switch(this.boundaryMode){case"world":return"World boundaries enabled - prevents panning outside world bounds (-85\xB0 to 85\xB0 latitude)";case"custom":return`Custom boundaries: ${this.customBounds.southWest.lat}\xB0,${this.customBounds.southWest.lng}\xB0 to ${this.customBounds.northEast.lat}\xB0,${this.customBounds.northEast.lng}\xB0`;default:return"No boundary restrictions - unlimited panning and scrolling"}}getNoWrapDescription(){return this.noWrapEnabled?"No world wrapping - prevents multiple copies of the world map":"World wrapping enabled - shows multiple copies of the world horizontally"}get autoZoomToSelection(){return this.isAutoZoomToSelectionEnabled()}get autoZoomLevel(){return this.getSelectionZoomLevel()}onZoomLevelChange(n){let o=n.target,s=parseInt(o.value,10);this.updateSelectionZoomLevel(s)}manualZoomToFirstSelection(){this.selectedLocations.length!==0&&this.mapComponent&&this.mapComponent.zoomToSelection()}getSelectionModeDescription(){let n=this.isMultiSelectEnabled(),o=this.mapOptions.selection?.maxSelections||0;return n?o>0?`Multi-selection enabled (max ${o})`:"Multi-selection enabled (unlimited)":"Single selection mode"}getSelectedLocationsInfo(){return this.selectedLocations.length===0?"No locations selected":this.selectedLocations.map((n,o)=>{let s=`${n.coordinates.latitude.toFixed(4)}, ${n.coordinates.longitude.toFixed(4)}`,d=n.addressInfo?.display_name||"No address available";return`${o+1}. ${s}
   ${d}`}).join(`
`)}getDeleteHistoryInfo(){return this.deleteHistory.length===0?"No deletions recorded":this.deleteHistory.slice(-5).map((n,o)=>{let s=n.deletedPin.location,d=s.latitude&&s.longitude?`${s.latitude.toFixed(4)}, ${s.longitude.toFixed(4)}`:s.address||"Unknown location";return`${o+1}. ${n.deletedPin.title||"Untitled"} (${d}) - ${n.reason}`}).join(`
`)}getBuiltAddress(){let n=[];this.addressComponents.addressLine1&&n.push(this.addressComponents.addressLine1),this.addressComponents.addressLine2&&n.push(this.addressComponents.addressLine2);let o=[];return this.addressComponents.city&&o.push(this.addressComponents.city),this.addressComponents.state&&o.push(this.addressComponents.state),this.addressComponents.postalCode&&o.push(this.addressComponents.postalCode),o.length>0&&n.push(o.join(", ")),this.addressComponents.country&&n.push(this.addressComponents.country),n.join(", ")}onAddressComponentChange(){this.addressGeocodingStatus=null,this.builtAddressLocation=null}geocodeBuiltAddress(){return tr(this,null,function*(){let n=this.getBuiltAddress();if(!n){this.addressGeocodingStatus={type:"error",message:"\u274C Please fill in at least some address fields before geocoding."};return}this.isGeocodingAddress=!0,this.addressGeocodingStatus=null;try{let o={address:this.addressComponents.addressLine1,addressLine2:this.addressComponents.addressLine2,city:this.addressComponents.city,state:this.addressComponents.state,zipCode:this.addressComponents.postalCode,country:this.addressComponents.country},s=yield fetch(`https://nominatim.openstreetmap.org/search?format=json&limit=3&q=${encodeURIComponent(n)}`);if(!s.ok)throw this.searchForAddressLocation(o),new Error(`HTTP Error: ${s.status} - ${s.statusText}`);let d=yield s.json();if(d&&d.length>0){let m=d[0],g=parseFloat(m.lat),x=parseFloat(m.lon);if(isNaN(g)||isNaN(x))throw this.searchForAddressLocation(o),new Error("Invalid coordinates returned from geocoding service");o.latitude=g,o.longitude=x,this.builtAddressLocation={latitude:g,longitude:x},this.searchForAddressLocation(o),this.addressGeocodingStatus={type:"success",message:`\u2705 Address successfully geocoded and selected on map! Found: ${m.display_name||"Location found"}`}}else this.searchForAddressLocation(o),this.builtAddressLocation=null,this.addressGeocodingStatus={type:"error",message:`\u274C No location found for "${n}". Added to selection with address components - the map library will attempt fallback geocoding strategies (zipcode \u2192 city \u2192 state \u2192 country).`}}catch(o){console.error("Geocoding error:",o);let s={address:this.addressComponents.addressLine1,addressLine2:this.addressComponents.addressLine2,city:this.addressComponents.city,state:this.addressComponents.state,zipCode:this.addressComponents.postalCode,country:this.addressComponents.country};this.searchForAddressLocation(s),this.builtAddressLocation=null,this.addressGeocodingStatus={type:"error",message:`\u274C Geocoding failed: ${o instanceof Error?o.message:"Unknown error"}. Added to selection for library fallback processing.`}}finally{this.isGeocodingAddress=!1}})}searchForAddressLocation(n){if(this.mapComponent.searchForLocation(n),this.searchLocation=n,n.latitude&&n.longitude){let o={location:n,color:"#007bff",title:"Selected Address",content:`<h3>\u{1F4CD} Selected Address</h3>
                  <p><strong>Address:</strong> ${this.getBuiltAddress()}</p>
                  <p><strong>Coordinates:</strong> ${n.latitude.toFixed(6)}, ${n.longitude.toFixed(6)}</p>
                  <p><strong>Status:</strong> Auto-selected by library</p>`,draggable:!0};this.addressPins=[...this.addressPins,o],this.addressMapCenter={latitude:n.latitude,longitude:n.longitude},this.addressMapOptions=X(Z({},this.addressMapOptions),{zoom:15})}}addBuiltAddressPin(){if(!this.getBuiltAddress()){this.addressGeocodingStatus={type:"error",message:"\u274C Please fill in address fields first."};return}let o={location:{latitude:this.builtAddressLocation?.latitude,longitude:this.builtAddressLocation?.longitude,address:this.addressComponents.addressLine1,city:this.addressComponents.city,state:this.addressComponents.state,zipCode:this.addressComponents.postalCode,country:this.addressComponents.country},color:"#28a745",title:"Manual Address Pin",content:`<h3>\u{1F3E0} Manual Address Pin</h3>
                <p><strong>Address:</strong> ${this.getBuiltAddress()}</p>
                ${this.builtAddressLocation?`<p><strong>Coordinates:</strong> ${this.builtAddressLocation.latitude?.toFixed(6)}, ${this.builtAddressLocation.longitude?.toFixed(6)}</p>`:"<p><strong>Status:</strong> Will be geocoded by library</p>"}
                <p><strong>Added:</strong> Manually by user</p>`,draggable:!0};this.addressPins=[...this.addressPins,o],this.builtAddressLocation&&(this.addressMapCenter={latitude:this.builtAddressLocation.latitude,longitude:this.builtAddressLocation.longitude}),this.addressGeocodingStatus={type:"success",message:`\u2705 Extra pin added for "${this.getBuiltAddress()}"`}}clearAddressForm(){this.addressComponents={addressLine1:"",addressLine2:"",city:"",state:"",postalCode:"",country:""},this.builtAddressLocation=null,this.addressGeocodingStatus=null}fillSampleAddress(n="us"){let o=this.sampleAddresses[n];o&&(this.addressComponents=Z({},o),this.onAddressComponentChange())}clearAddressPins(){this.addressPins=[]}getLatestAddressPin(){return this.addressPins[this.addressPins.length-1]}onAddressMapClick(n){console.log("Address map clicked:",n)}onAddressMapLocationSelected(n){console.log("Address map location selected:",n)}onAddressMapPinDeleted(n){console.log("Address map pin deleted:",n),this.addressPins=this.addressPins.filter((o,s)=>s!==n.pinIndex)}onAddressPinDragged(n){console.log("Address pin dragged:",n),n.pinIndex>=0&&n.pinIndex<this.addressPins.length&&(this.addressPins[n.pinIndex].location={latitude:n.newCoordinates.latitude,longitude:n.newCoordinates.longitude})}static \u0275fac=function(o){return new(o||l)};static \u0275cmp=wi({type:l,selectors:[["app-ng-osm-map-demo"]],viewQuery:function(o,s){if(o&1&&($e(Qt,5),$e(hl,7),$e(pl,7),$e(ml,7)),o&2){let d;qe(d=Ke())&&(s.mapComponent=d.first),qe(d=Ke())&&(s.customPopupTemplate=d.first),qe(d=Ke())&&(s.deleteablePopupTemplate=d.first),qe(d=Ke())&&(s.customAutocompleteTemplate=d.first)}},standalone:!0,features:[Oi],decls:592,vars:102,consts:[["mapComponent",""],["addressMapComponent",""],["customPopupTemplate",""],["deleteablePopupTemplate",""],["customAutocompleteTemplate",""],[1,"header"],[1,"container"],[1,"header-nav"],["routerLink","/",1,"back-link"],[1,"main"],[1,"search-section"],[1,"search-wrapper"],["type","text","ngOsmSearchInput","","placeholder","Search locations... (try typing 'New York')",1,"search-input",3,"search","suggestionSelected","autocompleteResults","connectedMapId","enableAutocomplete","showSuggestionsDropdown"],[1,"search-note"],[1,"search-input-demo"],[1,"docs-link-section"],[1,"docs-link-card"],[1,"docs-icon"],[1,"docs-content"],["routerLink","/docs/ng-osm-map",1,"docs-link-button"],[1,"demo-subsection"],[1,"search-container"],["type","text","ngOsmSearchInput","","placeholder","Search for a location...",1,"search-input",3,"search","suggestionSelected","autocompleteResults","connectedMapId","enableAutocomplete","showSuggestionsDropdown"],["type","text","ngOsmSearchInput","","placeholder","Advanced search (min 3 chars, 500ms delay)...",1,"search-input",3,"search","connectedMapId","enableAutocomplete","showSuggestionsDropdown","debounceMs","maxResults","minQueryLength"],["type","text","ngOsmSearchInput","","placeholder","Search with custom template...",1,"search-input",3,"search","suggestionSelected","connectedMapId","enableAutocomplete","customSearchTemplate"],[1,"multi-search-container"],["type","text","ngOsmSearchInput","","placeholder","Fast search (150ms delay, 8 results)...",1,"search-input","small",3,"search","connectedMapId","enableAutocomplete","showSuggestionsDropdown","debounceMs","maxResults"],["type","text","ngOsmSearchInput","","placeholder","Slow search (800ms delay, 3 results, min 4 chars)...",1,"search-input","small",3,"search","connectedMapId","enableAutocomplete","showSuggestionsDropdown","debounceMs","maxResults","minQueryLength"],[1,"event-log"],["class","event-item",4,"ngFor","ngForOf"],["class","no-events",4,"ngIf"],["class","more-events",4,"ngIf"],[1,"map-controls-combined"],[1,"controls-grid"],[1,"control-group"],[1,"button-group"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-info",3,"click"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-warning",3,"click","disabled"],[1,"pin-count"],[1,"btn",3,"click"],[1,"btn","btn-secondary",3,"click","disabled"],["class","zoom-level-control",4,"ngIf"],["class","animation-control",4,"ngIf"],[1,"selection-mode-info"],[1,"auto-zoom-info"],[1,"pre-selection-info"],[4,"ngIf"],[1,"btn","btn-outline-secondary",3,"click"],["class","mt-2",4,"ngIf"],[1,"readonly-info"],["class","badge bg-info text-white ms-2",4,"ngIf"],[1,"boundary-modes"],[1,"radio-label"],["type","radio","name","boundaryMode","value","none",3,"change","checked"],["type","radio","name","boundaryMode","value","world",3,"change","checked"],["type","radio","name","boundaryMode","value","custom",3,"change","checked"],["class","boundary-presets",4,"ngIf"],[1,"no-wrap-control"],[1,"checkbox-label"],["type","checkbox",3,"change","checked"],[1,"boundary-info"],[1,"current-layer"],[1,"layer-buttons"],["class","btn btn-layer",3,"active","title","click",4,"ngFor","ngForOf"],[1,"map-section"],[1,"map-container",3,"mapClick","locationSelected","searchResult","pinDragged","autocompleteResults","pinDeleted","selectionChanged","mapId","pins","zoomInto","highlightAreas","mapOptions","height","width"],[1,"info-panels"],[1,"panel-grid"],[1,"info-panel"],[1,"info-content"],["class","pin-tracker",4,"ngIf"],["class","history-list",4,"ngFor","ngForOf"],[1,"multi-select-status"],[1,"features"],[1,"feature-grid"],[1,"feature-card"],[1,"address-building-section"],[1,"address-form"],[1,"address-inputs-grid"],[1,"input-group"],["for","addressLine1"],["type","text","id","addressLine1","placeholder","Street number and name",1,"address-input",3,"ngModelChange","input","ngModel"],["for","addressLine2"],["type","text","id","addressLine2","placeholder","Apartment, suite, etc. (optional)",1,"address-input",3,"ngModelChange","input","ngModel"],["for","city"],["type","text","id","city","placeholder","City name",1,"address-input",3,"ngModelChange","input","ngModel"],["for","state"],["type","text","id","state","placeholder","State or province",1,"address-input",3,"ngModelChange","input","ngModel"],["for","postalCode"],["type","text","id","postalCode","placeholder","ZIP or postal code",1,"address-input",3,"ngModelChange","input","ngModel"],["for","country"],["id","country",1,"address-input","country-select",3,"ngModelChange","change","ngModel"],["value",""],["value","United States"],["value","Canada"],["value","United Kingdom"],["value","Germany"],["value","France"],["value","Spain"],["value","Italy"],["value","Netherlands"],["value","Australia"],["value","Japan"],["value","South Korea"],["value","India"],["value","China"],["value","Brazil"],["value","Mexico"],["value","Argentina"],["value","South Africa"],["value","Russia"],["value","Sweden"],["value","Norway"],["value","Denmark"],["value","Finland"],["value","Poland"],["value","Czech Republic"],["value","Austria"],["value","Switzerland"],["value","Belgium"],["value","Portugal"],["value","Ireland"],["value","New Zealand"],[1,"built-address-display"],[1,"address-preview"],[1,"address-actions"],[1,"btn","btn-primary",3,"click","disabled"],[1,"btn","btn-success",3,"click","disabled"],[1,"btn","btn-warning",3,"click"],["class","geocoding-status",4,"ngIf"],[1,"address-map-section"],[1,"address-map-container",3,"mapClick","locationSelected","pinDeleted","mapId","zoomInto","mapOptions","height","width","searchLocation"],[1,"address-map-info"],[1,"sample-addresses"],[1,"sample-grid"],[1,"sample-card",3,"click"],[1,"sample-address"],[1,"address-examples"],[1,"tips-grid"],[1,"tip-card"],[1,"template-features"],[1,"feature-description"],[1,"feature-list"],[1,"template-demo-note"],[1,"highlight"],[1,"footer"],["href","https://www.openstreetmap.org/copyright","target","_blank"],["href","https://leafletjs.com/","target","_blank"],[1,"event-item"],[1,"no-events"],[1,"more-events"],[1,"zoom-level-control"],["for","zoomLevel"],["type","range","id","zoomLevel","min","10","max","18","step","1",1,"zoom-slider",3,"input","value"],[1,"animation-control"],[1,"btn","btn-sm",3,"click"],[1,"mt-2"],[1,"badge","bg-info","text-white","ms-2"],[1,"boundary-presets"],[1,"preset-buttons"],["class","btn btn-sm btn-outline-primary",3,"click",4,"ngFor","ngForOf"],[1,"custom-bounds-inputs"],[1,"bounds-row"],["type","number","placeholder","Latitude","step","0.1","min","-90","max","90",3,"input","value"],["type","number","placeholder","Longitude","step","0.1","min","-180","max","180",3,"input","value"],[1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"btn","btn-layer",3,"click","title"],[1,"pin-tracker"],[1,"history-list"],[1,"geocoding-status"],[1,"status-message",3,"ngClass"],["class","geocoded-info",4,"ngIf"],[1,"geocoded-info"],[1,"custom-popup"],[1,"popup-header"],[1,"coordinates"],[1,"popup-content"],["class","city-info",4,"ngIf"],[1,"popup-actions"],[1,"pin-info"],[1,"city-info"],[1,"info-item"],[1,"landmarks-list"],[4,"ngFor","ngForOf"],[1,"deleteable-popup"],["onclick","this.closest('.leaflet-popup').querySelector('.leaflet-popup-close-button').click()",1,"close-btn"],[1,"location-info"],[1,"color-preview"],[1,"btn-delete",3,"click"],[1,"info-grid"],[1,"info-card"],[1,"info-label"],[1,"info-value"],[1,"landmarks-section"],[1,"landmarks-tags"],["class","landmark-tag",4,"ngFor","ngForOf"],[1,"landmark-tag"],["class","custom-autocomplete-dropdown",4,"ngIf"],[1,"custom-autocomplete-dropdown"],["class","loading-item",4,"ngIf"],["class","custom-suggestion-item",3,"click",4,"ngFor","ngForOf"],[1,"loading-item"],[1,"spinner"],[1,"custom-suggestion-item",3,"click"],[1,"suggestion-main"],[1,"suggestion-details"],[1,"suggestion-coords"]],template:function(o,s){if(o&1){let d=xe();h(0,"header",5)(1,"div",6)(2,"div",7)(3,"a",8),p(4,"\u2190 Back to Homepage"),u()(),h(5,"h1"),p(6,"\u{1F5FA}\uFE0F NgOsmMap Demo"),u(),h(7,"p"),p(8,"Angular 18+ OpenStreetMap integration with Leaflet"),u()()(),h(9,"main",9)(10,"div",6)(11,"section",10)(12,"h2"),p(13,"External Search with Autocomplete"),u(),h(14,"div",11)(15,"input",12),O("search",function(g){return C(d),w(s.onSearchInputSearch(g))})("suggestionSelected",function(g){return C(d),w(s.onSearchInputSuggestionSelected(g))})("autocompleteResults",function(g){return C(d),w(s.onSearchInputAutocompleteResults(g))}),u(),h(16,"p",13),p(17,"This input uses the ngOsmSearchInput directive and shows autocomplete suggestions"),u(),h(18,"p",13),p(19,"\u{1F4A1} When you search and then drag the search result pin, this input will update automatically!"),u(),h(20,"p",13),p(21,"\u{1F4CD} Click on the map to select locations. Use the Multi Select button to enable multiple selections."),u(),h(22,"p",13),p(23,"\u{1F50D} Search results always use single selection, regardless of multi-select mode."),u(),h(24,"p",13),p(25,"\u{1F5D1}\uFE0F Click on pins to see their details and delete them individually using the delete button in the popup."),u(),h(26,"p",13),p(27,"\u{1F3AF} This directive-based search input is independent of the map's readonly mode and will always function."),u()()(),h(28,"section",14)(29,"h2"),p(30,"\u{1F50D} Search Input Directive Demo"),u(),h(31,"p"),p(32,"Using the "),h(33,"code"),p(34,"ngOsmSearchInput"),u(),p(35," directive to connect external search inputs to maps:"),u(),h(36,"div",15)(37,"div",16)(38,"div",17),p(39,"\u{1F4DA}"),u(),h(40,"div",18)(41,"h3"),p(42,"Complete API Documentation"),u(),h(43,"p"),p(44,"For comprehensive documentation including all available options, properties, events, and usage examples for "),h(45,"code"),p(46,"NgOsmMapComponent"),u(),p(47,", "),h(48,"code"),p(49,"NgOsmMapDirective"),u(),p(50,", and "),h(51,"code"),p(52,"NgOsmSearchInputDirective"),u(),p(53,":"),u(),h(54,"a",19),p(55," \u{1F4D6} View Full Documentation \u2192 "),u()()()(),h(56,"div",20)(57,"h3"),p(58,"\u{1F680} Basic Search Input"),u(),h(59,"p"),p(60,"A minimal search input connected to the main map:"),u(),h(61,"div",21)(62,"input",22),O("search",function(g){return C(d),w(s.onSearchInputSearch(g))})("suggestionSelected",function(g){return C(d),w(s.onSearchInputSuggestionSelected(g))})("autocompleteResults",function(g){return C(d),w(s.onSearchInputAutocompleteResults(g))}),u()()(),h(63,"div",20)(64,"h3"),p(65,"\u2699\uFE0F Advanced Configuration"),u(),h(66,"p"),p(67,"Search input with custom debounce, max results, and minimum query length:"),u(),h(68,"div",21)(69,"input",23),O("search",function(g){return C(d),w(s.onSearchInputSearch(g))}),u()()(),h(70,"div",20)(71,"h3"),p(72,"\u{1F3A8} Custom Template Search Input"),u(),h(73,"p"),p(74,"Search input with custom template for autocomplete suggestions:"),u(),h(75,"div",21)(76,"input",24),O("search",function(g){return C(d),w(s.onSearchInputSearch(g))})("suggestionSelected",function(g){return C(d),w(s.onSearchInputSuggestionSelected(g))}),u()()(),h(77,"div",20)(78,"h3"),p(79,"\u{1F504} Multiple Search Inputs"),u(),h(80,"p"),p(81,"Multiple search inputs connected to the same map with different configurations:"),u(),h(82,"div",25)(83,"input",26),O("search",function(g){return C(d),w(s.onSearchInputSearch(g))}),u(),h(84,"input",27),O("search",function(g){return C(d),w(s.onSearchInputSearch(g))}),u()()(),h(85,"div",20)(86,"h3"),p(87,"\u{1F4CA} Live Search Event Log"),u(),h(88,"div",28),Y(89,fl,7,6,"div",29)(90,gl,2,0,"div",30)(91,_l,2,1,"div",31),u()()(),h(92,"section",32)(93,"h2"),p(94,"\u{1F3AE} Map Controls"),u(),h(95,"div",33)(96,"div",34)(97,"h3"),p(98,"\u{1F4CD} Pin & Navigation"),u(),h(99,"div",35)(100,"button",36),O("click",function(){return C(d),w(s.addRandomPin())}),p(101," \u{1F4CD} Add Random Pin "),u(),h(102,"button",36),O("click",function(){return C(d),w(s.addSinglePin())}),p(103," \u{1F3D9}\uFE0F Add City Pin "),u(),h(104,"button",37),O("click",function(){return C(d),w(s.clearPins())}),p(105," \u{1F9F9} Clear Pins "),u(),h(106,"button",38),O("click",function(){return C(d),w(s.zoomToNewYork())}),p(107," \u{1F3D9}\uFE0F Zoom to NYC "),u(),h(108,"button",39),O("click",function(){return C(d),w(s.zoomToWorld())}),p(109," \u{1F30D} World View "),u(),h(110,"button",40),O("click",function(){return C(d),w(s.movePinToLondon())}),p(111," \u{1F1EC}\u{1F1E7} Move Pin to London "),u()(),h(112,"p",41),p(113),u()(),h(114,"div",34)(115,"h3"),p(116,"\u{1F3AF} Selection"),u(),h(117,"div",35)(118,"button",39),O("click",function(){return C(d),w(s.toggleMultiSelect())}),p(119),u(),h(120,"button",38),O("click",function(){return C(d),w(s.clearSelections())}),p(121," \u{1F9F9} Clear Selections "),u()(),h(122,"div",35)(123,"button",42),O("click",function(){return C(d),w(s.toggleAutoZoomToSelection())}),p(124),u(),h(125,"button",43),O("click",function(){return C(d),w(s.manualZoomToFirstSelection())}),p(126," \u{1F3AF} Zoom to First "),u()(),Y(127,vl,4,2,"div",44)(128,yl,3,5,"div",45),h(129,"p",46),p(130),u(),h(131,"p",47),p(132),u()(),h(133,"div",34)(134,"h3"),p(135,"\u{1F3AF} Pre-Selection"),u(),h(136,"div",35)(137,"button",36),O("click",function(){return C(d),w(s.setPreSelectedLocation("New York City"))}),p(138," \u{1F5FD} NYC "),u(),h(139,"button",36),O("click",function(){return C(d),w(s.setPreSelectedLocation("London"))}),p(140," \u{1F1EC}\u{1F1E7} London "),u(),h(141,"button",36),O("click",function(){return C(d),w(s.setPreSelectedLocation("Tokyo"))}),p(142," \u{1F1EF}\u{1F1F5} Tokyo "),u(),h(143,"button",39),O("click",function(){return C(d),w(s.setMultiplePreSelectedLocations())}),p(144," \u{1F30D} Multiple "),u(),h(145,"button",37),O("click",function(){return C(d),w(s.clearPreSelectedLocations())}),p(146," \u{1F9F9} Clear "),u()(),h(147,"p",48),p(148),Y(149,bl,2,1,"span",49),u()(),h(150,"div",34)(151,"h3"),p(152,"\u2699\uFE0F Mode & Settings"),u(),h(153,"div",35)(154,"button",42),O("click",function(){return C(d),w(s.toggleReadonlyMode())}),p(155),u(),h(156,"button",37),O("click",function(){return C(d),w(s.testTemplatePopups())}),p(157," \u{1F9E9} Templates "),u(),h(158,"button",50),O("click",function(){return C(d),w(s.clearCache())}),p(159," \u{1F5D1}\uFE0F Clear Cache "),u()(),Y(160,Cl,3,5,"div",51),h(161,"p",52)(162,"strong"),p(163,"Mode:"),u(),p(164),Y(165,wl,2,0,"span",53),u()(),h(166,"div",34)(167,"h3"),p(168,"\u{1F30D} Map Boundaries"),u(),h(169,"div",54)(170,"label",55)(171,"input",56),O("change",function(){return C(d),w(s.setBoundaryMode("none"))}),u(),h(172,"span"),p(173,"\u{1F310} No Restrictions"),u()(),h(174,"label",55)(175,"input",57),O("change",function(){return C(d),w(s.setBoundaryMode("world"))}),u(),h(176,"span"),p(177,"\u{1F30E} World Bounds"),u()(),h(178,"label",55)(179,"input",58),O("change",function(){return C(d),w(s.setBoundaryMode("custom"))}),u(),h(180,"span"),p(181,"\u{1F4CD} Custom Bounds"),u()()(),Y(182,Sl,18,5,"div",59),h(183,"div",60)(184,"label",61)(185,"input",62),O("change",function(){return C(d),w(s.toggleNoWrap())}),u(),h(186,"span"),p(187,"\u{1F6AB} Disable World Wrapping"),u()()(),h(188,"div",63)(189,"p")(190,"strong"),p(191,"Boundaries:"),u(),p(192),u(),h(193,"p")(194,"strong"),p(195,"Wrapping:"),u(),p(196),u()()(),h(197,"div",34)(198,"h3"),p(199,"\u{1F5FA}\uFE0F Map Layers"),u(),h(200,"p",64),p(201,"Current: "),h(202,"strong"),p(203),u()(),h(204,"div",65),Y(205,Ml,2,4,"button",66),u()()()(),h(206,"section",67)(207,"h2"),p(208,"Interactive Map with All Features"),u(),h(209,"ng-osm-map",68,0),O("mapClick",function(g){return C(d),w(s.onMapClick(g))})("locationSelected",function(g){return C(d),w(s.onLocationSelected(g))})("searchResult",function(g){return C(d),w(s.onSearchResult(g))})("pinDragged",function(g){return C(d),w(s.onPinDragged(g))})("autocompleteResults",function(g){return C(d),w(s.onAutocompleteResults(g))})("pinDeleted",function(g){return C(d),w(s.onPinDeleted(g))})("selectionChanged",function(g){return C(d),w(s.onSelectionChanged(g))}),u()(),h(211,"section",69)(212,"h2"),p(213,"Live Event Information"),u(),h(214,"div",70)(215,"div",71)(216,"h3"),p(217,"\u{1F5B1}\uFE0F Click Events"),u(),h(218,"div",72)(219,"h4"),p(220,"Last Selected Location:"),u(),h(221,"pre"),p(222),u(),Y(223,Pl,3,2,"div",73),h(224,"h4"),p(225,"Click History (last 5):"),u(),Y(226,Ol,4,4,"div",74),u()(),h(227,"div",71)(228,"h3"),p(229,"\u{1F50D} Search Events"),u(),h(230,"div",72)(231,"h4"),p(232,"Last Search Result:"),u(),h(233,"pre"),p(234),u(),Y(235,Dl,3,2,"div",73),h(236,"h4"),p(237,"Autocomplete Suggestions:"),u(),Y(238,El,3,2,"div",74),u()(),h(239,"div",71)(240,"h3"),p(241,"\u{1F504} Pin Drag Events"),u(),h(242,"div",72)(243,"h4"),p(244,"Last Dragged Pin:"),u(),h(245,"pre"),p(246),u(),h(247,"h4"),p(248,"Drag History (last 5):"),u(),Y(249,Tl,3,4,"div",74),u()(),h(250,"div",71)(251,"h3"),p(252,"\u{1F4CD} Selections & Deletions"),u(),h(253,"div",72)(254,"h4"),p(255,"Current Selections:"),u(),h(256,"pre"),p(257),u(),h(258,"small",75),p(259),u(),h(260,"h4"),p(261,"Recent Deletions:"),u(),h(262,"pre"),p(263),u(),Y(264,Al,3,3,"div",74),u()()()(),h(265,"section",76)(266,"h2"),p(267,"\u{1F680} Features Demonstrated"),u(),h(268,"div",77)(269,"div",78)(270,"h3"),p(271,"\uFFFD\uFE0F Multiple Map Layers"),u(),h(272,"p"),p(273,"Switch between different map layers: Street, Satellite, Terrain, Dark, Light, Watercolor, and Toner themes"),u()(),h(274,"div",78)(275,"h3"),p(276,"\uFFFD\u{1F4CD} Draggable Pins"),u(),h(277,"p"),p(278,"Some pins are draggable - try dragging the NYC, Google, and Tokyo pins!"),u()(),h(279,"div",78)(280,"h3"),p(281,"\u{1F50D} Smart Search with Autocomplete"),u(),h(282,"p"),p(283,"Built-in search control with autocomplete suggestions and external input binding"),u()(),h(284,"div",78)(285,"h3"),p(286,"\u{1F5B1}\uFE0F Smart Selection System"),u(),h(287,"p")(288,"strong"),p(289,"Single-Select Mode:"),u(),p(290," Map clicks and search results are synced (both single selection)"),rt(291,"br"),h(292,"strong"),p(293,"Multi-Select Mode:"),u(),p(294," Map clicks allow multiple selections, search results remain single"),u()(),h(295,"div",78)(296,"h3"),p(297,"\u{1F5D1}\uFE0F Pin Management"),u(),h(298,"p"),p(299,"Delete pins individually from tooltips, track deletion history, and manage selections programmatically"),u()(),h(300,"div",78)(301,"h3"),p(302,"\u{1F3AF} Smart Zoom"),u(),h(303,"p"),p(304,"Automatically center and zoom to specific locations"),u()(),h(305,"div",78)(306,"h3"),p(307,"\u{1F3A8} Area Highlighting"),u(),h(308,"p"),p(309,"Highlight areas with custom borders and fill colors (Times Square area shown)"),u()(),h(310,"div",78)(311,"h3"),p(312,"\u{1F30D} Geocoding"),u(),h(313,"p"),p(314,"Built-in address resolution using OpenStreetMap Nominatim API"),u()(),h(315,"div",78)(316,"h3"),p(317,"\u26A1 Dynamic Updates"),u(),h(318,"p"),p(319,"Add, remove, and update pins dynamically with event feedback"),u()(),h(320,"div",78)(321,"h3"),p(322,"\u{1F3AE} Full Control"),u(),h(323,"p"),p(324,"Access to underlying Leaflet map instance for advanced customization"),u()()()()()(),h(325,"section",79)(326,"div",6)(327,"h2"),p(328,"\u{1F3E0} Address Building Demo"),u(),h(329,"p"),p(330,"Build structured addresses using individual input fields, geocode them, and automatically display the results on a dedicated map with pins:"),u(),h(331,"div",80)(332,"h3"),p(333,"\u{1F4DD} Address Form"),u(),h(334,"div",81)(335,"div",82)(336,"label",83),p(337,"Address Line 1:"),u(),h(338,"input",84),lt("ngModelChange",function(g){return C(d),at(s.addressComponents.addressLine1,g)||(s.addressComponents.addressLine1=g),w(g)}),O("input",function(){return C(d),w(s.onAddressComponentChange())}),u()(),h(339,"div",82)(340,"label",85),p(341,"Address Line 2:"),u(),h(342,"input",86),lt("ngModelChange",function(g){return C(d),at(s.addressComponents.addressLine2,g)||(s.addressComponents.addressLine2=g),w(g)}),O("input",function(){return C(d),w(s.onAddressComponentChange())}),u()(),h(343,"div",82)(344,"label",87),p(345,"City:"),u(),h(346,"input",88),lt("ngModelChange",function(g){return C(d),at(s.addressComponents.city,g)||(s.addressComponents.city=g),w(g)}),O("input",function(){return C(d),w(s.onAddressComponentChange())}),u()(),h(347,"div",82)(348,"label",89),p(349,"State/Province:"),u(),h(350,"input",90),lt("ngModelChange",function(g){return C(d),at(s.addressComponents.state,g)||(s.addressComponents.state=g),w(g)}),O("input",function(){return C(d),w(s.onAddressComponentChange())}),u()(),h(351,"div",82)(352,"label",91),p(353,"ZIP/Postal Code:"),u(),h(354,"input",92),lt("ngModelChange",function(g){return C(d),at(s.addressComponents.postalCode,g)||(s.addressComponents.postalCode=g),w(g)}),O("input",function(){return C(d),w(s.onAddressComponentChange())}),u()(),h(355,"div",82)(356,"label",93),p(357,"Country:"),u(),h(358,"select",94),lt("ngModelChange",function(g){return C(d),at(s.addressComponents.country,g)||(s.addressComponents.country=g),w(g)}),O("change",function(){return C(d),w(s.onAddressComponentChange())}),h(359,"option",95),p(360,"Select Country"),u(),h(361,"option",96),p(362,"United States"),u(),h(363,"option",97),p(364,"Canada"),u(),h(365,"option",98),p(366,"United Kingdom"),u(),h(367,"option",99),p(368,"Germany"),u(),h(369,"option",100),p(370,"France"),u(),h(371,"option",101),p(372,"Spain"),u(),h(373,"option",102),p(374,"Italy"),u(),h(375,"option",103),p(376,"Netherlands"),u(),h(377,"option",104),p(378,"Australia"),u(),h(379,"option",105),p(380,"Japan"),u(),h(381,"option",106),p(382,"South Korea"),u(),h(383,"option",107),p(384,"India"),u(),h(385,"option",108),p(386,"China"),u(),h(387,"option",109),p(388,"Brazil"),u(),h(389,"option",110),p(390,"Mexico"),u(),h(391,"option",111),p(392,"Argentina"),u(),h(393,"option",112),p(394,"South Africa"),u(),h(395,"option",113),p(396,"Russia"),u(),h(397,"option",114),p(398,"Sweden"),u(),h(399,"option",115),p(400,"Norway"),u(),h(401,"option",116),p(402,"Denmark"),u(),h(403,"option",117),p(404,"Finland"),u(),h(405,"option",118),p(406,"Poland"),u(),h(407,"option",119),p(408,"Czech Republic"),u(),h(409,"option",120),p(410,"Austria"),u(),h(411,"option",121),p(412,"Switzerland"),u(),h(413,"option",122),p(414,"Belgium"),u(),h(415,"option",123),p(416,"Portugal"),u(),h(417,"option",124),p(418,"Ireland"),u(),h(419,"option",125),p(420,"New Zealand"),u()()()(),h(421,"div",126)(422,"h4"),p(423,"\u{1F4CD} Built Address:"),u(),h(424,"div",127),p(425),u()(),h(426,"div",128)(427,"button",129),O("click",function(){return C(d),w(s.geocodeBuiltAddress())}),Y(428,Il,2,0,"span",49)(429,kl,2,0,"span",49),u(),h(430,"button",130),O("click",function(){return C(d),w(s.addBuiltAddressPin())}),p(431," \u{1F4CD} Add Extra Pin "),u(),h(432,"button",37),O("click",function(){return C(d),w(s.clearAddressForm())}),p(433," \u{1F9F9} Clear Form "),u(),h(434,"button",38),O("click",function(){return C(d),w(s.fillSampleAddress())}),p(435," \u{1F4CB} Sample Address "),u(),h(436,"button",131),O("click",function(){return C(d),w(s.clearAddressPins())}),p(437," \u{1F5D1}\uFE0F Clear All Pins "),u()(),Y(438,Fl,6,4,"div",132),u(),h(439,"div",133)(440,"h3"),p(441,"\u{1F5FA}\uFE0F Address Map"),u(),h(442,"p"),p(443,"This dedicated map shows the geocoded addresses from the address building form:"),u(),h(444,"ng-osm-map",134,1),O("mapClick",function(g){return C(d),w(s.onAddressMapClick(g))})("locationSelected",function(g){return C(d),w(s.onAddressMapLocationSelected(g))})("pinDeleted",function(g){return C(d),w(s.onAddressMapPinDeleted(g))}),u(),h(446,"div",135)(447,"p")(448,"strong"),p(449,"Address Pins:"),u(),p(450),u(),Y(451,Nl,4,1,"p",49),u()(),h(452,"div",136)(453,"h3"),p(454,"\u{1F4CB} Sample Address Patterns"),u(),h(455,"p"),p(456,"Click on any sample to automatically fill the address form:"),u(),h(457,"div",137)(458,"div",138),O("click",function(){return C(d),w(s.fillSampleAddress("us"))}),h(459,"h4"),p(460,"\u{1F1FA}\u{1F1F8} United States"),u(),h(461,"div",139)(462,"div"),p(463,"123 Main Street"),u(),h(464,"div"),p(465,"Apt 4B"),u(),h(466,"div"),p(467,"New York, NY 10001"),u(),h(468,"div"),p(469,"United States"),u()()(),h(470,"div",138),O("click",function(){return C(d),w(s.fillSampleAddress("uk"))}),h(471,"h4"),p(472,"\u{1F1EC}\u{1F1E7} United Kingdom"),u(),h(473,"div",139)(474,"div"),p(475,"10 Downing Street"),u(),h(476,"div"),p(477,"Westminster"),u(),h(478,"div"),p(479,"London SW1A 2AA"),u(),h(480,"div"),p(481,"United Kingdom"),u()()(),h(482,"div",138),O("click",function(){return C(d),w(s.fillSampleAddress("ca"))}),h(483,"h4"),p(484,"\u{1F1E8}\u{1F1E6} Canada"),u(),h(485,"div",139)(486,"div"),p(487,"24 Sussex Drive"),u(),rt(488,"div"),h(489,"div"),p(490,"Ottawa, ON K1M 1M4"),u(),h(491,"div"),p(492,"Canada"),u()()(),h(493,"div",138),O("click",function(){return C(d),w(s.fillSampleAddress("de"))}),h(494,"h4"),p(495,"\u{1F1E9}\u{1F1EA} Germany"),u(),h(496,"div",139)(497,"div"),p(498,"Unter den Linden 77"),u(),rt(499,"div"),h(500,"div"),p(501,"Berlin 10117"),u(),h(502,"div"),p(503,"Germany"),u()()(),h(504,"div",138),O("click",function(){return C(d),w(s.fillSampleAddress("jp"))}),h(505,"h4"),p(506,"\u{1F1EF}\u{1F1F5} Japan"),u(),h(507,"div",139)(508,"div"),p(509,"1-1 Chiyoda"),u(),rt(510,"div"),h(511,"div"),p(512,"Tokyo 100-8111"),u(),h(513,"div"),p(514,"Japan"),u()()(),h(515,"div",138),O("click",function(){return C(d),w(s.fillSampleAddress("au"))}),h(516,"h4"),p(517,"\u{1F1E6}\u{1F1FA} Australia"),u(),h(518,"div",139)(519,"div"),p(520,"1 Macquarie Street"),u(),rt(521,"div"),h(522,"div"),p(523,"Sydney NSW 2000"),u(),h(524,"div"),p(525,"Australia"),u()()()()(),h(526,"div",140)(527,"h3"),p(528,"\u{1F4A1} Address Building Tips"),u(),h(529,"div",141)(530,"div",142)(531,"h4"),p(532,"\u{1F3AF} Complete Addresses"),u(),h(533,"p"),p(534,"Include as many address components as possible for better geocoding accuracy. Street number, street name, city, and country are most important for precise location mapping."),u()(),h(535,"div",142)(536,"h4"),p(537,"\u{1F30D} International Support"),u(),h(538,"p"),p(539,'The geocoding service supports international addresses. When you click "Geocode & Show on Map", the location is automatically pinned and selected on the map.'),u()(),h(540,"div",142)(541,"h4"),p(542,"\u{1F50D} Fallback Options"),u(),h(543,"p"),p(544,`If a full address doesn't geocode, try with just "City, Country" or "State, Country" for broader location results. The system will show helpful error messages.`),u()(),h(545,"div",142)(546,"h4"),p(547,"\u{1F4F1} Automatic Mapping"),u(),h(548,"p"),p(549,'The geocoding process automatically creates pins and centers the map on found locations. Use "Add Extra Pin" for additional markers at the same location.'),u()()()()()(),h(550,"section",143)(551,"div",6)(552,"h2"),p(553,"\u{1F9E9} Template-based Pin Popups"),u(),h(554,"div",144)(555,"p"),p(556," The library now supports custom Angular templates for pin popups! This allows you to: "),u(),h(557,"ul",145)(558,"li"),p(559,"\u{1F3A8} Create rich, interactive popup content with full Angular features"),u(),h(560,"li"),p(561,"\u{1F4E6} Pass location object, pin data, and pin index to your template"),u(),h(562,"li"),p(563,"\u{1F5D1}\uFE0F Implement custom delete functionality with a provided callback"),u(),h(564,"li"),p(565,"\u{1F4A1} Use Angular directives, pipes, and components within popups"),u()(),h(566,"p",146)(567,"strong"),p(568,"\u{1F31F} Try it out:"),u(),p(569," Look for the "),h(570,"span",147),p(571,"London"),u(),p(572," and "),h(573,"span",147),p(574,"Berlin"),u(),p(575," pins on the map - they use custom templates with rich content and interactive features! "),u()()()(),Y(576,Rl,11,6,"ng-template",null,2,Di)(578,jl,23,7,"ng-template",null,3,Di)(580,$l,1,1,"ng-template",null,4,Di),h(582,"footer",148)(583,"div",6)(584,"p"),p(585,"\xA9 2025 NgOsmMap Library - Built with Angular 18 & Leaflet"),u(),h(586,"p")(587,"a",149),p(588," \xA9 OpenStreetMap contributors "),u(),p(589," | "),h(590,"a",150),p(591," Powered by Leaflet "),u()()()()}if(o&2){let d=cr(581);y(15),E("connectedMapId",s.mapId)("enableAutocomplete",!0)("showSuggestionsDropdown",!0),y(47),E("connectedMapId",s.mapId)("enableAutocomplete",!0)("showSuggestionsDropdown",!0),y(7),E("connectedMapId",s.mapId)("enableAutocomplete",!0)("showSuggestionsDropdown",!0)("debounceMs",500)("maxResults",3)("minQueryLength",3),y(7),E("connectedMapId",s.mapId)("enableAutocomplete",!0)("customSearchTemplate",d),y(7),E("connectedMapId",s.mapId)("enableAutocomplete",!0)("showSuggestionsDropdown",!0)("debounceMs",150)("maxResults",8),y(),E("connectedMapId",s.mapId)("enableAutocomplete",!0)("showSuggestionsDropdown",!0)("debounceMs",800)("maxResults",3)("minQueryLength",4),y(5),E("ngForOf",s.searchEventLog.slice(0,10)),y(),E("ngIf",s.searchEventLog.length===0),y(),E("ngIf",s.searchEventLog.length>10),y(19),E("disabled",s.pins.length===0),y(3),$("Current pins: ",s.pins.length,""),y(6),$(" ",s.isMultiSelectEnabled()?"\u{1F4CD} Single Select":"\u{1F4CD} Multi Select"," "),y(4),Re("btn-primary",s.autoZoomToSelection)("btn-outline-primary",!s.autoZoomToSelection),y(),$(" ",s.autoZoomToSelection?"\u{1F50D} Auto Zoom ON":"\u{1F50D} Auto Zoom OFF"," "),y(),E("disabled",s.selectedLocations.length===0),y(2),E("ngIf",s.autoZoomToSelection),y(),E("ngIf",s.autoZoomToSelection),y(2),de(s.getSelectionModeDescription()),y(2),de(s.getAutoZoomDescription()),y(16),$(" Pre-selections: ",s.selectedLocations.length," "),y(),E("ngIf",s.selectedLocations.length>0),y(5),Re("btn-success",!s.isReadonlyMode())("btn-warning",s.isReadonlyMode()),y(),$(" ",s.isReadonlyMode()?"\u{1F513} Enable":"\u{1F512} Readonly"," "),y(5),E("ngIf",s.isReadonlyMode()),y(4),$(" ",s.isReadonlyMode()?"Readonly (interactions disabled)":"Interactive"," "),y(),E("ngIf",s.isReadonlyMode()&&s.isScrollInReadonlyEnabled()),y(6),E("checked",s.boundaryMode==="none"),y(4),E("checked",s.boundaryMode==="world"),y(4),E("checked",s.boundaryMode==="custom"),y(3),E("ngIf",s.boundaryMode==="custom"),y(3),E("checked",s.noWrapEnabled),y(7),$(" ",s.getBoundaryDescription(),""),y(4),$(" ",s.getNoWrapDescription(),""),y(7),de(s.getCurrentTileLayerName()),y(2),E("ngForOf",s.tileLayerOptions),y(4),E("mapId",s.mapId)("pins",s.pins)("zoomInto",s.centerLocation)("highlightAreas",s.highlightAreas)("mapOptions",s.mapOptions)("height",400)("width","100%"),y(13),de(s.getSelectedLocationInfo()),y(),E("ngIf",s.selectedLocationPinIndex>=0&&s.pins[s.selectedLocationPinIndex]),y(3),E("ngForOf",s.clickHistory),y(8),de(s.getSearchResultInfo()),y(),E("ngIf",s.searchResultPinIndex>=0&&s.pins[s.searchResultPinIndex]),y(3),E("ngForOf",s.autocompleteHistory),y(8),de(s.getDragHistoryInfo()),y(3),E("ngForOf",s.dragHistory),y(8),de(s.getSelectedLocationsInfo()),y(2),$(" Multi-select: ",s.isMultiSelectEnabled()?"ON":"OFF"," "),y(4),de(s.getDeleteHistoryInfo()),y(),E("ngForOf",s.deleteHistory),y(74),st("ngModel",s.addressComponents.addressLine1),y(4),st("ngModel",s.addressComponents.addressLine2),y(4),st("ngModel",s.addressComponents.city),y(4),st("ngModel",s.addressComponents.state),y(4),st("ngModel",s.addressComponents.postalCode),y(4),st("ngModel",s.addressComponents.country),y(66),Re("empty",!s.getBuiltAddress()),y(),$(" ",s.getBuiltAddress()||"Fill in address fields to see the built address..."," "),y(2),E("disabled",!s.getBuiltAddress()||s.isGeocodingAddress),y(),E("ngIf",s.isGeocodingAddress),y(),E("ngIf",!s.isGeocodingAddress),y(),E("disabled",!s.builtAddressLocation),y(8),E("ngIf",s.addressGeocodingStatus),y(6),E("mapId",s.addressMapId)("zoomInto",s.addressMapCenter)("mapOptions",s.addressMapOptions)("height",350)("width","100%")("searchLocation",s.searchLocation),y(6),$(" ",s.addressPins.length,""),y(),E("ngIf",s.addressPins.length>0)}},dependencies:[Qt,ji,Cr,_r,vr,yr,br,qr,Gr,$r,Ni,Bi,Zr,Bn,Sr,xr],styles:['@charset "UTF-8";.header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:2rem 0;text-align:center}.header-nav[_ngcontent-%COMP%]{margin-bottom:1rem;text-align:left}.back-link[_ngcontent-%COMP%]{color:#ffffffe6;text-decoration:none;font-size:.9rem;transition:color .2s}.back-link[_ngcontent-%COMP%]:hover{color:#fff}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;margin-bottom:.5rem;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;opacity:.9}.main[_ngcontent-%COMP%]{background:#fff;padding:2rem 0;min-height:calc(100vh - 200px)}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:0 2rem}section[_ngcontent-%COMP%]{margin-bottom:2rem;background:#fff;border-radius:8px;box-shadow:0 2px 10px #0000001a;padding:1.5rem}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:1.5rem;margin-bottom:1rem;border-bottom:2px solid #f0f0f0;padding-bottom:.5rem}.search-wrapper[_ngcontent-%COMP%]{background:#f8f9fa;padding:1rem;border-radius:6px}.search-input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;margin-bottom:1rem}.search-note[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin:.5rem 0;line-height:1.4}.button-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;font-size:.9rem;font-weight:500;cursor:pointer;transition:all .2s;text-decoration:none;display:inline-block;text-align:center}.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#545b62}.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.btn-info[_ngcontent-%COMP%]:hover{background:#138496}.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.btn-success[_ngcontent-%COMP%]:hover{background:#1e7e34}.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.btn-warning[_ngcontent-%COMP%]:hover{background:#e0a800}.btn-outline-secondary[_ngcontent-%COMP%]{background:transparent;color:#6c757d;border:1px solid #6c757d}.btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-layer[_ngcontent-%COMP%]{background:#f8f9fa;color:#333;border:1px solid #ddd}.btn-layer.active[_ngcontent-%COMP%]{background:#007bff;color:#fff;border-color:#007bff}.btn-layer[_ngcontent-%COMP%]:hover:not(.active){background:#e9ecef}.pin-count[_ngcontent-%COMP%], .selection-mode-info[_ngcontent-%COMP%], .current-layer[_ngcontent-%COMP%], .layer-note[_ngcontent-%COMP%]{color:#666;font-size:.9rem;margin:.5rem 0}.current-layer[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.layer-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin:1rem 0}.map-section[_ngcontent-%COMP%]{background:#f8f9fa}.map-container[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;box-shadow:0 4px 15px #0000001a}.panel-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-top:1rem}.info-panel[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:6px;padding:1rem;border-left:4px solid #007bff}.info-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:1.1rem;margin-bottom:.75rem}.info-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{background:#e9ecef;padding:.5rem;border-radius:4px;font-size:.8rem;overflow-x:auto;white-space:pre-wrap;word-break:break-all}.history-list[_ngcontent-%COMP%]{background:#fff;padding:.5rem;margin:.25rem 0;border-radius:4px;border-left:3px solid #28a745}.pin-tracker[_ngcontent-%COMP%], .multi-select-status[_ngcontent-%COMP%]{color:#28a745;font-weight:500;font-size:.8rem;margin-top:.5rem;display:block}.feature-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-top:1rem}.feature-card[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.5rem;border-radius:8px;border-left:4px solid #007bff}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;font-size:1.1rem;margin-bottom:.75rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;line-height:1.5;margin:0}.template-features[_ngcontent-%COMP%]{background:#f8f9fa;padding:3rem 0;margin-top:2rem}.feature-description[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;text-align:center}.feature-list[_ngcontent-%COMP%]{text-align:left;max-width:600px;margin:1.5rem auto}.feature-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#666;margin-bottom:.5rem;line-height:1.5}.template-demo-note[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:6px;border-left:4px solid #28a745;margin-top:1.5rem}.highlight[_ngcontent-%COMP%]{background:#fff3cd;padding:.2rem .4rem;border-radius:3px;font-weight:500}.custom-popup[_ngcontent-%COMP%], .deleteable-popup[_ngcontent-%COMP%]{min-width:250px}.popup-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.5rem;border-bottom:1px solid #eee}.popup-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;color:#333}.coordinates[_ngcontent-%COMP%]{font-size:.8rem;color:#666;font-family:monospace}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:1.2rem;cursor:pointer;color:#999;padding:0;width:20px;height:20px}.city-info[_ngcontent-%COMP%]{margin-bottom:1rem}.info-item[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.9rem}.landmarks-list[_ngcontent-%COMP%]{margin:.5rem 0;padding-left:1rem}.landmarks-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:.85rem;color:#666}.info-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-bottom:1rem}.info-card[_ngcontent-%COMP%]{background:#f8f9fa;padding:.75rem;border-radius:4px;text-align:center}.info-label[_ngcontent-%COMP%]{font-size:.8rem;color:#666;margin-bottom:.25rem}.info-value[_ngcontent-%COMP%]{font-weight:500;color:#333}.landmarks-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:.5rem;color:#333}.landmarks-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}.landmark-tag[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:.2rem .5rem;border-radius:12px;font-size:.75rem}.color-preview[_ngcontent-%COMP%]{display:inline-block;width:20px;height:15px;border-radius:3px;border:1px solid #ddd;vertical-align:middle;margin-left:.5rem}.popup-actions[_ngcontent-%COMP%]{margin-top:1rem;padding-top:.75rem;border-top:1px solid #eee}.btn-delete[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-size:.9rem;transition:background .2s}.btn-delete[_ngcontent-%COMP%]:hover{background:#c82333}.pin-info[_ngcontent-%COMP%]{color:#666;font-size:.8rem;margin-top:.5rem;display:block}.search-input-demo[_ngcontent-%COMP%]{background:#f8f9fc;border:1px solid #e2e6ea;border-radius:12px;padding:2rem;margin-bottom:2rem}.search-input-demo[_ngcontent-%COMP%]   .demo-subsection[_ngcontent-%COMP%]{margin-bottom:2rem}.search-input-demo[_ngcontent-%COMP%]   .demo-subsection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#2c3e50;font-size:1.2rem;margin-bottom:.5rem}.search-input-demo[_ngcontent-%COMP%]   .demo-subsection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;margin-bottom:1rem;line-height:1.5}.search-input-demo[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative;margin-bottom:1rem}.search-input-demo[_ngcontent-%COMP%]   .multi-search-container[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}@media (max-width: 768px){.search-input-demo[_ngcontent-%COMP%]   .multi-search-container[_ngcontent-%COMP%]{flex-direction:column}}.search-input-demo[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #dee2e6;border-radius:8px;font-size:16px;transition:all .3s ease;background:#fff}.search-input-demo[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 .2rem #667eea40}.search-input-demo[_ngcontent-%COMP%]   .search-input.small[_ngcontent-%COMP%]{flex:1}.search-input-demo[_ngcontent-%COMP%]   .event-log[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;border:1px solid #dee2e6;border-radius:8px;padding:1rem;background-color:#fff}.search-input-demo[_ngcontent-%COMP%]   .event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0;border-bottom:1px solid #f1f3f4}.search-input-demo[_ngcontent-%COMP%]   .event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.search-input-demo[_ngcontent-%COMP%]   .event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#495057}.search-input-demo[_ngcontent-%COMP%]   .event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.8rem}.search-input-demo[_ngcontent-%COMP%]   .event-log[_ngcontent-%COMP%]   .no-events[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-style:italic;padding:1rem 0}.custom-autocomplete-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #dee2e6;border-top:none;border-radius:0 0 8px 8px;box-shadow:0 4px 12px #00000026;max-height:300px;overflow-y:auto;z-index:1000}.loading-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:12px 16px;color:#6c757d}.loading-item[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid #f3f3f3;border-top:2px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.custom-suggestion-item[_ngcontent-%COMP%]{padding:12px 16px;cursor:pointer;border-bottom:1px solid #f1f3f4;transition:background-color .2s}.custom-suggestion-item[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.custom-suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.custom-suggestion-item[_ngcontent-%COMP%]   .suggestion-main[_ngcontent-%COMP%]{font-weight:600;color:#333;margin-bottom:4px}.custom-suggestion-item[_ngcontent-%COMP%]   .suggestion-details[_ngcontent-%COMP%]{font-size:14px;color:#6c757d;margin-bottom:2px}.custom-suggestion-item[_ngcontent-%COMP%]   .suggestion-coords[_ngcontent-%COMP%]{font-size:12px;color:#999;font-family:Consolas,Monaco,Lucida Console,monospace}.controls[_ngcontent-%COMP%], .pre-selection-controls[_ngcontent-%COMP%], .readonly-controls[_ngcontent-%COMP%], .tile-layer-controls[_ngcontent-%COMP%], .search-section[_ngcontent-%COMP%], .info-panels[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:12px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 2px 10px #0000001a}.readonly-controls[_ngcontent-%COMP%]{border-left:4px solid #ffc107}.readonly-info[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background:#ffc1071a;border-radius:6px;font-size:.9rem;font-weight:500;color:#856404}.auto-zoom-info[_ngcontent-%COMP%]{font-size:.75rem!important;line-height:1.2!important;color:#17a2b8;font-weight:500}.map-controls-combined[_ngcontent-%COMP%]{margin-bottom:2rem;padding:1.5rem;background:#f8f9fa;border-radius:8px;border:1px solid #dee2e6}.controls-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-top:1rem}.control-group[_ngcontent-%COMP%]{background:#fff;padding:1rem;border-radius:6px;border:1px solid #e0e0e0;box-shadow:0 1px 3px #0000001a}.control-group[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.9rem;font-weight:600;color:#495057;border-bottom:1px solid #e9ecef;padding-bottom:.5rem}.control-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.75rem}.control-group[_ngcontent-%COMP%]   .button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.8rem;padding:.375rem .75rem;flex:1;min-width:fit-content}.control-group[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.8rem;color:#6c757d;line-height:1.3}.pin-count[_ngcontent-%COMP%]{font-weight:500;color:#495057}.selection-mode-info[_ngcontent-%COMP%], .pre-selection-info[_ngcontent-%COMP%], .readonly-info[_ngcontent-%COMP%]{font-size:.75rem!important;line-height:1.2!important}.current-layer[_ngcontent-%COMP%]{font-size:.75rem!important;margin-bottom:.5rem!important}.layer-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.25rem}.layer-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.7rem;padding:.25rem .5rem;flex:1;min-width:fit-content}.boundary-modes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem}.radio-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.5rem;border-radius:4px;transition:background-color .2s}.radio-label[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.radio-label[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin:0;accent-color:#667eea}.boundary-presets[_ngcontent-%COMP%]{margin:1rem 0;padding:1rem;background-color:#f8f9fa;border-radius:6px;border:1px solid #e9ecef}.boundary-presets[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.9rem;color:#495057;font-weight:600}.preset-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:1rem}.custom-bounds-inputs[_ngcontent-%COMP%]{margin-top:.5rem}.bounds-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.bounds-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:100px;font-size:.85rem;font-weight:500;color:#495057}.bounds-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{flex:1;padding:.25rem .5rem;border:1px solid #ced4da;border-radius:4px;font-size:.85rem;max-width:120px}.bounds-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 2px #667eea1a}.no-wrap-control[_ngcontent-%COMP%]{margin:1rem 0}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:pointer;padding:.5rem;border-radius:4px;transition:background-color .2s}.checkbox-label[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}.checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;accent-color:#667eea}.boundary-info[_ngcontent-%COMP%]{margin-top:1rem;padding:.75rem;background-color:#e3f2fd;border-radius:4px;border-left:4px solid #2196f3}.boundary-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0;font-size:.85rem;color:#0d47a1}.boundary-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}@media (max-width: 768px){.boundary-modes[_ngcontent-%COMP%]{gap:.25rem}.preset-buttons[_ngcontent-%COMP%]{flex-direction:column}.bounds-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:.25rem}.bounds-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:auto}.bounds-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{max-width:100%;width:100%}}@media (max-width: 480px){.boundary-presets[_ngcontent-%COMP%]{padding:.5rem}}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:0 1rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}.button-group[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%;margin-bottom:.5rem}.panel-grid[_ngcontent-%COMP%], .feature-grid[_ngcontent-%COMP%], .info-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.layer-buttons[_ngcontent-%COMP%]{flex-direction:column}.controls-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}@media (max-width: 480px){.header[_ngcontent-%COMP%]{padding:1rem 0}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.main[_ngcontent-%COMP%]{padding:1rem 0}section[_ngcontent-%COMP%]{padding:1rem;margin-bottom:1rem}.template-features[_ngcontent-%COMP%]{padding:2rem 0}}.documentation-section[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #e9ecef;border-radius:8px;padding:2rem;margin-bottom:2rem}.documentation-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#495057;margin-bottom:1.5rem;font-weight:600}.options-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-bottom:1rem}.option-group[_ngcontent-%COMP%]{background:#fff;border:1px solid #dee2e6;border-radius:6px;padding:1.5rem}.option-group[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem;font-weight:600;font-size:1.1rem;border-bottom:2px solid #3498db;padding-bottom:.5rem}.option-item[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1rem;border-bottom:1px solid #f1f3f4}.option-item[_ngcontent-%COMP%]:last-child{border-bottom:none;margin-bottom:0}.option-item[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#e3f2fd;color:#1976d2;padding:.25rem .5rem;border-radius:4px;font-family:Monaco,Menlo,monospace;font-size:.9rem;font-weight:600;display:block;margin-bottom:.5rem;border:1px solid #bbdefb}.option-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;margin:0;line-height:1.4}.code-example[_ngcontent-%COMP%]{background:#1e1e1e;border-radius:6px;margin:1rem 0;overflow:hidden}.code-example[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{background:#2d2d30;color:#ccc;padding:.75rem 1rem;margin:0;font-size:.9rem;font-weight:600;border-bottom:1px solid #3e3e42}.code-example[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;padding:1.5rem;background:#1e1e1e;color:#d4d4d4;overflow-x:auto;font-family:Monaco,Menlo,monospace;font-size:.85rem;line-height:1.5}.code-example[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:none;color:inherit;padding:0;border:none;font-size:inherit}.features-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:1.5rem;margin-top:1rem}.feature-item[_ngcontent-%COMP%]{background:#fff;border:1px solid #e9ecef;border-radius:6px;padding:1.5rem;transition:transform .2s,box-shadow .2s}.feature-item[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.feature-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:.75rem;font-weight:600;font-size:1rem}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6c757d;font-size:.9rem;line-height:1.5;margin:0}.event-log[_ngcontent-%COMP%]{background:#f8f9fa;border:1px solid #dee2e6;border-radius:6px;padding:1rem;max-height:300px;overflow-y:auto}.event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]{background:#fff;border:1px solid #e9ecef;border-radius:4px;padding:.75rem;margin-bottom:.5rem;display:flex;justify-content:space-between;align-items:center;transition:background-color .2s}.event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]:hover{background:#f1f3f4}.event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50;font-weight:600}.event-log[_ngcontent-%COMP%]   .event-item[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#6c757d;font-size:.8rem}.event-log[_ngcontent-%COMP%]   .no-events[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-style:italic;padding:2rem}.event-log[_ngcontent-%COMP%]   .more-events[_ngcontent-%COMP%]{text-align:center;color:#6c757d;font-size:.9rem;margin-top:.5rem;padding-top:.5rem;border-top:1px solid #dee2e6}.multi-search-container[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.multi-search-container[_ngcontent-%COMP%]   .search-input.small[_ngcontent-%COMP%]{flex:1;min-width:200px}@media (max-width: 768px){.documentation-section[_ngcontent-%COMP%]{padding:1rem}.options-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.option-group[_ngcontent-%COMP%]{padding:1rem}.features-list[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.feature-item[_ngcontent-%COMP%]{padding:1rem}.code-example[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{padding:1rem;font-size:.8rem}.multi-search-container[_ngcontent-%COMP%]{flex-direction:column}.multi-search-container[_ngcontent-%COMP%]   .search-input.small[_ngcontent-%COMP%]{min-width:auto}}.options-section[_ngcontent-%COMP%]{margin-bottom:2rem}.options-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2c3e50;margin-bottom:1rem;font-size:1.1rem;font-weight:600}.options-table-container[_ngcontent-%COMP%]{overflow-x:auto;border:1px solid #e0e0e0;border-radius:8px;margin-bottom:1.5rem}.options-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem;background:#fff}.options-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .options-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;border-bottom:1px solid #f0f0f0}.options-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;color:#495057;position:sticky;top:0}.options-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.options-table[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:#f1f3f4;padding:2px 6px;border-radius:4px;font-family:SF Mono,Monaco,Cascadia Code,Roboto Mono,Consolas,Courier New,monospace;font-size:.85em;color:#d73a49;font-weight:600}.options-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f8f9fa}.options-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.usage-example[_ngcontent-%COMP%]{margin-bottom:2rem;border:1px solid #e9ecef;border-radius:8px;overflow:hidden}.usage-example[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{background:#f8f9fa;margin:0;padding:12px 16px;font-size:1rem;font-weight:600;color:#495057;border-bottom:1px solid #e9ecef}.usage-example[_ngcontent-%COMP%]   .code-example[_ngcontent-%COMP%]{margin:0;border:none;border-radius:0}@media (max-width: 768px){.options-table[_ngcontent-%COMP%]{font-size:.8rem}.options-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .options-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 12px}.options-table-container[_ngcontent-%COMP%]{font-size:.85rem}}.address-building-section[_ngcontent-%COMP%]{background:#f8f9fa;padding:3rem 0;border-top:1px solid #e0e0e0}.address-building-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;text-align:center;font-size:2rem}.address-building-section[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{text-align:center;color:#666;margin-bottom:3rem;font-size:1.1rem}.address-form[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;margin-bottom:2rem;box-shadow:0 4px 20px #0000001a}.address-form[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1.5rem;font-size:1.5rem;display:flex;align-items:center;gap:.5rem}.address-inputs-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem;margin-bottom:2rem}@media (max-width: 768px){.address-inputs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}.input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;color:#555;font-size:.9rem}.input-group[_ngcontent-%COMP%]   .address-input[_ngcontent-%COMP%]{padding:.75rem;border:2px solid #e0e0e0;border-radius:6px;font-size:1rem;transition:all .2s ease}.input-group[_ngcontent-%COMP%]   .address-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 3px #007bff1a}.input-group[_ngcontent-%COMP%]   .address-input[_ngcontent-%COMP%]::placeholder{color:#999}.input-group[_ngcontent-%COMP%]   .country-select[_ngcontent-%COMP%]{cursor:pointer;background:#fff}.built-address-display[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1.5rem;margin-bottom:2rem}.built-address-display[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-size:1.2rem}.built-address-display[_ngcontent-%COMP%]   .address-preview[_ngcontent-%COMP%]{background:#fff;border:2px dashed #007bff;border-radius:6px;padding:1rem;font-family:Courier New,monospace;font-size:1rem;color:#333;min-height:50px;display:flex;align-items:center}.built-address-display[_ngcontent-%COMP%]   .address-preview.empty[_ngcontent-%COMP%]{color:#999;font-style:italic;border-color:#ddd}.address-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;margin-bottom:2rem}.address-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:6px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:.5rem}.address-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.address-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]{background:#007bff;color:#fff}.address-actions[_ngcontent-%COMP%]   .btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3;transform:translateY(-1px)}.address-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]{background:#28a745;color:#fff}.address-actions[_ngcontent-%COMP%]   .btn.btn-success[_ngcontent-%COMP%]:hover:not(:disabled){background:#1e7e34;transform:translateY(-1px)}.address-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.address-actions[_ngcontent-%COMP%]   .btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#545b62;transform:translateY(-1px)}.address-actions[_ngcontent-%COMP%]   .btn.btn-info[_ngcontent-%COMP%]{background:#17a2b8;color:#fff}.address-actions[_ngcontent-%COMP%]   .btn.btn-info[_ngcontent-%COMP%]:hover:not(:disabled){background:#117a8b;transform:translateY(-1px)}.address-actions[_ngcontent-%COMP%]   .btn.btn-warning[_ngcontent-%COMP%]{background:#ffc107;color:#212529}.address-actions[_ngcontent-%COMP%]   .btn.btn-warning[_ngcontent-%COMP%]:hover:not(:disabled){background:#e0a800;transform:translateY(-1px)}.geocoding-status[_ngcontent-%COMP%]{margin-top:1rem}.geocoding-status[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{padding:1rem;border-radius:6px;margin-bottom:1rem;font-weight:600;white-space:pre-line;line-height:1.5}.geocoding-status[_ngcontent-%COMP%]   .status-message.success[_ngcontent-%COMP%]{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.geocoding-status[_ngcontent-%COMP%]   .status-message.error[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24;border:1px solid #f1aeb5}.geocoding-status[_ngcontent-%COMP%]   .geocoded-info[_ngcontent-%COMP%]{background:#e7f3ff;border:1px solid #b8daff;border-radius:6px;padding:1rem}.geocoding-status[_ngcontent-%COMP%]   .geocoded-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.5rem;color:#004085}.geocoding-status[_ngcontent-%COMP%]   .geocoded-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.address-map-section[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;margin-bottom:2rem;box-shadow:0 4px 20px #0000001a}.address-map-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-size:1.5rem}.address-map-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:2rem}.address-map-section[_ngcontent-%COMP%]   .address-map-container[_ngcontent-%COMP%]{border-radius:8px;overflow:hidden;margin-bottom:1rem;box-shadow:0 2px 10px #0000001a}.address-map-section[_ngcontent-%COMP%]   .address-map-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem;background:#f8f9fa;border-radius:6px}.address-map-section[_ngcontent-%COMP%]   .address-map-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;color:#555;font-weight:500}@media (max-width: 768px){.address-map-section[_ngcontent-%COMP%]   .address-map-info[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem;text-align:center}}.sample-addresses[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;margin-bottom:2rem;box-shadow:0 4px 20px #0000001a}.sample-addresses[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-size:1.5rem}.sample-addresses[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:2rem}.sample-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}@media (max-width: 768px){.sample-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.sample-card[_ngcontent-%COMP%]{border:2px solid #e0e0e0;border-radius:8px;padding:1.5rem;cursor:pointer;transition:all .2s ease;background:#fff}.sample-card[_ngcontent-%COMP%]:hover{border-color:#007bff;transform:translateY(-2px);box-shadow:0 4px 15px #007bff33}.sample-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-size:1.1rem;display:flex;align-items:center;gap:.5rem}.sample-card[_ngcontent-%COMP%]   .sample-address[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:.9rem;color:#555;line-height:1.4}.sample-card[_ngcontent-%COMP%]   .sample-address[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:.2rem 0}.sample-card[_ngcontent-%COMP%]   .sample-address[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:empty:before{content:"\\2014";color:#ccc}.address-examples[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;box-shadow:0 4px 20px #0000001a}.address-examples[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin-bottom:2rem;font-size:1.5rem}.tips-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem}@media (max-width: 768px){.tips-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.tip-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:1.5rem;border-left:4px solid #007bff}.tip-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin-bottom:1rem;font-size:1.1rem;display:flex;align-items:center;gap:.5rem}.tip-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin-bottom:0;line-height:1.5}@media (max-width: 768px){.address-building-section[_ngcontent-%COMP%]   .address-inputs-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}.address-building-section[_ngcontent-%COMP%]   .address-form[_ngcontent-%COMP%]{padding:1rem}.address-building-section[_ngcontent-%COMP%]   .address-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.address-building-section[_ngcontent-%COMP%]   .address-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;text-align:center}.address-building-section[_ngcontent-%COMP%]   .tips-grid[_ngcontent-%COMP%], .address-building-section[_ngcontent-%COMP%]   .sample-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem}}']})};export{Xr as NgOsmMapDemoComponent};
